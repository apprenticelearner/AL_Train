{"version":3,"sources":["components/skill_panel.js","components/panel.js","components/buttons.js","tutors/Stylus/c_modules/bezier_fit/bezier_fit.js","interactions.js","index.js","components/images/Arrowhead-01-128.png","components/images/Arrowhead-Down-01-128.png","serviceWorker.js","tutors/CTAT/CTAT_Tutor.js","tutors/Stylus/StylusTutor.js","tutors/Stylus/c_modules/bezier_fit/build/js_glue.js","tutors/Stylus/StrokeClassifier.js","App.js","training_handler.js","prior_knowledge.js","eval.js","network_layer.js"],"names":["_react","_interopRequireWildcard","__webpack_require__","_reactNativeWeb","_panel","_interopRequireDefault","deep_equal","require","colorItems","text","items","colors","forEach","item","i","map","t","_","splt","split","length","arr","sep","default","createElement","Text","style","color","textShadowRadius","textShadowColor","_toConsumableArray2","e","reduce","a","b","concat","flat","skill_text_by_action","ButtonPressed","skill","UpdateTextField","match_text_by_action","match","sel","args","Object","entries","acc","kv","push","replace","innerHTML","x","join","SkillPanel","props","_this","_classCallCheck2","this","_possibleConstructorReturn2","_getPrototypeOf2","call","s_skill_set","structure_skills","skill_set","select","starting_selection","state","selected_skill","selected_match","feedback_map","","handleClickSkillItem","bind","_assertThisInitialized2","handleToggleFeedbackButton","initial_select","first_key","keys","id_count","_loop","skills","title","key","index","setState","fnc","rest","callback","evt","_rest","_slicedToArray2","selectSkill","select_callback","interactions_service","send","type","data","_rest2","label","new_feedback_map","console","log","cm","_objectSpread","prevProps","prevState","s_keys","_this2","View","skillbox_styles","content","liststyles","skill_list","ScrollView","header","TouchableHighlight","underlayColor","sectionHeader","skill_eq","action","where_colors","skill_elem","onPress","daisyChain","backgroundColor","matches","mIndex","match_eq","correct","incorrect","match_container","feedback_button","correct_selected","String","fromCharCode","incorrect_selected","flex","filter","skill_info","collapsedHeight","how","where","JSON","stringify","when","which","Component","StyleSheet","create","alignItems","flexGrow","maxHeight","flexDirection","borderRadius","borderWidth","borderColor","paddingTop","overflowY","flexWrap","paddingLeft","paddingRight","paddingBottom","fontSize","fontWeight","padding","borderBottomWidth","width","textAlign","display","textIndent","defaultProps","Panel","icons","up","down","expanded","expandable","animation","Animated","Value","event","nativeEvent","layout","height","minHeight","expandedHeight","Math","max","initialValue","finalValue","setValue","timing","toValue","duration","start","icon","styles","container","onLayout","_setMinHeight","toggle","titleContainer","Image","buttonImage","source","body","_setMaxHeight","children","margin","overflow","button","query_text","Buttons","current","interactions_state","Waiting_User_Feedback","action_str","callbacks","button_wrapper1","prompt1","next_button","next_button_text","startstate_button","startstate_button_text","button_wrapper2","prompt2","yes_no","yes_button","yes_button_text","no_button","no_button_text","submit_button","submit_button_text","debugmode","button_wrapper3","nools_button","app","changeInteractionMode","tutor_mode","nools_button_text","generateBehaviorProfile","bottom","_defineProperty2","marginTop","marginBottom","flexShrink","justifyContent","position","prompt_text","_js_glue","BezierFit","max_stroke_length","arguments","undefined","promise","then","Module","HEAPF64","HEAP32","input_ptr","_malloc","BYTES_PER_ELEMENT","output_ptr","ml_ptr","input_buffer","Float64Array","buffer","output_buffer","ml_buffer","c_module","fitCurve","points","error","nPts","set","n_curves","_c_FitCurve","_c_ML_EncodeCurves","out","it","nxt","round","next","value","fitCurveFeatures","groupStrokes","strokes","values","len_ptr","len_buffer","Int32Array","lens","stroke","stroke_ptr","out_ptr","out_buffer","nGroups","_c_GroupStrokes","L","grp","j","id","_free","_xstate","appendStartHistory","assign","start_state_history","context","tutor","getState","history","stateRecalc","staged_SAI","test_mode","reward","assignFoci","_extends2","foci_of_attention","getCurrentFoci","saiIsCorrectDone","sai_data","selection","forceUseExample","saiData","skipTraining","examples_only","isFreeAuthor","free_author","checkIsCorrect","noApplicableSkills","logError","_kill_this","network_layer","kill_this","toString","clearSkillPanel","skill_panel_props","Applicable Skills","fillSkillPanel","recalcFeedbackMap","match_id","new_label","was_empty","now_empty","assignFeedbackMap","skill_panel","updateFeedbackMap","toggleFeedbackStyle","build_interactions_sm","inh_context","sm","buttons","action_type","tutor_sm","interactive","interactive_sm","non_interactive_sm","Machine","services","sendFeedback","Promise","resolve","sendFeedbackExplicit","applyNextExample","attemptStagedSAI","queryApprentice","checkApprentice","finalizeStartState","exitSetStartStateMode","actions","assignResponse","response","assignStagedSAI","assignExample","assignAttempt","assignCorrect","assignIncorrect","clearFeedbackData","skill_applications","assignSkillApplications","responses","printEvent","done","training_service","enterSetStartStateMode","enterFeedbackMode","exitFeedbackMode","enterFociMode","exitFociMode","enterTutoringMode","exitTutoringMode","displayCorrectness","printFeedback","applyStagedSAI","applySAI","proposeSAI","confirmProposedSAI","clearProposedSAI","generate_nools","guards","get_machine_actions","initial","states","Start","entry","on","Querying_Apprentice","invoke","src","onDone","target","cond","onError","exit","Applying_Staged_SAI","Applying_Next_Example","Sending_Feedback","Done","Fail","Setting_Start_State","START_STATE_SET","Finalizing_Start_State","Waiting_Demonstrate_Only","Waiting_Yes_No_Feedback","SKILL_PANEL_FEEDBACK_NONEMPTY","YES_PRESSED","NO_PRESSED","Waiting_Submit_Feedback","SKILL_PANEL_FEEDBACK_EMPTY","SUBMIT_SKILL_FEEDBACK","STAGE_SAI","TOGGLE_FEEDBACK","FEEBACK_MAP_UPDATE","DEMONSTRATE","GEN_NOOLS","Waiting_Select_Foci","FOCI_DONE","Waiting_User_Attempt","ATTEMPT","Checking_Against_Apprentice","_reactDom","serviceWorker","_CTAT_Tutor","_StylusTutor","_App","_relaxedJson","tutor_map","ctatttutor","CTAT_Tutor","ctat","stylustutor","StylusTutor","stylus","safeParse","json","parsed","parse","training_file","urlParams","URLSearchParams","window","location","search","substring","AL_URL","get","OUTER_LOOP_URL","HOST_URL","origin","toLowerCase","use_foci","nools_dir","getWebProps","fetch","str","RJSON","training_json","training_file_props","set_params","obj","removeEmpty","tutorClass","_args","ReactDOM","render","ref","react_interface","document","getElementById","unregister","module","exports","p","config","navigator","publicUrl","URL","process","href","addEventListener","swUrl","isLocalhost","contentType","headers","status","indexOf","ready","registration","reload","registerValidSW","catch","checkValidServiceWorker","Boolean","hostname","register","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","_reactNativeWebWebview","_classAutobind","queryString","path","$","checkTypes","element","types","ok","classList","contains","relative_pos_cache","color_class_map","EXAMPLE","CORRECT","INCORRECT","HIGHLIGHT","START_STATE","DEFAULT","ctat_webview","React","createRef","highlighted_elements","iframe","init_callback","problem_name","prob_obj","nl","html","LOAD_SCREEN","reject","HTML_name","lastIndexOf","domain_name","HTML_PATH","isAbsolute","working_dir","BRD_name","free_authoring","qf_exists","toUpperCase","abs_qf_paths","term_print","qf","question_file","includes","problem_obj","logging_params","dataset_level_name1","dataset_level_type1","SessionLog","Logging","log_service_url","user_guid","agent_name","session_id","custom_fields","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","_step$value","err","return","params","updateContext","graph","commLibrary","hasConfig","uri","onLoad","_triggerWhenInitialized","steps","selections","elm_type","attributes","elm","iframe_content","attr","setAttribute","getElementsByTagName","appendChild","_this3","frameRef","contentWindow","CTAT","CTATCommShell","commShell","ToolTutor","setTimeout","getGraph","getCommLibrary","CTATConfiguration","_inject_element","rel","flashVars","setParams","deliverymode","CTAT_CORRECT","Base","Tutorable","EventType","CTAT_INCORRECT","CTAT_ACTION","sai","detail","getSelection","getInput","colorElement","start_state_elements","remove","handle_user_set_state","removeEventListener","firstChild","lockElement","handleUserInput","contentEditable","getAction","inputs","unlockElement","skill_app","inps","handleUserExample","CTATSAI","_done_clicked_example","handleUserAttempt","_done_clicked_attempt","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","ele","indx","current_foci","highlightElement","splice","unhighlightElement","unhighlightAll","handle_foci_select","stepId","getTracer","getLastResult","getStepID","_this4","currentElement","shouldSkipTraining","_shouldSkipTraining","handle_ctat_feedback","getTransactionID","_this5","applyHint","getDefaultSAI","sel_elm","incorrect_event","CustomEvent","component","bubbles","cancelable","dispatchEvent","sai_obj","processComponentAction","name","CTATShellTools","findComponent","setEnabled","firstElementChild","colorIndex","add","c","mapping","var_str","elem_str","alert","_i","_arr","getExampleTracer","getBestNextLink","proposed_SAI","clearElement","highlightSAI","stageSAI","comp","executeSAI","sendXML","_ref","_ref$encode_relative","encode_relative","_ref$strip_offsets","strip_offsets","_ref$use_offsets","use_offsets","_ref$use_class","use_class","_ref$use_id","use_id","_ref$append_ele","append_ele","_ref$numeric_values","numeric_values","_ref$clear_editable_v","clear_editable_values","state_array","toArray","state_json","each","idx","offsetParent","dataset","silexId","offsetLeft","offsetTop","offsetWidth","offsetHeight","Number","options","temp","count","rel_objs","elm_list","to_left","to_right","above","below","_elm_list$i","a_n","a_obj","_elm_list$j","b_n","b_obj","dist","grab1st","compare2nd","y","rel_obj","sort","originWhitelist","_reactNativeSvg","_bezier_fit","_StrokeClassifier","get_min","min","apply","bounds","get_max","array_equal","pick","DEFAULT_START_STATE","pen_down","active_elements","n_strokes","mode","check_button_callback","elmUnderPoint","StrokeClassifier","recognize_symbol","setMode","mode_to_color","set_start_state","demonstrate","debug","elements","groups","setStartState","new_strokes","feedback_start_stroke_id","clear","resolve_elm","locked","_typeof2","stroke_ids","s_id","highlight","_i2","_Object$entries","elmobj","_Object$entries$_i","elm1","groupMode","g_coords","filled","c1","_i3","_Object$entries2","_Object$entries2$_i","e2","c2","mW","gridWidth","mH","ts","staged_element","_sai$selection$slice$","slice","_sai$selection$slice$2","gx","gy","minX","minY","maxX","maxY","floor","className","baseVal","parentNode","points_str","clientX","clientY","mouseDown","grid_assignments","_stroke$bounds","min_i","max_i","ceil","min_j","max_j","b_i","b_j","b_area","area","b_str","parseInt","_i4","_Object$entries3","_Object$entries3$_i","extra_info","loc_str","coords","elem_indxs","Set","s","_i5","_Object$entries4","_Object$entries4$_i","Array","from","e_id","old_g","new_g","old_s","new_s","added_s","removed_s","mouseUp","_this$snapStrokesToGr","snapStrokesToGrid","_this$snapStrokesToGr2","_this$groupStrokes","_this$groupStrokes2","_groupDiff","added","removed","removeElement","group","addElement","time","symbol_probs","timeEnd","_ref2","sym","prob","padStart","toFixed","lp","pow","MIN_DIST","bezier_splines","mouseMove","getElementUnderPoint","mouseDownElm","strokeCandidates","minStroke","minDist","MAX_VALUE","_i6","_strokeCandidates","d","_i8","_Object$entries5","_Object$entries5$_i","last_ev","d_strokes","end","fill","range","evaluation","elems","_elemsFromStrokes","ev","ev_strokes","evaluate","getEvaluatable","svg_content","elmUnderCursor","elmUnderCursor_strokes","strokeWidth","Polyline","strokeOpacity","strokeLinecap","pen_color_map","Circle","cx","cy","r","splines","circles","curve_str","Path","cursor","winWidth","winHeight","_i11","_Object$entries6","_Object$entries6$_i","textAnchor","Rect","cursor_map","TouchableWithoutFeedback","onMouseDown","penDown","onMouseUp","penUp","onMouseLeave","onMouseMove","penMove","absoluteFill","Defs","circle_buttons","undo_button","undoStroke","undo_button_text","check_button","check_button_text","done_button","pressDone","done_button_text","TUTOR","foci","feedback","null","loading","zIndex","shadowColor","shadowOffset","shadowOpacity","shadowRadius","right","left","c_BezierFit","readyPromiseResolve","getOwnPropertyDescriptor","defineProperty","configurable","abort","moduleOverrides","hasOwnProperty","arguments_","thisProgram","ENVIRONMENT_IS_WEB","ENVIRONMENT_IS_WORKER","Error","readBinary","scriptDirectory","self","currentScript","substr","importScripts","url","xhr","XMLHttpRequest","open","responseType","Uint8Array","warn","warnOnce","shown","assert","wasmBinary","wasmMemory","setTempRet0","WebAssembly","wasmTable","Table","maximum","ABORT","condition","HEAP8","HEAPU8","HEAPU32","UTF8Decoder","TextDecoder","UTF8ArrayToString","heap","maxBytesToRead","endIdx","endPtr","subarray","decode","u0","u1","u2","ch","UTF8ToString","ptr","stringToUTF8Array","outIdx","maxBytesToWrite","startIdx","u","charCodeAt","lengthBytesUTF8","len","writeArrayToMemory","array","writeAsciiToMemory","dontAddNull","STACK_MAX","DYNAMICTOP_PTR","STACK_BASE","DYNAMIC_BASE","buf","INITIAL_INITIAL_MEMORY","writeStackCookie","checkStackCookie","cookie1","cookie2","callRuntimeCallbacks","shift","func","arg","prototype","Memory","byteLength","Int8Array","Int16Array","Uint16Array","Uint32Array","Float32Array","h16","h8","__ATPRERUN__","__ATINIT__","__ATMAIN__","__ATEXIT__","__ATPOSTRUN__","runtimeInitialized","runtimeExited","imul","fround","clz32","trunc","abs","cos","sin","tan","acos","asin","atan","atan2","exp","sqrt","runDependencies","runDependencyWatcher","dependenciesFulfilled","runDependencyTracking","what","js","stack","jsStackTrace","stackTrace","RuntimeError","FS","init","createDataFile","createPreloadedFile","createLazyFile","mkdev","registerDevice","analyzePath","loadFilesFromDB","ErrnoError","hasPrefix","prefix","startsWith","dataURIPrefix","isDataURI","filename","createExportWrapper","fixedasm","displayName","asm","wasmBinaryFile","getBinary","___wasm_call_ctors","___exception_infos","__ZSt18uncaught_exceptionv","uncaught_exceptions","SYSCALLS","mappings","buffers","printChar","stream","curr","varargs","getStr","get64","low","high","ENV","getEnvStrings","strings","env","USER","LOGNAME","PATH","PWD","HOME","LANG","languages","__isLeapYear","year","__arraySum","sum","__MONTH_DAYS_LEAP","__MONTH_DAYS_REGULAR","__addDays","date","days","newDate","Date","getTime","leap","getFullYear","currentMonth","getMonth","daysInCurrentMonth","getDate","setDate","setMonth","setFullYear","_strftime","maxsize","format","tm","tm_zone","tm_sec","tm_min","tm_hour","tm_mday","tm_mon","tm_year","tm_wday","tm_yday","tm_isdst","tm_gmtoff","pattern","EXPANSION_RULES_1","%c","%D","%F","%h","%r","%R","%T","%x","%X","%Ec","%EC","%Ex","%EX","%Ey","%EY","%Od","%Oe","%OH","%OI","%Om","%OM","%OS","%Ou","%OU","%OV","%Ow","%OW","%Oy","rule","RegExp","WEEKDAYS","MONTHS","leadingSomething","digits","character","leadingNulls","compareByDay","date1","date2","sgn","compare","getFirstWeekStartDate","janFourth","getDay","getWeekBasedYear","thisDate","janFourthThisYear","janFourthNextYear","firstWeekStartThisYear","firstWeekStartNextYear","EXPANSION_RULES_2","%a","%A","%b","%B","%C","%d","%e","%g","%G","%H","%I","twelveHour","%j","%m","%M","%n","%p","%S","%t","%u","%U","janFirst","firstSunday","endDate","februaryFirstUntilEndMonth","%V","daysDifference","%w","%W","firstMonday","%y","%Y","%z","off","ahead","%Z","%%","bytes","stringy","u8array","numBytesWritten","intArrayFromString","calledRun","asmLibraryArg","__cxa_allocate_exception","size","__cxa_atexit","a0","a1","unshift","__cxa_throw","destructor","adjusted","refcount","caught","rethrown","__handle_stack_overflow","__map_file","pathname","___errno_location","__sys_munmap","addr","info","flags","allocated","malloc","syscallMunmap","emscripten_get_sbrk_ptr","emscripten_memcpy_big","dest","num","copyWithin","emscripten_resize_heap","requestedSize","abortOnCannotGrowMemory","environ_get","__environ","environ_buf","bufSize","string","environ_sizes_get","penviron_count","penviron_buf_size","fd_close","fd","fd_read","iov","iovcnt","pnum","getStreamFromFD","doReadv","fd_seek","offset_low","offset_high","whence","newOffset","fd_write","memory","$i","strftime_l","table","wasi_snapshot_preview1","receiveInstance","instance","clearInterval","removeRunDependency","setInterval","dep","trueModule","receiveInstantiatedSource","output","instantiateArrayBuffer","receiver","credentials","binary","instantiate","reason","instantiateStreaming","instantiateAsync","createWasm","run","doRun","cb","postRun","preRun","runCaller","pop","tf","_tfjsBackendWasm","alphabet","setWasmPath","tf_promise","setBackend","all","model_promise","_asyncToGenerator2","_regenerator","mark","_callee","wrap","_context","prev","loadLayersModel","model","sent","stop","normalize_strokes","minx","miny","maxx","maxy","out_strokes","inp","curve_features","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","feats","input","tensor","DocumentType","float32","predict","res","_argsort","k","sorted","val","argsort","_argsort2","probs","indicies","_skill_panel","_buttons","_interactions","_training_handler","_network_layer","_object","_reactNativeLoadingSpinnerOverlay","ALReactInterface","onInteractionTransition","NetworkLayer","default_props","buttons_props","tutor_props","training_description","agent_description","problem_description","standard_props","Interactions_Machine_State","Training_Machine_State","o1","o2","diff","shallow_diff","wd","interactions_sm","problem_props","training_machine","build_training_sm","interpret","onTransition","onTrainingTransition","subscribe","setTutorMode","setInteractive","setFreeAuthor","ground_truth_path","out_dir","f","t_context","_state","resp","in_list","line","to_json_list","resps","requests","lower_display","Tutor","controls","prompt","ctat_tutor","overlay","visible","textContent","textStyle","spinnerTextStyle","top","overlay_text","justifySelf","file_params","agent_params","problem_props_dict","Loading_Training_File","Serving_Training_Sets","Serving_Agents","Creating_Agent","Handling_Prior_Knowledge","Serving_Problems","Waiting_Problem_Load","Training","PROBLEM_DONE","CHANGE_INTERACTION_MODE","All_Done","load_training_file","serve_next_training_set","serve_next_agent","create_agent","createAgent","serve_next_problem","load_problem","handle_prior_knowledge","start_training_interaction","assignAgentId","agent_id","allDone","assignInteractionSM","sendProblemDone","iteratorEmpty","_prior_knowledge","_eval","_randomJs","Random","CTATGuid","s4","random","guid","training_iterator","agent_iterator","evalJSONFunc","_x","_x2","parseOuterLoopController","_callee4","problem_set","_args4","_context4","abrupt","outer_loop_controller","_callee2","agent_obj","rep_count_str","prior_knowledge","other_data","_context2","_rep_count","request_history","agent_type","other_agent_data","agent_start_time","_x5","_x6","applyPriorKnowledge","problem_iterator","_next_prob_obj","_callee6","_context6","_ref4","_callee5","fp_clone","_context5","newOuterLoopController","nextProblem","_x13","_x14","_ref3","_callee3","_yield$_next_prob_obj","_yield$_next_prob_obj2","_yield$_next_prob_obj3","_yield$_next_prob_obj4","_context3","_x11","_x12","loadProblem","pass_along_context","withContext","new_context","spec","iter","type_map","_path","bestintersect","pk_iter","cache_folder","cache","cache_content","basename","statusText","train_now","_papaparse","registedFunctions","concatenate","shuffle","sample","glob","from_file","estimate_Pik","gen_pretraining","gen_pivot_table","mirror_students","abs_path","g","rez","t0","finish","n","glob_key","default_obj","m","o","backcast","_callee7","_context7","p_parse_csv","csv","pre_fetch","papa","read_afm_table","_callee9","file","_context9","delimiter","dynamicTyping","_callee8","kc_table","stu_table","kc_json","stu_json","_context8","_x28","exact_align","_callee10","fo_err_by_kc","_yield$read_afm_table","_yield$read_afm_table2","stu_intr","row","table_path","error_table","curve_by_kc","opps_by_kc","kc","curve","minIndex","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_iterator4","_step4","_step4$value","_context10","t1","t2","t3","Infinity","t4","_callee11","new_out","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_iterator5","_step5","_context11","_callee12","only_attr","only_str","pivot_table","problem_pool","onlys_map","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_iterator6","_step6","any","only_steps","_args12","_context12","_callee13","human_transactions","human_afm_stats","pool_agent_error_table","Pik_method","problem_key","kc_model","KCs","human_problems","human_path_map","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_iterator7","_step7","step_pivot_table","pool_agent_problems","human_prob_seq","std","student","seq","new_seq","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_iterator8","_step8","full_path","opp_table","student_id","stu_seq","pretraining","_context13","transaction_file","download","step","sequence","view","pv","t5","method","afm_stats","opportunities","unparse","_callee14","pivot_table_csv","_iteratorNormalCompletion9","_didIteratorError9","_iteratorError9","_iterator9","_step9","path_map","_iteratorNormalCompletion10","_didIteratorError10","_iteratorError10","_iterator10","_step10","kc_model_id","csv_str","_context14","kc_str","step_id","Selection","step_id_set","append","Problem Path","KC","newline","write_file","_callee15","_context15","_callee16","_context16","isArray","ignoreKeys","wait","ms","fetch_retry","_x3","JSON_HEADERS","Accept","Content-Type","project_id","next_state","rhs_id","sendTrainingData","updateOuterLoopController","add_skill_info","message","out_data","problems","dir","elapse","start_data","elapse_minutes","whatever","completeness_data","kwargs","_x4","outer_loop_type","outer_loop_args","update_data"],"mappings":"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","file":"static/js/main.c7475578.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { TouchableHighlight,ScrollView,View, Text, StyleSheet } from \"react-native\";\nimport Panel from './panel.js'\nvar deep_equal = require('fast-deep-equal');\n\n\n\nfunction cramBtw(arr,sep){\n  return [...arr].map((e, i) => i < arr.length - 1 ? [e, sep] : [e]).reduce((a, b) => a.concat(b))\n}\n\nfunction colorItems(text, items, colors){\n  text = [text]\n  // for(var item in colorMap) {\n  items.forEach(function(item,i) {\n    text = text.map((t,_) => {\n      if(typeof t == 'string'){\n        let splt = t.split(item)\n        if(splt.length > 1){\n         return cramBtw(splt,<Text style={\n            {\"color\":colors[i],'textShadowRadius':3, 'textShadowColor': colors[i]}}>{item}</Text>);\n         // return cramBtw(splt,<Text style={{\"color\":colorMap[item]}}>{item}</Text>);\n        }\n      }\n      return t;\n    }).flat();\n  });\n  return text;\n}\n\nconst skill_text_by_action ={\n  ButtonPressed: function(skill,colors) {\n    return \"Press Button\"\n  },\n  UpdateTextField: function(skill,colors) {\n    return skill['name'] || skill['how'];\n  }\n\n};\n\nconst match_text_by_action = {\n  UpdateTextField: function(match,colors) {\n    let sel = match['mapping']['?sel']\n    let args =  Object.entries(match['mapping']).reduce(\n      function (acc,kv) {if(kv[0] !== \"?sel\") {acc.push(kv[1])}return acc;},[]);\n    // console.log(sel,args)\n    sel = sel.replace(\"?ele-\",\"\")\n    args = args.map(x => x.replace(\"?ele-\",\"\"))\n    let innerHTML = /*String.fromCharCode(8226) +*/ \"(\" + args.join(\", \") + \"): \" + sel + \"->\" + (match['inputs'] && match['inputs']['value']);\n    innerHTML = colorItems(innerHTML,[sel].concat(args), colors); // innerHTML = cramBtw( innerHTML.split(\"A1\"),<Text style={{\"color\":\"red\"}}>A1</Text>);\n    return innerHTML;\n  },\n  ButtonPressed: function(match,colors) {\n    return \"Press: \" + match['mapping']['?sel'].replace(\"?ele-\",\"\");\n  }                          \n}\n\n\nclass SkillPanel extends Component{\n  constructor(props){\n        super(props);\n\n\n        this.s_skill_set = this.structure_skills(props.skill_set)\n        \n        var select = this.starting_selection();\n        // const selected_skill = 0;\n        this.state = {\n          selected_skill: select,\n          selected_match: select,\n          feedback_map:{},\n          s_skill_set : {\"\" : []}\n        };\n      this.handleClickSkillItem = this.handleClickSkillItem.bind(this)\n      this.handleToggleFeedbackButton = this.handleToggleFeedbackButton.bind(this)\n  }\n\n  starting_selection(){\n    if(this.props.initial_select == \"first\"){\n      let first_key = Object.keys(this.s_skill_set)[0];\n      return first_key==null ? null : this.s_skill_set[first_key][0];\n    }\n\n  }\n\n  structure_skills(skill_set){\n    const s_skill_set = {}\n    var id_count = 0;\n    for (var title in skill_set) {\n      let skills = {};\n\n      for (var i in skill_set[title]){\n        var skill = skill_set[title][i]\n        if(!(skill['how'] in skills)){\n          \n          skills[skill['how']] = skill;\n          skills[skill['how']]['matches'] = []\n          // delete skills[skill['how']][\"mapping\"]\n\n        }\n        skill['_id'] = id_count++;\n        skills[skill['how']]['matches'].push(skill);\n\n      // console.log(skills)\n      s_skill_set[title] = Object.keys(skills).map((key,index)=>skills[key]);\n      }\n\n    }\n    return s_skill_set\n    // console.log(skill_set)\n  }\n\t\n\n  selectSkill(skill,match){\n    if(!match){\n      match = skill\n    }\n    this.setState({selected_skill: skill,\n                    selected_match: match})     \n  }\n\n  daisyChain(fnc, rest,callback){\n    return (evt) => {fnc(evt,rest,callback)};\n  }\n  handleClickSkillItem(evt,rest,callback){\n    const [skill,match] = rest;\n    // console.log(title,index,match)\n    // this.selectSkill(this.props.skill_set[title][index],match)\n    this.selectSkill(skill,match)\n    // console.log(this.props.select_callback)\n    if(this.props.select_callback){\n      this.props.interactions_service.send({type :\"STAGE_SAI\",data : match || skill})\n      // this.props.select_callback(match || skill)   \n    }\n    if(callback){\n      callback(rest)\n    }\n    \n  }\n  handleToggleFeedbackButton(evt,rest){\n    const [skill,match,label] = rest;\n    this.props.interactions_service.send(\n        {type: \"TOGGLE_FEEDBACK\",skill:skill, match:match, label:label})\n    // console.log(skill)\n    // console.log(match)\n    // console.log(label)\n    // let match_id = match[\"_id\"];\n    // // console.log(match[\"_id\"])\n    // // console.log(this.state.feedback_map)\n    // let new_label = (this.state.feedback_map[match_id]\n    //        && label === this.state.feedback_map[match_id]) ? null : label;\n    \n    // let new_feedback_map = {...this.state.feedback_map};\n    // if(new_label === null){\n    //   delete new_feedback_map[match_id];\n    // }else{\n    //   new_feedback_map[match_id] = new_label;\n    // }\n  }\n\n  updateFeedbackMap(new_feedback_map){\n    \n    // let was_empty = Object.keys(this.state.feedback_map).length === 0\n    // let now_empty = Object.keys(new_feedback_map).length === 0\n    // if(!was_empty && now_empty){\n    //   console.log(\"EMPTY\")\n    //   this.props.interactions_service.send(\"SKILL_PANEL_FEEDBACK_EMPTY\")\n    // }else if(was_empty && !now_empty){\n    //   console.log(\"NOT EMPTY\")\n    //   this.props.interactions_service.send(\"SKILL_PANEL_FEEDBACK_NONEMPTY\")\n    // }\n\n    this.setState({feedback_map : new_feedback_map});\n\n    console.log(new_feedback_map)\n\n    // if(this.props.correctness_callback){\n    //   this.props.correctness_callback(match || skill,new_label)\n    // }\n  }\n\n  queuedSkillApplicationFeedback(){\n    var feedback_queue = {}\n    let cm = {...this.state.feedback_map}\n    for (var key in cm) {\n      cm[key] = cm[key] === \"correct\" ? 1 :-1 \n    }\n    return cm\n  }\n\n  componentDidUpdate(prevProps, prevState){\n    if(!deep_equal(prevProps.skill_set,this.props.skill_set)){\n      let s_skill_set = this.structure_skills(this.props.skill_set)\n      this.setState({\n        feedback_map: {},\n        s_skill_set : s_skill_set\n      })\n\n      let s_keys = Object.keys(s_skill_set)\n      if(s_keys.length > 0){// && !this.state.selected_skill || !this.state.selected_skill){\n        let select = s_skill_set[s_keys[0]][0]\n        this.setState({\n            selected_skill: select,\n            selected_match: select,\n        })\n      }else{\n        this.setState({\n            selected_skill: null,\n            selected_match: null,\n        })\n      }\n    }\n    // }\n  }\n\n\n\trender(){\n    // console.log(this.s_skill_set)\n    // this.s_skill_set = this.structure_skills(this.props.skill_set)\n    \n    \n\n    // this.state = \n\t\treturn (\n\t\t    <View style={skillbox_styles.content}>\n\t\t      \n          <View style={liststyles.skill_list}>\n          <ScrollView>\n            {Object.keys(this.state.s_skill_set).map((title, index) => {\n              let header = <TouchableHighlight underlayColor=\"#fff\" >\n                 <Text style={liststyles.sectionHeader}>{title}</Text>\n              </TouchableHighlight> \n              // let itemStyle = liststyles.item;\n              let rest = this.state.s_skill_set[title].map((skill, index) => {\n                  const skill_eq = this.state.selected_skill && this.state.selected_skill['_id']===skill['_id'];\n                  // console.log(skill_eq)\n                  // console.log(\"IS\",itemStyle)\n                  // console.log(\"EQ\",eq, index, (eq ? itemStyle.selectColor : itemStyle.backgroundColor))\n                  let innerHTML = (skill_text_by_action[skill.action] || skill_text_by_action[\"UpdateTextField\"])(skill,this.props.where_colors)\n                  let skill_elem = <TouchableHighlight underlayColor=\"#f1f1f1\"\n                             onPress={ this.daisyChain(this.handleClickSkillItem,[skill],\n                                                       skill['callback']) } >\n                            <Text style={[liststyles.item, skill_eq && liststyles.selected_skill]} \n                            backgroundColor={\"#ff00ffff\"}>{\n                              innerHTML}</Text>\n                        </TouchableHighlight>\n                  let matches = [];\n                  if(\"matches\" in skill){\n                      // console.log(skill[\"matches\"])\n                      matches = skill[\"matches\"].map((match,mIndex) => {\n                        if('mapping' in match){\n                          const match_eq = this.state.selected_match && this.state.selected_match['_id']===match['_id'];\n                          \n                          // let sel = match['mapping']['?sel']\n                          // let args =  Object.entries(match['mapping']).reduce(\n                          //   function (acc,kv) {if(kv[0] != \"?sel\") {acc.push(kv[1])}return acc;},[]);\n                          // console.log(sel,args)\n                          // sel = sel.replace(\"?ele-\",\"\")\n                          // args = args.map(x => x.replace(\"?ele-\",\"\"))\n                          // let innerHTML = String.fromCharCode(8226) + \"(\" + args.join(\", \") + \"):\" + sel + \"->\" + (match['inputs'] && match['inputs']['value']);\n                          // innerHTML = colorItems(innerHTML,{\"B1\":'red',\"A1\":'green'}); // innerHTML = cramBtw( innerHTML.split(\"A1\"),<Text style={{\"color\":\"red\"}}>A1</Text>);\n                          // console.log(match_text_by_action,match.action)\n                          let innerHTML = (match_text_by_action[match.action] || match_text_by_action[\"UpdateTextField\"])(match,this.props.where_colors)\n                          let correct = this.state.feedback_map[match[\"_id\"]] === \"correct\";\n                          let incorrect = this.state.feedback_map[match[\"_id\"]] === \"incorrect\";\n                          // console.log(this.state.feedback_map)\n                          let match_view = <View style={liststyles.match_container}> \n\n                            <TouchableHighlight underlayColor=\"#919191\"  \n                            onPress = {this.daisyChain(this.handleToggleFeedbackButton,[skill,match,\"correct\"])}\n\n                                 // onPress={ this.daisyChain(this.handleClickSkillItem,[skill,match], \n                                                           // match['callback'])} >\n                                                           >\n                                <Text style={[liststyles.feedback_button, correct && liststyles.correct_selected]}>{\n                                  String.fromCharCode(10004)\n                                  // innerHTML\n                                  // String.fromCharCode(8226)+ \" \"+Object.values(match['mapping'] || {}).map(.join(\", \")\n                                }</Text>\n                            </TouchableHighlight>\n                            <TouchableHighlight underlayColor=\"#919191\"  \n                            onPress = {this.daisyChain(this.handleToggleFeedbackButton,[skill,match,\"incorrect\"])}\n                                 // onPress={ this.daisyChain(this.handleClickSkillItem,[skill,match], \n                                                           // match['callback'])} >\n                                                           >\n                                <Text style={[liststyles.feedback_button, incorrect && liststyles.incorrect_selected]}>{\n                                  String.fromCharCode(10006)\n                                  // innerHTML\n                                  // String.fromCharCode(8226)+ \" \"+Object.values(match['mapping'] || {}).map(.join(\", \")\n                                }</Text>\n                            </TouchableHighlight>\n\n                            \n                            <TouchableHighlight underlayColor=\"#919191\"\n                                  style={{'flex': 1}}\n                                 onPress={ this.daisyChain(this.handleClickSkillItem,[skill,match], \n                                                           match['callback'])} >\n                                <Text style={[liststyles.match,skill_eq && match_eq && liststyles.selected_match]}>{\n                                  innerHTML\n                                  // String.fromCharCode(8226)+ \" \"+Object.values(match['mapping'] || {}).map(.join(\", \")\n                                }</Text>\n                            </TouchableHighlight>\n                          </View>\n\n                          // let match_view = <View> {match_elem} </View>\n                          // console.log(typeof match_elem)\n                          return match_view;\n                        }else{\n                          return null;\n                        }\n                      })\n                  }\n                  matches = matches.filter(x => x != null); //remove undefinded\n                  return [skill_elem].concat(matches);\n                })\n              // console.log(title)\n              // console.log(header)\n              // console.log(rest)\n              return [header].concat(rest)\n              })\n            }\n          </ScrollView>\n\n            \n\n          </View>\n\n          <View style={liststyles.skill_info}>  \n\t\t      \n            \n  \t\t        <Panel title=\"How\"\n  \t\t        \t   collapsedHeight={this.props.collapsedHeight.how}>\n  \t\t          <Text>{this.state.selected_skill && this.state.selected_skill.how}</Text>\n  \t\t        </Panel>\n  \t\t        <Panel title=\"Where\"\n  \t\t        \t   collapsedHeight={this.props.collapsedHeight.where}>\n  \t\t          <Text>{this.state.selected_skill && JSON.stringify(this.state.selected_skill.where, null, 2)}</Text>\n  \t\t        </Panel>\n  \t\t        <Panel title=\"When\"\n  \t\t        \t   collapsedHeight={this.props.collapsedHeight.when}>\n  \t\t          <Text>{this.state.selected_skill && this.state.selected_skill.when}</Text>\n  \t\t        </Panel>\n  \t\t        <Panel title=\"Which\"\n  \t\t        \t   collapsedHeight={this.props.collapsedHeight.which}>\n  \t\t          <Text>{this.state.selected_skill && this.state.selected_skill.which}</Text>\n\t\t        </Panel>\n          \n\n          </View>  \n\n\n\n\n\t\t    </View>  \n\t\t  );\n\t}\n\n}\n\nconst skillbox_styles = StyleSheet.create({\n  content: {\n    // \"display\": \"flex\",\n    // flex : 1,\n    alignItems: \"stretch\",\n    flexGrow: 1,\n\n    \"maxHeight\" : \"100%\",\n    // \"flexDirection\":\"row-reverse\",\n    \"flexDirection\":\"row\",\n    \n    backgroundColor: \"#F5FCFF\",\n    // \"width\":\"100%\",\n    borderRadius: 4,\n    borderWidth: 0.5,\n    borderColor: '#d6d7da',\n    // overflow : \"hidden\",\n    \n  },\n});\n\nconst liststyles = StyleSheet.create({\n  skill_list: {\n   // flexBasis : 250,\n   flex: 5,\n   paddingTop: 10,\n  },\n  skill_info: {\n   maxHeight : \"100%\",\n   flex: 5,\n   paddingTop: 10,\n   overflowY: \"scroll\",\n  },\n  //scroll_view: {\n    //height : \"100%\",\n    //overflowY: \"scroll\",\n  //},\n  sectionHeader: {\n    flexWrap: 'wrap',\n    paddingTop: 6,\n    paddingLeft: 10,\n    paddingRight: 10,\n    paddingBottom: 2,\n    fontSize: 15,\n    fontWeight: 'bold',\n    backgroundColor: \"'rgba(247,247,247,1.0)'\",\n  },\n  selected_skill:{\n    backgroundColor: \"#93e4ec\",\n  },\n  \n\n  item: {\n    flexWrap: 'wrap',\n    padding: 4,\n    paddingLeft: 6,\n    fontSize: 16,\n    borderBottomWidth: 1,\n    borderColor: 'gray',\n    backgroundColor: \"'rgba(247,0,0,0.0)'\",\n  },\n  feedback_button:{\n    fontSize: 20,\n    width:27,\n    textAlign:\"center\",\n    borderWidth:.1,\n    borderColor: 'lightgray',\n\n  },\n  incorrect_selected:{\n    // underlayColor:\"#00FF00\",\n    backgroundColor: \"red\",\n  },\n  correct_selected:{\n    backgroundColor: \"limegreen\",\n  },\n  match_container:{\n    display: 'flex',\n    flexDirection: 'row',\n    borderBottomWidth: 1,\n    borderColor: 'gray',\n\n  },\n  match: {\n    flex: 1,\n    flexWrap: 'wrap',\n    // justifySelf: 'stretch',\n    padding: 3,\n    textIndent:5,\n    fontSize: 15,\n    backgroundColor: \"'rgba(252,252,252,1.0)'\",\n\n  },\n  selected_match:{\n    backgroundColor: \"#b3e8ff\",\n  },\n})\n\n// function no_op(){\n// \tvoid 0;\n// }\n\nSkillPanel.propTypes = {\n  collapsedHeight: PropTypes.object,\n  select_callback: PropTypes.func,\n}\n\nSkillPanel.defaultProps = {\n  collapsedHeight: {\"how\": 40,\n\t\t\t\t\t\"where\": 90,\n\t\t\t\t\t\"when\": 90,\n\t\t\t\t\t\"which\": 40,\n\t\t\t\t\t},\n   //\"darkorchid\", \"#feb201\",   \"#ff884d\", \"#52d0e0\", \"#e44161\",  \"#2f85ee\", \"#562ac6\", \"#cc24cc\"\n   where_colors: [  \"darkorchid\",  \"#ff884d\",  \"#52d0e0\", \"#feb201\",  \"#e44161\", \"#ed3eea\", \"#2f85ee\",  \"#562ac6\", \"#cc24cc\"],\n   select_callback: () => {}\n}\n\nexport default SkillPanel;\n\n\n\n            /*<ScrollView >\n            \n                <SectionList \n                  sections={this.props.sections}\n\n                  renderSectionHeader={({section}) =>\n                  <TouchableHighlight underlayColor=\"#f1f1f1\" >\n                   <Text style={liststyles.sectionHeader}>{section.title}</Text>\n                  </TouchableHighlight>\n                  }\n                  renderItem={({item}) => \n                  <TouchableHighlight underlayColor=\"#f1f1f1\"\n                    onPress={this.props.clicky_callback}>\n                   <Text style={liststyles.item}>{item}</Text>\n                  </TouchableHighlight>\n                  }\n\n                  keyExtractor={(item, index) => index}\n                />\n            \n            </ScrollView>*/","import React, { Component } from 'react'\nimport {StyleSheet,Text,View,Image,TouchableHighlight,Animated} from 'react-native'; //Step 1\n\nclass Panel extends Component{\n    constructor(props){\n        super(props);\n\n        this.icons = {     //Step 2\n            'up'    : require('./images/Arrowhead-01-128.png'),\n            'down'  : require('./images/Arrowhead-Down-01-128.png')\n        };\n\n        this.state = {       //Step 3\n            title       : props.title,\n            expanded    : false,\n            expandable  : true,\n            animation   : new Animated.Value(props.collapsedHeight)\n        };\n    }\n\n    _setMaxHeight(event){\n        // console.log(\"maxheight\",event.nativeEvent.layout.height)\n        this.setState({\n            maxHeight   : event.nativeEvent.layout.height,\n            expandable  : event.nativeEvent.layout.height > this.props.collapsedHeight\n        });\n\n    }\n\n    _setMinHeight(event){\n        \n        // console.log(\"minheight\",minHeight,this.props.collapsedHeight)\n        this.setState({\n            minHeight   : event.nativeEvent.layout.height\n        });\n    }\n\n    toggle(){\n        //Step 1\n        // let initialValue, finalValue\n\n        let expandedHeight = Math.max(this.state.maxHeight + this.state.minHeight,this.props.collapsedHeight);\n        let collapsedHeight = Math.max(this.state.minHeight,this.props.collapsedHeight);\n        \n        let initialValue    = this.state.expanded? expandedHeight:collapsedHeight,\n            finalValue      = this.state.expanded? collapsedHeight:expandedHeight;\n        // console.log(finalValue)\n        this.setState({\n            expanded : !this.state.expanded  //Step 2\n        });\n\n        this.state.animation.setValue(initialValue);  //Step 3\n        Animated.timing(     //Step 4\n            this.state.animation,\n            {\n                toValue: finalValue,\n                duration: 50\n            }\n        ).start();  //Step 5\n    }\n\n\n    render(){\n        let icon = this.icons['down'];\n\n        if(this.state.expanded){\n            icon = this.icons['up'];   //Step 4\n        }\n\n        //Step 5\n        return ( \n            <Animated.View\n                style={[styles.container,{height: this.state.animation}]}>\n                <TouchableHighlight \n                    underlayColor=\"#f1f1f1\"\n                    onLayout={this._setMinHeight.bind(this)}\n                    onPress={this.state.expandable ? this.toggle.bind(this):null}> \n                    <View style={styles.titleContainer}>\n                        \n                        <Text style={styles.title}> {this.props.title} </Text> \n\n                    { this.state.expandable &&\n                        <Image\n                            style={styles.buttonImage}\n                            source={icon}\n                        ></Image>\n                    }\n                        \n                    </View>\n                </TouchableHighlight>\n                \n                <View style={styles.body} onLayout={this._setMaxHeight.bind(this)}> \n                    {this.props.children}\n                </View>\n\n            </Animated.View>\n        );\n    }\n}\n\n\nvar styles = StyleSheet.create({\n    container   : {\n        backgroundColor: '#fff',\n        margin:2,\n        overflow:'hidden'\n    },\n    titleContainer : {\n        flexDirection: 'row'\n    },\n    title       : {\n        flex    : 1,\n        padding : 2,\n        color   :'#2a2f43',\n        fontWeight:'bold'\n    },\n    button      : {\n\n    },\n    buttonImage : {\n        width   : 30,\n        height  : 25\n    },\n    body        : {\n        padding     : 5,\n        paddingTop  : 0,\n        paddingBottom  : 20,\n\n    }\n});\n\nexport default Panel;","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { TouchableHighlight,ScrollView,View, Text, StyleSheet } from \"react-native\";\nimport Panel from './panel.js'\nvar deep_equal = require('fast-deep-equal');\n\n\n// import { useMachine } from '@xstate/react';\n\n\nvar text_by_mode = {\"choose_foci\": \"Select any interface elements that were used to compute this result.\",\n                    \"set_start\": \"Set the start state.\",\n                    \"press_next\": \"Press next to continue.\",\n                    \"demonstrate\" : \"Demonstrate the next step.\"\n                    }\n\n// function gen_query_text(){\n//   let h = <Text style={{\"color\":\"darkorchid\",'textShadowRadius':3, 'textShadowColor': \"darkorchid\"}}>{\"highlighted\"}</Text>\n//   return [\"Or specify if the \", h ,\" input is correct for the next step.\"]\n// }\nvar h = <Text style={{\"color\":\"darkorchid\",'textShadowRadius':3, 'textShadowColor': \"darkorchid\"}}>{\"highlighted\"}</Text>\nvar query_text = [\"Or specify if the \", h ,\" input is correct for the next step.\"]\n\n\nclass Buttons extends Component{\n  constructor(props){\n        super(props);\n        \n        // props.mode = \"feedback\"\n        // props.yes_no = false\n        // props.current\n  }\n\n  // componentDidMount() {\n  //   this.service.start();\n  // }\n\n  // componentWillUnmount() {\n  //   this.service.stop();\n  // }\n\n\n\trender(){ \n    // const current = this.props.interactions_state || {\"value\" : \"\"};\n    // const current = this.props.interactions_state || {\"value\" : \"\"};\n    // var service = this.props.interactions_service\n    var current = this.props.interactions_state\n    // console.log(\"CURRENT_MCGIGGER\",this.props.interactions_state)\n    const matches = (x) => current && current.matches ? current.matches(x) : deep_equal(x , {\"Waiting_User_Feedback\":\"Waiting_Yes_No_Feedback\"});\n    console.log(\"props\",this.props)\n    // const matches = (x) => current.matches(x)\n    const send  = (action_str) => {\n      console.log(action_str)\n      console.log(this.props.callbacks)\n      if(this.props.callbacks && action_str in this.props.callbacks){\n        this.props.callbacks[action_str]();\n      }\n      this.props.interactions_service.send(action_str);\n    }\n\n\t\treturn (\n          <View style={styles.container}>\n            <View style={styles.button_wrapper1}>\n              <Text style={styles.prompt1}> \n              {matches(\"Setting_Start_State\") &&\n               \"Set the start state.\"}\n              {(matches(\"Waiting_User_Feedback\")  || matches({\"Waiting_User_Feedback\":\"Waiting_Yes_No_Feedback\"})) &&\n               \"Demonstrate the next step.\"}\n              {matches(\"Explantions_Displayed\") &&\n               \"Press next to continue. Or demonstrate the next step.\"}\n              {matches(\"Waiting_Select_Foci\") &&\n               \"Select any interface elements that were used to compute this result.\"}\n              {matches(\"Waiting_User_Attempt\") &&\n               \"TUTOR MODE\"}\n              \n              </Text>\n\n              {matches(\"Waiting_Select_Foci\") &&\n              <TouchableHighlight style={styles.next_button} underlayColor=\"#CCCCCC\"\n                                onPress={() => send('FOCI_DONE')}>\n               <Text style={styles.next_button_text}>{\"Next\"}</Text>\n              </TouchableHighlight>\n              } \n\n              {matches(\"Explantions_Displayed\") &&\n              <TouchableHighlight style={styles.next_button} underlayColor=\"#CCCCCC\"\n                                onPress={() => send('NEXT_PRESSED')}>\n               <Text style={styles.next_button_text}>{\"Next\"}</Text>\n              </TouchableHighlight>\n              }\n\n              {matches(\"Setting_Start_State\") &&\n              <TouchableHighlight style={styles.startstate_button} underlayColor=\"#CCCCCC\"\n                                onPress={ ()=> send(\"START_STATE_SET\")}>\n               <Text style={styles.startstate_button_text}>{\"Start State Done\"}</Text>\n              </TouchableHighlight>\n              }\n            </View>\n\n            \n            {(matches({\"Waiting_User_Feedback\":\"Waiting_Yes_No_Feedback\"})\n             || matches({\"Waiting_User_Feedback\":\"Waiting_Submit_Feedback\"})) &&\n\n            <View style={styles.button_wrapper2}>\n              <Text style={styles.prompt2}> \n              {matches({\"Waiting_User_Feedback\":\"Waiting_Yes_No_Feedback\"}) && query_text}\n              {matches({\"Waiting_User_Feedback\":\"Waiting_Submit_Feedback\"}) &&\n                \"Or press submit to send the feedback from the skill panel.\"}\n              </Text>\n              {matches({\"Waiting_User_Feedback\":\"Waiting_Yes_No_Feedback\"}) &&\n              <View style={styles.yes_no}>\n                <TouchableHighlight style={styles.yes_button} underlayColor=\"#CCCCCC\" \n                                  onPress={() => send('YES_PRESSED')}>\n                 <Text style={styles.yes_button_text}>{\"YES\"}</Text>\n                </TouchableHighlight>\n                <TouchableHighlight style={styles.no_button} underlayColor=\"#CCCCCC\" \n                                  onPress={() => send('NO_PRESSED')}>\n                 <Text style={styles.no_button_text}>{\"NO\"}</Text>\n                </TouchableHighlight>\n              </View>\n              }\n              {matches({\"Waiting_User_Feedback\":\"Waiting_Submit_Feedback\"}) &&\n                <TouchableHighlight style={styles.submit_button} underlayColor=\"#CCCCCC\" \n                                  onPress={() => send('SUBMIT_SKILL_FEEDBACK')}>\n                 <Text style={styles.submit_button_text}>{\"Submit\"}</Text>\n                </TouchableHighlight>\n              }\n            </View>\n            }\n            \n            {!this.props.debugmode && \n            \n            <View style={styles.button_wrapper3}>\n              {/*<TouchableHighlight style={styles.nools_button} underlayColor=\"#CCCCCC\" \n                                  onPress={() => send(\"GEN_NOOLS\")}>\n               <Text style={styles.nools_button_text}>{\"Generate Nools\"}</Text>\n              </TouchableHighlight>\n            */}\n              <TouchableHighlight style={styles.nools_button} underlayColor=\"#CCCCCC\" \n                                  onPress={() => this.props.app.changeInteractionMode({tutor_mode:!this.props.tutor_mode})}>\n               <Text style={styles.nools_button_text}>{(!this.props.tutor_mode && \"Tutor Mode\") || \"Train Mode\"}</Text>\n              </TouchableHighlight>\n              <TouchableHighlight style={styles.nools_button} underlayColor=\"#CCCCCC\" \n                                  onPress={()=>this.props.app.generateBehaviorProfile()}>\n               <Text style={styles.nools_button_text}>{\"Gen bProfile\"}</Text>\n              </TouchableHighlight>\n\n            </View>\n            }\n\n            {this.props.debugmode && \n            <View style={styles.button_wrapper3}>\n              <View style={{display:'absolute',bottom:0,flexDirection:\"row\"}}>\n                <TouchableHighlight style={[styles.yes_button,{height:20}]} underlayColor=\"#CCCCCC\"\n                      onPress={() => send('DEMONSTRATE')}>\n                     <Text style={{fontSize : 10}}>{\"Demonstrate\"}</Text>\n                </TouchableHighlight>\n                <TouchableHighlight style={[styles.yes_button,{height:20}]} underlayColor=\"#CCCCCC\" onPress={ ()=>{}}\n                      onPress={() => send('DONE')}>\n                     <Text style={{fontSize : 10}}>{\"Done\"}</Text>\n                </TouchableHighlight>\n                <TouchableHighlight style={[styles.yes_button,{height:20}]} underlayColor=\"#CCCCCC\" onPress={ ()=>{}}\n                      onPress={() => send('APPLICABLE_SKILLS_RECIEVED')}>\n                     <Text style={{fontSize : 10}}>{\"Req recieved\"}</Text>\n                </TouchableHighlight>                \n              </View>\n            </View>\n          }\n        </View>\n\t\t  );\n\t}\n\n}\n\nconst styles = StyleSheet.create({\n\n  \"container\": {\n    flex : 1,\n    flexDirection : \"column\",\n    // justifyContent: \"spaceBetween\",\n    // marginBottom : 40\n    // display: \"flex\",\n    // flexWrap: \"wrap\",\n    // \"height\" : \"100%\",\n  },\n\n  \"prompt1\" : {\n    fontSize: 20,\n    \"textAlign\":\"center\",\n    // marginBottom : 20,\n    margin : 3,\n    flexWrap: \"wrap\",\n  },\n\n  \"prompt2\" : {\n    fontSize: 20,\n    \"textAlign\":\"center\",\n    margin : 7,\n    marginTop : 25,\n    marginBottom : 12,\n    flexWrap: \"wrap\",\n  },\n\n  \"button_wrapper1\":{\n    display:\"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n\n    // flexBasis : \"40%\",\n    // \"pointerEvents\": \"none\",\n\n  },\n\n  \"button_wrapper2\":{\n    // justifyContent: \"spaceBetween\",\n    display:\"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    // flexBasis : \"40%\",\n    flexShrink: 1,\n    // marginBottom : 70,\n    // \"pointerEvents\": \"none\",\n\n  },\n\n  \"button_wrapper3\":{\n\n    display:\"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-around\",\n\n    // position: \"absolute\",\n    // bottom: 5,\n    padding: 5,\n\n    \n    // alignItems: \"center\",\n    // flexBasis : \"20%\",\n    marginTop: \"auto\",\n    // marginBottom: \"auto\",\n    \n    \n    // justifySelf: \"flex-end\",\n    // \"pointerEvents\": \"none\",\n\n  },\n\n  \"yes_no\":{\n\n    display:\"flex\",\n    flexDirection: \"row\",\n    // justifyContent: \"space-between\"\n    // marginVertical: 10\n\n  },\n\n  \"nools_button\" : {\n    // position: \"absolute\",\n    // bottom: 5,\n    padding: 5,\n    // \"top\":100,\n    \"width\":100,\n    \"backgroundColor\": \"#999999\",\n    // justifySelf: \"bottom\",\n    borderRadius: 5,\n    \n  },\n\n  \"nools_button_text\" : {\n    // \"fontSize\":18,\n    \"textAlign\":\"center\",\n\n  },\n\n  \"startstate_button\" : {\n    \"position\": \"relative\",\n    \"width\":200,\n    // \"fontSize\":18,\n    \"backgroundColor\": \"#4CAF50\",\n     borderRadius: 5,\n     padding: 5,\n    // \"pointerEvents\": auto;\n  },\n  \"startstate_button_text\" : {\n    \"fontSize\":20,\n    \"textAlign\":\"center\",\n  },\n\n  \"yes_button\" :{\n    \"width\":80,\n    \"backgroundColor\": \"#4CAF50\",\n    borderRadius: 6,\n    margin: 8,\n    padding: 4,\n    // \"pointerEvents\": auto;\n  },\n  \"yes_button_text\" : {\n    \"fontSize\":30,\n    \"textAlign\":\"center\",\n  },\n\n   \"no_button\" :{\n    \"width\":80,\n    \"backgroundColor\": \"#f44336\",\n    borderRadius: 6,\n    margin: 8,\n    padding: 4,\n    // \"pointerEvents\": auto;\n  },\n\n  \"no_button_text\" : {\n    \"fontSize\":30,\n    \"textAlign\":\"center\",\n  },\n\n  \"next_button\" : {\n    // display: \"relative\",\n    // bottom: 0,\n    width:100,\n    backgroundColor: \"#4CAFFF\",\n    borderRadius: 6,\n    margin: 10,\n    padding: 5,\n    // \"pointerEvents\": auto;\n  },\n\n  \"next_button_text\" : {\n    \"fontSize\":35,\n    \"textAlign\":\"center\",\n  },\n\n  \"submit_button\" : {\n    // display: \"relative\",\n    // bottom: 0,\n    width:150,\n    backgroundColor: \"#4CAFFF\",\n    borderRadius: 6,\n    margin: 10,\n    padding: 5,\n    // \"pointerEvents\": auto;\n  },\n\n  \"submit_button_text\" : {\n    \"fontSize\":30,\n    \"textAlign\":\"center\",\n  },\n\n  \"prompt_text\" :{\n    /*display:flex;*/\n    \"textAlign\":\"center\",\n    \"fontSize\":25,\n\n  }, \n\n});\n\n\nexport default Buttons;\n","import c_BezierFit from './build/js_glue';\n\n\nclass BezierFit {\n  constructor(max_stroke_length = 512){\n    this.promise = c_BezierFit().then((Module)=> {\n      console.log(\"Module\", Module); \n\n      var HEAPF64 = Module.HEAPF64;\n      var HEAP32  = Module.HEAP32;\n\n      \n      this.input_ptr = Module._malloc((max_stroke_length * 2)  * \n                           HEAPF64.BYTES_PER_ELEMENT);\n      const input_ptr = this.input_ptr\n\n      \n      this.output_ptr = Module._malloc((max_stroke_length * 2)  * \n                           HEAPF64.BYTES_PER_ELEMENT);\n      const output_ptr = this.output_ptr\n\n      \n      this.ml_ptr = Module._malloc((max_stroke_length * 9)  * \n                           HEAPF64.BYTES_PER_ELEMENT);\n      const ml_ptr = this.ml_ptr\n\n      const input_buffer = new Float64Array(HEAPF64.buffer, input_ptr, max_stroke_length * 2)\n      const output_buffer = new Float64Array(HEAPF64.buffer, output_ptr, max_stroke_length * 2)\n      const ml_buffer = new Float64Array(HEAPF64.buffer, ml_ptr, max_stroke_length * 9)\n\n\n      this.c_module = Module\n      this.fitCurve = (points,error=6.0) => {\n        points = points.flat()\n        var nPts = points.length / 2\n        input_buffer.set(points.flat())\n        var n_curves = Module._c_FitCurve(input_ptr,nPts,error*error,output_ptr)\n        Module._c_ML_EncodeCurves(output_ptr,n_curves,ml_ptr);\n        // Module._c_InflectionPoints(input_ptr,nPts)\n        var out = []\n        var it = output_buffer.entries()\n        const nxt = () => Math.round(it.next().value[1])\n        for (var i=0; i < n_curves; i++){\n          out[i] = [nxt(),nxt(),nxt(),nxt(),nxt(),nxt(),nxt(),nxt()]\n          // console.log(\"Bezier: \", i, out[i])\n        }\n        return out;\n      }\n\n      this.fitCurveFeatures = (points,error=6.0) => {\n        points = points.flat()\n        var nPts = points.length / 2\n        input_buffer.set(points.flat())\n        var n_curves = Module._c_FitCurve(input_ptr,nPts,error*error,output_ptr)\n        Module._c_ML_EncodeCurves(output_ptr,n_curves,ml_ptr);\n        // Module._c_InflectionPoints(input_ptr,nPts)\n        var out = []\n        var it = ml_buffer.entries()\n        const nxt = () => it.next().value[1]\n        for (var i=0; i < n_curves; i++){\n          out[i] = [nxt(),nxt(),nxt(),nxt(),nxt(),nxt(),nxt(),nxt(),nxt()]\n          // console.log(\"Bezier: \", i, out[i])\n        }\n        return out;\n\n      }\n\n      this.groupStrokes = (strokes) => {\n        strokes = Object.values(strokes)\n        const len_ptr = Module._malloc(strokes.length*HEAP32.BYTES_PER_ELEMENT);\n        const len_buffer = new Int32Array(HEAP32.buffer, len_ptr, strokes.length);\n        // var total = 0;\n        var lens = [];\n        var points = [];\n        for(var i=0;i < strokes.length;i++){\n          var stroke =strokes[i];\n          // total += stroke.points.length;\n          lens.push(stroke.points.length);\n          points = points.concat(stroke.points);\n        } \n        // console.log(points,lens, strokes.length)\n        len_buffer.set(lens);\n        const stroke_ptr = Module._malloc(2*points.length*HEAPF64.BYTES_PER_ELEMENT);\n        const stroke_buffer = new Float64Array(HEAPF64.buffer, stroke_ptr, points.length*2); \n        stroke_buffer.set(points.flat())\n\n        const out_ptr = Module._malloc(2*strokes.length*HEAP32.BYTES_PER_ELEMENT);\n        const out_buffer = new Int32Array(HEAP32.buffer, out_ptr, 2*strokes.length); \n        var nGroups = Module._c_GroupStrokes(stroke_ptr,len_ptr,strokes.length,out_ptr,.1,.5,50.0);\n        // console.log(\"NGRPS\",nGroups,strokes.length)\n        var out = [];\n        var it = out_buffer.entries()\n        const nxt = () => it.next().value[1]\n        for(var i=0;i < nGroups;i++){\n          var L = nxt();\n          var grp = [];\n          for(var j=0;j < L;j++){\n            grp.push(strokes[nxt()].id)\n          }\n          out.push(grp);\n        }\n        // console.log(\"OUT\", out)\n\n        Module._free(stroke_ptr);\n        Module._free(len_ptr);\n        Module._free(out_ptr);\n        return out;\n        // const len_ptr = Module._malloc(2*total*HEAPF64.BYTES_PER_ELEMENT);\n        // input_buffer.set(points.flat())\n        // var n_curves = Module._c_FitCurve(input_ptr,nPts,error*error,output_ptr)\n        // Module._c_ML_EncodeCurves(output_ptr,n_curves,ml_ptr);\n        // Module._c_InflectionPoints(input_ptr,nPts)\n        // var out = []\n        // var it = output_buffer.entries()\n        // const nxt = () => Math.round(it.next().value[1])\n        // for (var i=0; i < n_curves; i++){\n        //   out[i] = [nxt(),nxt(),nxt(),nxt(),nxt(),nxt(),nxt(),nxt()]\n        //   // console.log(\"Bezier: \", i, out[i])\n        // }\n        // console.log(out)\n        // return out\n      }\n    });\n  }\n}\n\nexport default BezierFit;\n// const BezierFit = (function () => {\n//   var promise = new Promise((resolve,reject) => {\n//     var JS_Module = {}\n//     c_BezierFit().then(function(Module) {\n//       console.log(\"Module\", Module); \n\n//       var HEAPF64 = Module.HEAPF64;\n\n//       const input_ptr = Module._malloc(1024 * \n//                            HEAPF64.BYTES_PER_ELEMENT); // 1\n\n//       const output_ptr = Module._malloc(1024 * \n//                            HEAPF64.BYTES_PER_ELEMENT); // 1\n\n//       const input_buffer = new Float64Array(HEAPF64.buffer,input_ptr,1024)\n//       const output_buffer = new Float64Array(HEAPF64.buffer,output_ptr,1024)\n\n//       JS_Module.c_module = Module\n//       JS_Module.FitCurve = (points) => {\n//         input_buffer.set(points)\n//         var n_curves = Module._c_FitCurve(input_ptr,3,4.0,output_ptr)\n//         var out = []\n//         var it = output_buffer.entries()\n//         const nxt = () => it.next().value[1]\n//         for (var i=0; i < n_curves; i++){\n//           out[i] = [nxt(),nxt(),nxt(),nxt(),nxt(),nxt(),nxt(),nxt()]\n//           console.log(\"Bezier: \", i, out[i])\n//         }\n//         console.log(out)\n//         return out\n//       }\n//       // sumUp([1.0, 2.0, 3.0, 4.0, 5.0, 6.0])\n//      resolve(JS_Module)\n//     });\n//   })\n//   return promise\n// });\n// export default BezierFit;","import { Machine, assign, interpret, send } from \"xstate\";\n\n// const sendFeedback = (context,event,explicit=false) => {\n// \tif(event.response_type == \"CORRECT\"){\n// \t\tcontext.network_layer.sendFeedback(context,event,1,explicit)\n// \t}else if(event.response_type == \"INCORRECT\"){\n// \t\tcontext.network_layer.sendFeedback(context,event,-1,explicit)\n// \t}else if(event.response_type == \"NO_RESPONSE\"){\n// \t\tcontext.network_layer.sendFeedback(context,event,0,explicit)\n// \t}\n// }\n\n// const post_next_example = (context,event) => {\n\n// }\n\n// const queryApprentice = () => {};\n// const post_next_example = () => {};\n// const apply_sai = () => {};\n// const queryApprentice = () => {};\n// const queryApprentice = () => {};\n// const queryApprentice = () => {};\n// const queryApprentice = () => {};\n\n// function apply_skill_application(context,event){\n// \tcontext.tutor.apply_skill_application()\n// }\n\n// function apply_next_example(context,event){\n// \tconst tutor = context.tutor\n// \tvar sai = tutor.getDefaultSAI()\n// \tvar data = {state: context.state, reward: 1,...sai}\n// \tcontext.network_layer.sendTrainingData(data)\n\n// }\nconst appendStartHistory = assign({\n  start_state_history: (context, event) => {\n    var state = context.tutor.getState();\n    var history = context.start_state_history || [];\n    history.push(state);\n    return history;\n  }\n});\n\nconst stateRecalc = assign({\n  state: (context, event) => {\n    console.log(\"BLARG\",context.staged_SAI, context.test_mode)\n    if (context.staged_SAI == null || context.staged_SAI.reward > 0 || context.test_mode) {\n      console.log(\"REDO\")\n      return context.tutor.getState();\n    } else {\n      console.log(\"KEEP\")\n      return context.state;\n    }\n  }\n});\n\nconst assignFoci = assign({\n  staged_SAI: (context, event) => {\n    Object.assign(context.staged_SAI, {\n      foci_of_attention: context.tutor.getCurrentFoci()\n    });\n    return context.staged_SAI;\n  }\n});\n\n//CONDITIONS\nfunction saiIsCorrectDone(context, event) {\n  const sai_data = context.staged_SAI;\n  if (context.feedback_map && Object.keys(context.feedback_map).length > 0) {\n    return false;\n  }\n  return (\n    sai_data.selection === \"done\" &&\n    (sai_data.reward == null || sai_data.reward > 0 || context.test_mode)\n  );\n}\n\nfunction forceUseExample(context, event) {\n  const saiData = context.staged_SAI;\n  return (saiData.skipTraining && saiData.reward < 0) || context.examples_only;\n}\n\nfunction isFreeAuthor(context, event) {\n  \n  return context.free_author || false;\n}\n\nfunction checkIsCorrect(context, event) {\n  return event.data > 0;\n}\n\nfunction noApplicableSkills(context, event) {\n  console.log(\"CCCC\", context)\n  return !Object.keys(event.data).length || context.examples_only;\n}\n\nfunction logError(context, event) {\n  console.error(event.data);\n  // alert(\"FAIL\")\n}\n\n// var color_map = {\n// \t\"EXAMPLE\" : \"0;33;44m\",\n// \t\"CORRECT\" : \"0;30;42m\",\n// \t\"INCORRECT\" : \"0;30;41m\",\n// }\n\nfunction _kill_this(context, event) {\n  var nl = context.network_layer;\n  nl.kill_this(event.data.toString());\n}\n\n\n\nfunction clearSkillPanel(context, event) {\n  context.app.setState({\n    skill_panel_props: {\n      skill_set: { \"Applicable Skills\": {} }\n    }\n  });\n}\n\nfunction fillSkillPanel(context, event) {\n  context.app.setState({\n    skill_panel_props: {\n      skill_set: { \"Applicable Skills\": event.data[\"responses\"] || {} }\n    }\n  });\n}\n\nconst recalcFeedbackMap = send((context, event) => {\n  // const promise = new Promise((resolve,reject) => {\n  var skill = event.skill;\n  var match = event.match;\n  var label = event.label;\n\n  let match_id = match[\"_id\"];\n  // console.log(match[\"_id\"])\n  // console.log(this.state.feedback_map)\n  let feedback_map = context.feedback_map || {};\n  let new_label =\n    feedback_map[match_id] && label === feedback_map[match_id] ? null : label;\n\n  let new_feedback_map = { ...feedback_map };\n  if (new_label === null) {\n    delete new_feedback_map[match_id];\n  } else {\n    new_feedback_map[match_id] = new_label;\n  }\n\n  let was_empty = Object.keys(feedback_map).length === 0;\n  let now_empty = Object.keys(new_feedback_map).length === 0;\n\n  return {\n    type: \"FEEBACK_MAP_UPDATE\",\n    feedback_map: new_feedback_map,\n    was_empty: was_empty,\n    now_empty: now_empty\n  };\n  // if(!was_empty && now_empty){\n  //   \tconsole.log(\"EMPTY\")\n  //   \treturn {type: \"SKILL_PANEL_FEEDBACK_EMPTY\"}\n  // }else if(was_empty && !now_empty){\n  //   \tconsole.log(\"NOT EMPTY\")\n  //   \treturn {type :\"SKILL_PANEL_FEEDBACK_NONEMPTY\"}\n  // }\n  // return undefined\n  // });\n  // return promise;\n});\n\nconst assignFeedbackMap = assign({\n  feedback_map: (context, event) => {\n    if (context.skill_panel.updateFeedbackMap) {\n      context.skill_panel.updateFeedbackMap(event.feedback_map);\n    }\n    if (context.tutor.updateFeedbackMap) {\n      context.tutor.updateFeedbackMap(event.feedback_map);\n    }\n    return event.feedback_map;\n  }\n});\n\nconst toggleFeedbackStyle = send((context, event) => {\n  if (!event.was_empty && event.now_empty) {\n    console.log(\"EMPTY\");\n    return { type: \"SKILL_PANEL_FEEDBACK_EMPTY\" };\n  } else if (event.was_empty && !event.now_empty) {\n    console.log(\"NOT EMPTY\");\n    return { type: \"SKILL_PANEL_FEEDBACK_NONEMPTY\" };\n  }\n  return { type: \"\" };\n});\n\n// skill_set={skill_set}\n//\t\t\t\t\t\tselect_callback={select_callback}\n//\t\t\t\t\t\tcorrectness_callback={correctness_callback}\n//\t\t\t\t\t\t\tinitial_select={initial_select}\n//\t\t\t\t\t\t\twhere_colors={where_colors || undefined}\n//\t\t\t\t\t\t\t\tcurrent = {window.state_machine}\n//\t\t\t\t\t\t\t\tservice = {window.state_machine_service}\n\nfunction get_machine_actions(app) {\n  var tutor = app.tutor.current;\n  var skill_panel = app.skill_panel.current;\n  var buttons = app.network_layer.current;\n  var network_layer = app.network_layer;\n\n  return {\n    services: {\n      sendFeedback: (context, event) => {\n        if (context.staged_SAI.skipTraining || context.test_mode) {\n          return Promise.resolve(true);\n        }\n        return network_layer.sendFeedback(context, event);\n      },\n      //TODO: is this depricated?\n      sendFeedbackExplicit: (context, event) =>\n        network_layer.sendFeedbackExplicit(context, event),\n      applyNextExample: tutor.applyNextExample,\n      attemptStagedSAI: tutor.attemptStagedSAI,\n      queryApprentice: network_layer.queryApprentice,\n      checkApprentice: network_layer.checkApprentice,\n      finalizeStartState:  (context, event) => {\n        console.log(\"Start finalizeStartState\")\n        tutor.exitSetStartStateMode(context, event)\n        return Promise.resolve(true);\n      }\n    },\n    actions: {\n      logError: logError,\n\n      stateRecalc: stateRecalc,\n      assignResponse: assign({ response: (context, event) => event.data }),\n      assignStagedSAI: assign({ staged_SAI: (context, event) => event.data }),\n      assignExample: assign({ action_type: (context, event) => \"EXAMPLE\" }),\n      assignAttempt: assign({ action_type: (context, event) => \"ATTEMPT\" }),\n      assignCorrect: assign({\n        staged_SAI: (context, event) => {\n          return { ...context.staged_SAI, ...{ reward: 1 } };\n        }\n      }),\n      assignIncorrect: assign({\n        staged_SAI: (context, event) => {\n          return { ...context.staged_SAI, ...{ reward: -1 } };\n        }\n      }),\n      assignFoci: assignFoci,\n      clearFeedbackData: assign((context, event) => {\n        return {\n          reward: null,\n          // \"rewards\" : null,\n          staged_SAI: null,\n          skill_applications: null,\n          feedback_map: null\n        };\n      }),\n      assignSkillApplications: assign({\n        skill_applications: (context, event) =>\n          event.data.responses || event.data.skill_applications\n      }),\n      // done : window.signal_done,\n\n      \n      kill_this: _kill_this,\n      printEvent: (context, event) => {\n        console.log(\"P_EVT:\", event);\n      },\n\n      fillSkillPanel: fillSkillPanel,\n      clearSkillPanel: clearSkillPanel,\n      done: (context, event) => {\n        context.app.training_service.send(\"PROBLEM_DONE\");\n      },\n\n\n      enterSetStartStateMode: tutor.enterSetStartStateMode,\n      exitSetStartStateMode: tutor.exitSetStartStateMode,\n      enterFeedbackMode: tutor.enterFeedbackMode,\n      exitFeedbackMode: tutor.exitFeedbackMode,\n      enterFociMode: tutor.enterFociMode,\n      exitFociMode: tutor.exitFociMode,\n      enterTutoringMode: tutor.enterTutoringMode,\n      exitTutoringMode: tutor.exitTutoringMode,\n      displayCorrectness: tutor.displayCorrectness,\n      printFeedback: tutor.printFeedback,\n      \n      applyStagedSAI: (context, event) => {\n        tutor.applySAI(context.staged_SAI);\n      },\n      proposeSAI: (context, event) => tutor.proposeSAI(event.data),\n      confirmProposedSAI: (context, event) => {\n        tutor.confirmProposedSAI();\n      },\n      clearProposedSAI: (context, event) => {\n        tutor.clearProposedSAI();\n      },\n\n      recalcFeedbackMap: recalcFeedbackMap,\n      assignFeedbackMap: assignFeedbackMap,\n      toggleFeedbackStyle: toggleFeedbackStyle,\n\n      generate_nools: network_layer.generate_nools,\n      appendStartHistory: appendStartHistory\n    },\n    guards: {\n      saiIsCorrectDone: saiIsCorrectDone,\n      forceUseExample: forceUseExample,\n      noApplicableSkills: noApplicableSkills,\n      isFreeAuthor: isFreeAuthor,\n      checkIsCorrect: checkIsCorrect\n    }\n  };\n}\n\nexport function build_interactions_sm(\n  app,\n  inh_context,\n) {\n  var context = {\n    app: app,\n    tutor: app.tutor.current,\n    skill_panel: app.skill_panel.current,\n    buttons: app.buttons.current,\n    network_layer: app.network_layer,\n\n    //Dynamic\n    // last_correct : null,\n    staged_SAI: null,\n    action_type: null\n  };\n  context = {...context, ...inh_context}\n\n  var sm;\n  if (context.tutor_mode) {\n    sm = tutor_sm;\n  } else {\n    sm = context.interactive ? interactive_sm : non_interactive_sm;\n  }\n\n  const interaction_sm = Machine(\n    { ...{ context: context }, ...sm },\n    get_machine_actions(app)\n  );\n  return interaction_sm;\n}\n\n// ------------------------------- NON INTERACTIVE ----------------------------\n\nvar non_interactive_sm = {\n  initial: \"Start\",\n  states: {\n    Start: {\n      entry: \"stateRecalc\",\n      on: {\n        \"\": \"Querying_Apprentice\"\n      }\n    },\n    Querying_Apprentice: {\n      invoke: {\n        id: \"queryApprentice\",\n        src: \"queryApprentice\",\n        onDone: [\n          { target: \"Applying_Next_Example\", cond: \"noApplicableSkills\" },\n          { target: \"Applying_Staged_SAI\", actions: [\"assignStagedSAI\"] }\n        ],\n        onError: \"Fail\"\n      },\n      exit: \"assignResponse\"\n    },\n    Applying_Staged_SAI: {\n      invoke: {\n        id: \"attemptStagedSAI\",\n        src: \"attemptStagedSAI\",\n        onDone: {\n          target: \"Sending_Feedback\",\n          actions: [\"assignStagedSAI\", \"assignAttempt\"]\n        },\n        onError: \"Fail\"\n      }\n    },\n\n    Applying_Next_Example: {\n      invoke: {\n        id: \"applyNextExample\",\n        src: \"applyNextExample\",\n        onDone: {\n          target: \"Sending_Feedback\",\n          actions: [\"assignStagedSAI\", \"assignExample\"]\n        },\n        onError: \"Fail\"\n      }\n    },\n\n    Sending_Feedback: {\n      entry: \"printFeedback\",\n      invoke: {\n        id: \"sendFeedback\",\n        src: \"sendFeedback\",\n        onDone: [\n          { target: \"Done\", cond: \"saiIsCorrectDone\" },\n          { target: \"Applying_Next_Example\", cond: \"forceUseExample\" },\n          { target: \"Querying_Apprentice\" }\n        ],\n        onError: \"Fail\"\n      },\n      exit: [\"stateRecalc\", \"assignResponse\", \"clearFeedbackData\"]\n    },\n    Done: {\n      type: \"final\",\n      entry: \"done\"\n    },\n    Fail: {\n      entry: [\"logError\", \"kill_this\"]\n    }\n  }\n};\n\n// ------------------------------- INTERACTIVE ----------------------------\n\nvar interactive_sm = {\n  id: \"interactive\",\n  initial: \"Start\",\n  states: {\n    Start: {\n      entry: \"stateRecalc\",\n      on: {\n        \"\": [\n          { target: \"Setting_Start_State\", cond: \"isFreeAuthor\" },\n          { target: \"Querying_Apprentice\" }\n        ]\n      }\n    },\n    Setting_Start_State: {\n      entry: \"enterSetStartStateMode\",\n      on: {\n        START_STATE_SET: {\n          target: \"Finalizing_Start_State\",\n          actions: [\"appendStartHistory\"]\n        }\n      },\n      // exit: [\"exitSetStartStateMode\"]\n    },\n    Finalizing_Start_State: {\n      invoke :{\n        id: \"finalizeStartState\",\n        src: \"finalizeStartState\",\n        onDone: {\n          target : \"Querying_Apprentice\"\n        }      \n      },\n      exit : \"stateRecalc\"\n    },\n    Querying_Apprentice: {\n      invoke: {\n        id: \"queryApprentice\",\n        src: \"queryApprentice\",\n        onDone: [\n          {\n            target: \"Waiting_User_Feedback.Waiting_Demonstrate_Only\",\n            cond: \"noApplicableSkills\",\n            actions: [\"fillSkillPanel\"]\n          },\n          {\n            target: \"Waiting_User_Feedback.Waiting_Yes_No_Feedback\",\n            actions: [\"fillSkillPanel\", \"proposeSAI\", \"assignStagedSAI\"]\n          }\n        ],\n        onError: \"Fail\"\n      },\n      exit: \"assignSkillApplications\"\n    },\n    Waiting_User_Feedback: {\n      entry: \"enterFeedbackMode\",\n      //\n      initial: \"Waiting_Demonstrate_Only\",\n      states: {\n        Waiting_Demonstrate_Only: {},\n        Waiting_Yes_No_Feedback: {\n          on: {\n            SKILL_PANEL_FEEDBACK_NONEMPTY: \"Waiting_Submit_Feedback\",\n            // \"YES_PRESSED\" : {target : \"#interactive.Sending_Feedback\",\n            YES_PRESSED: {\n              target: \"#interactive.Sending_Feedback\",\n              actions: [\"assignCorrect\", \"assignAttempt\", \"confirmProposedSAI\"]\n            },\n            NO_PRESSED: {\n              target: \"#interactive.Sending_Feedback\",\n              actions: [\"assignIncorrect\", \"assignAttempt\", \"clearProposedSAI\"]\n            }\n          }\n        },\n        Waiting_Submit_Feedback: {\n          on: {\n            SKILL_PANEL_FEEDBACK_EMPTY: \"Waiting_Yes_No_Feedback\",\n            SUBMIT_SKILL_FEEDBACK: {\n              target: \"#interactive.Sending_Feedback\",\n              actions: [\"clearProposedSAI\"]\n            }\n          }\n        }\n      },\n      //\n      on: {\n        STAGE_SAI: { actions: [\"assignStagedSAI\", \"proposeSAI\"] },\n        //\n        TOGGLE_FEEDBACK: { actions: \"recalcFeedbackMap\" }, //, onDone:{actions :\"callSend\"}, onError: 'Fail'}},\n        FEEBACK_MAP_UPDATE: {\n          actions: [\"assignFeedbackMap\", \"toggleFeedbackStyle\"]\n        }, //, onDone:{actions :\"callSend\"}, onError: 'Fail'}},\n        //\n        DEMONSTRATE: {\n          target: \"Waiting_Select_Foci\",\n          actions: [\n            \"assignStagedSAI\",\n            \"assignExample\",\n            \"printEvent\",\n            \"clearProposedSAI\"\n          ]\n        },\n        GEN_NOOLS: { actions: [\"generate_nools\"] }\n      },\n\n      exit: [\"exitFeedbackMode\"]\n    },\n    // \"Applying_Staged_SAI\" : {\n    // \tinvoke : {\n    //         id: \"attemptStagedSAI\",\n    //         src: \"attemptStagedSAI\",\n    //         onDone: \"Sending_Feedback\",\n    //         onError: 'Fail',\n    // \t},\n    // },\n    Waiting_Select_Foci: {\n      entry: \"enterFociMode\",\n      on: {\n        \"\": {\n          target: \"Sending_Feedback\",\n          actions: \"assignFoci\",\n          cond: \"saiIsCorrectDone\"\n        },\n        FOCI_DONE: { target: \"Sending_Feedback\", actions: \"assignFoci\" }\n      },\n      exit: \"exitFociMode\"\n    },\n    Sending_Feedback: {\n      entry: [\"printFeedback\"],\n      invoke: {\n        id: \"sendFeedback\",\n        src: \"sendFeedback\",\n        onDone: [\n          // {target: \"Setting_Start_State\", cond : },\n          { target: \"Done\", cond: \"saiIsCorrectDone\" },\n          // { target: \"Applying_Next_Example\", cond: \"forceUseExample\" },\n          { target: \"Querying_Apprentice\" }\n        ],\n        onError: \"Fail\"\n      },\n      exit: [\"stateRecalc\", \"assignResponse\", \"clearFeedbackData\"]\n    },\n    // Sending_Feedback_Explicit : {\n    // \tentry : 'printFeedback',\n    // \tinvoke : {\n    //         id: \"sendFeedbackExplicit\",\n    //         src: \"sendFeedbackExplicit\",\n    //         onDone: [\n    // \t        // {target: \"Setting_Start_State\", cond : },\n    // \t        // {target: \"Done\", cond : \"saiIsCorrectDone\"},\n    // \t        {target: \"Querying_Apprentice\"},\n    //         ],\n    //         onError: 'Fail',\n    // \t},\n    // \texit:[\"stateRecalc\",\"assignResponse\",\"clearFeedbackData\"]\n    // },\n    Done: {\n      type: \"final\",\n      entry: [\"clearSkillPanel\", \"done\"]\n      // on : {\n      // \t\"\" : {target  : \"Setting_Start_State\", cond : \"isFreeAuthor\"},\n      // },\n    },\n    Fail: {\n      entry: [\"logError\", \"kill_this\"]\n    }\n  }\n};\n\nconst tutor_sm = {\n  id: \"interactive\",\n  initial: \"Start\",\n  states: {\n    Start: {\n      entry: \"stateRecalc\",\n      on: {\n        \"\": [\n          { target: \"Setting_Start_State\", cond: \"isFreeAuthor\" },\n          { target: \"Waiting_User_Attempt\" }\n        ]\n      }\n    },\n    Setting_Start_State: {\n      entry: \"enterSetStartStateMode\",\n      on: {\n        START_STATE_SET: {\n          target: \"Waiting_User_Attempt\",\n          actions: [\"appendStartHistory\"]\n        }\n      },\n      exit: [\"exitSetStartStateMode\", \"stateRecalc\"]\n    },\n    Waiting_User_Attempt: {\n      entry: [\"enterTutoringMode\", \"stateRecalc\"],\n      on: {\n        ATTEMPT: {\n          target: \"Checking_Against_Apprentice\",\n          actions: \"assignStagedSAI\"\n        }\n      },\n      exit: \"exitTutoringMode\"\n    },\n    Checking_Against_Apprentice: {\n      invoke: {\n        id: \"checkApprentice\",\n        src: \"checkApprentice\",\n        onDone: [\n          {\n            cond: \"saiIsCorrectDone\",\n            target: \"Done\",\n            actions: [\"displayCorrectness\", \"assignCorrect\"]\n          },\n          {\n            cond: \"checkIsCorrect\",\n            target: \"Waiting_User_Attempt\",\n            actions: [\"displayCorrectness\", \"assignCorrect\"]\n          },\n          {\n            target: \"Waiting_User_Attempt\",\n            actions: [\"displayCorrectness\", \"assignIncorrect\"]\n          }\n        ]\n      }\n      // exit : \"stateRecalc\"\n    },\n    Done: {\n      type: \"final\",\n      entry: [\"clearSkillPanel\", \"done\"]\n    }\n  }\n};\n\n// const feedbackStates = {\n// \tinitial: \"Waiting_For_Applicable_Skills\",\n// \tstates: {\n// \t\t\"Waiting_For_Applicable_Skills\" :{\n// \t\t\tentry : ['queryApprentice'],\n// \t\t\ton : {\n// \t\t\t\t\"APPLICABLE_SKILLS_RECIEVED\" : \"Query_Yes_No_Feedback\",\n// \t\t\t\t\"NO_SKILLS_RECIEVED\" : \"No_Query_Feedback\"\n// \t\t\t}\n// \t\t},\n// \t\t\"Waiting_For_Training_Recieved\" :{\n// \t\t\ton : {\n// \t\t\t\t\"TRAINING_RECIEVED\" : \"Waiting_For_Applicable_Skills\",\n// \t\t\t}\n// \t\t},\n// \t\t\"No_Query_Feedback\" : {\n// \t\t\ton : {\n// \t\t\t\t\"SKILL_PANEL_FEEDBACK_NONEMPTY\" : \"Query_Submit_Feedback\"\n// \t\t\t}\n// \t\t},\n// \t\t\"Query_Yes_No_Feedback\" : {\n// \t\t\ton : {\n// \t\t\t\t\"SKILL_PANEL_FEEDBACK_NONEMPTY\" : \"Query_Submit_Feedback\",\n// \t\t\t\t\"YES_PRESSED\" : \"Waiting_For_Training_Recieved\",\n// \t\t\t\t\"NO_PRESSED\" : \"Waiting_For_Training_Recieved\",\n// \t\t\t}\n// \t\t},\n// \t\t\"Query_Submit_Feedback\" : {\n// \t\t\ton : {\n// \t\t\t\t\"SKILL_PANEL_FEEDBACK_EMPTY\" : [\n// \t\t\t\t\t{target : \"Query_Yes_No_Feedback\", },\n// \t\t\t\t\t{target : \"No_Query_Feedback\"}\n// \t\t\t\t],\n// \t\t\t\t\"SUBMIT_SKILL_FEEDBACK\": \"Waiting_For_Training_Recieved\"\n// \t\t\t}\n// \t\t}\n// \t}\n// }\n\n// const ButtonsMachine = Machine({\n//   \"initial\": \"Specify_Start_State\",\n//   \"states\": {\n//   \t\"Specify_Start_State\": {\n//   \t\ton: { \"START_STATE_SET\": \"Query_Demonstrate\" },\n//   \t},\n//     \"Query_Demonstrate\": {\n//       on: { \"DEMONSTRATE\": \"Request_Foci\",\n//        \t\t\"DONE\": \"Specify_Start_State\" },\n\n//       ...feedbackStates\n//     },\n//     \"Request_Foci\": {\n//       on: {\n//         \"FOCI_DONE\": \"Query_Demonstrate\",\n//       },\n//     },\n//     \"Explantions_Displayed\": {\n//       on: {\n//         \"NEXT_PRESSED\": \"Query_Demonstrate\",\n//         \"DEMONSTRATE\": \"Request_Foci\",\n//         \"DONE\": \"Specify_Start_State\"\n//       },\n\n//     },\n//   }\n// },\n// {\n// \tactions: {\n// \t\tqueryApprentice : (context,event) => {\n// \t\t\twindow.queryApprentice()\n// \t\t}\n// \t}\n// }\n// )\n\n// window.new_nonInteractiveMachine = () => {\n// \tvar machine = build_SM_NonInteractive(window.tutor,window.network_layer,window.agent_id)\n// \tvar machine_service = interpret(machine)\n// \tmachine_service.start()\n// \treturn machine_service\n// }\n\n// const load_training_file = () => {};\n// const serve_next_training_set = () => {};\n// const serve_next_agent = () => {};\n// const serve_next_problem = () => {};\n// const runWhenReady = () => {};\n// const query_outerloop = () => {};\n\n// function make_training_handler(){\n// \tconst sm= Machine({\n// \t\tinitial: \"Loading_Training_File\",\n// \t\tstates: {\n// \t\t\tLoading_Training_File: {\n// \t\t\t\tinvoke : {\n// \t\t\t\t\tid: \"load_training_file\",\n// \t\t\t\t\tsrc: \"load_training_file\",\n// \t\t\t\t\tonDone: \"Serving_Training_Sets\",\n// \t\t\t\t\tonError: 'Fail',\n// \t\t\t\t}\n// \t\t\t},\n// \t\t\tServing_Training_Sets: {\n// \t\t\t\tinvoke : {\n// \t\t\t\t\tid: \"serve_next_training_set\",\n// \t\t\t\t\tsrc: \"serve_next_training_set\",\n// \t\t\t\t\tonDone: [{target : \"All_Done\", cond : \"iteratorEmpty\"},\n// \t\t\t\t\t\t\t {target : \"Serving_Agents\"}],\n// \t\t\t\t\tonError: 'Fail',\n// \t\t\t\t\t}\n// \t\t\t},\n// \t\t\tServing_Agents: {\n// \t\t\t\tinvoke : {\n// \t\t\t\t\tid: \"serve_next_agent\",\n// \t\t\t\t\tsrc: \"serve_next_agent\",\n// \t\t\t\t\tonDone: [{target : \"Serving_Training_Sets\", cond : \"iteratorEmpty\"},\n// \t\t\t\t\t\t\t {target : \"Serving_Problems\"}],\n// \t\t\t\t\tonError: 'Fail',\n// \t\t\t\t}\n// \t\t\t},\n// \t\t\tServing_Problems: {\n// \t\t\t\tinvoke : {\n// \t\t\t\t\tid: \"serve_next_problem\",\n// \t\t\t\t\tsrc: \"serve_next_problem\",\n// \t\t\t\t\tonDone: [{target : \"Serving_Agents\", cond : \"iteratorEmpty\"},\n// \t\t\t\t\t\t\t {target : \"Waiting_Problem_Load\"}],\n// \t\t\t\t\tonError: 'Fail',\n// \t\t\t\t}\n// \t\t\t},\n// \t\t\tWaiting_Problem_Load:{\n// \t\t\t\tinvoke : {\n// \t\t\t\t\tid: \"set_problem_src\",\n// \t\t\t\t\tsrc: \"set_problem_src\",\n// \t\t\t\t\tonDone: \"Training\",\n// \t\t\t\t\tonError: 'Fail',\n// \t\t\t\t}\n// \t\t\t},\n\n// \t\t// \"Waiting_For_OuterLoop\": {\n// \t\t// \tentry: query_outerloop,\n// \t\t// \ton: {\"PROBLEM_START_LOAD\": \"Waiting_Problem_Load\"}\n// \t\t// },\n\n// \t\t\tTraining: {\n// \t\t\t\tinvoke : {\n// \t\t\t\t\tid: \"training_state_machine\",\n// \t\t\t\t\tsrc: \"training_state_machine\",\n// \t\t\t\t\tonDone: \"Serving_Problems\",\n// \t\t\t\t\tonError: 'Fail',\n// \t\t\t\t}\n// \t\t\t},\n// \t\t// \"Explantions_Displayed\": {\n// \t\t//   on: {\n// \t\t//     \"NEXT_PRESSED\": \"Query_Demonstrate\",\n// \t\t//     \"DEMONSTRATE\": \"Request_Foci\",\n// \t\t//     \"DONE\": \"Specify_Start_State\"\n// \t\t//   },\n\n// \t\t// },\n// \t\t\tAll_Done : {\n// \t\t\t\ttype : 'final',\n// \t\t\t},\n// \t\t\tFail : {\n// \t\t\t\tentry : [\"logError\",\"kill_this\"]\n// \t\t\t}\n// \t\t}\n// \t})\n// }\n\n// const TrainingJSON_SM= Machine({\n//   \"initial\": \"Loading_Training_File\",\n//   \"states\": {\n//   \t\"Loading_Training_File\": {\n//   \t\tentry: load_training_file,\n//   \t\ton: { \"TRAINING_FILE_LOADED\": \"Serving_Training_Sets\" },\n//   \t},\n//   \t\"All_Done\" : {},\n//     \"Serving_Training_Sets\": {\n//     \tentry: serve_next_training_set,\n//       \ton: { \"TRAINING_SET_LOADED\": \"Serving_Agents\",\n//       \t\t  \"NO_MORE_TRAINING_SETS\" : \"All_Done\"},\n//     },\n//     \"Serving_Agents\": {\n//     \tentry: serve_next_agent,\n//     \ton: {\"AGENT_CREATED\": \"Serving_Problem\",\n//       \t\t \"NO_MORE_AGENTS\" : \"Serving_Training_Sets\"},\n//     },\n//     \"Serving_Problems\": {\n//     \tentry: serve_next_problem,\n//     \ton: {\"PROBLEM_START_LOAD\": \"Waiting_Problem_Load\",\n//     \t\t \"QUERY_OUTERLOOP\": \"Waiting_For_OuterLoop\",\n//       \t\t \"NO_MORE_PROBLEMS\" : \"Serving_Agents\"},\n//     },\n//     \"Waiting_Problem_Load\":{\n//     \tentry: runWhenReady,\n//     \ton: {\"PROBLEM_LOADED\": \"Training\"}\n//     },\n//     \"Waiting_For_OuterLoop\": {\n//     \tentry: query_outerloop,\n//     \ton: {\"PROBLEM_START_LOAD\": \"Waiting_Problem_Load\"}\n//     },\n\n//     \"Training\": {\n//     \ton: {\"PROBLEM_DONE\": \"Serving_Problems\"},\n//     },\n//     \"Explantions_Displayed\": {\n//       on: {\n//         \"NEXT_PRESSED\": \"Query_Demonstrate\",\n//         \"DEMONSTRATE\": \"Request_Foci\",\n//         \"DONE\": \"Specify_Start_State\"\n//       },\n\n//     },\n//   }\n// },\n// {\n// \tactions: {\n// \t\tqueryApprentice : (context,event) => {\n// \t\t\twindow.queryApprentice()\n// \t\t}\n// \t}\n// }\n// )\n\nexport default build_interactions_sm;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport SkillPanel from \"./components/skill_panel\";\nimport Buttons from \"./components/buttons\";\nimport * as serviceWorker from \"./serviceWorker\";\n// import ButtonsMachine from './interactions.js'\n\nimport { interpret } from \"xstate\";\nimport CTAT_Tutor from \"./tutors/CTAT/CTAT_Tutor\";\nimport StylusTutor from './tutors/Stylus/StylusTutor';\nimport App from \"./App\";\nimport RJSON from \"relaxed-json\";\n\n\nconst tutor_map = {\n  ctatttutor: CTAT_Tutor,\n  ctat: CTAT_Tutor,\n  \"stylustutor\" : StylusTutor,\n  \"stylus\" : StylusTutor,\n};\n\n\n\n\nfunction load_training_file(training_file) {\n  // console.log(\"SLOOPERZ\",training_file)\n  return fetch(training_file)\n    .then(str => str.text()) //str.json())\n    .then(str => RJSON.parse(str)); //str.json())\n}\n\nfunction safeParse(json) {\n  var parsed;\n  try {\n    parsed = JSON.parse(json);\n  } catch (e) {\n    parsed = null;\n  }\n  return parsed;\n}\n\nfunction getWebProps() {\n  var urlParams = new URLSearchParams(window.location.search.substring(1));\n  console.log(window.location.search);\n  console.log(urlParams);\n\n  var props = {\n    AL_URL: urlParams.get(\"al_url\"),\n    OUTER_LOOP_URL: urlParams.get(\"outer_loop_url\"),\n    HOST_URL: window.location.origin,\n    training_file: urlParams.get(\"training\"),\n    interactive: safeParse((urlParams.get(\"interactive\") || \"\").toLowerCase()),\n    use_foci: safeParse((urlParams.get(\"use_foci\") || \"\").toLowerCase()),\n    tutor: urlParams.get(\"tutor\"),\n    nools_dir: urlParams.get(\"nools_dir\")\n  };\n\n  console.log(\"PROPS\", props, urlParams.get(\"interactive\"));\n  return props;\n}\n\nfunction removeEmpty(obj) {\n  var out = {};\n  console.log(obj);\n  Object.keys(obj).forEach(key => {\n    console.log(key);\n    if (obj[key] != null) {\n      out[key] = obj[key];\n    }\n  });\n  return out;\n}\n\nvar props = getWebProps();\n\nprops.training_file = props.training_file || \"/stylus_author.json\";\n// console.log(\"WEE\", props.training_file)\n\nload_training_file(props.training_file).then(function(training_json) {\n  // console.log(\"BOOPERSZ\", training_json)\n  var training_file_props = training_json.set_params;\n  props = { ...training_file_props, ...removeEmpty(props) };\n  props.tutor = (props.tutor || \"ctat\").toLowerCase().replace(\"_\", \"\");\n  return props\n}).then(function(props){\n  var tutorClass = tutor_map[props.tutor] || CTAT_Tutor\n  console.log(\"TC\", tutorClass, props.tutor)\n  ////EVENTUALLY WILL WANT OT DYNAMICALLY IMPORT////\n  // if(props.tutor in tutor_map){props.tutor = tutor_map[props.tutor]}\n  // var tutorClass = (await import(props.tutor)).default\n  /////////////////////////////////////////////////\n  return [props,tutorClass]\n}).then(function(args){\n  var [props,tutorClass] = args\n  ReactDOM.render(\n    <App\n      ref={app => {\n        window.react_interface = app;\n      }}\n      //style={{ height: \"100%\", width : \"100%\" }}\n      //tutorClass={tutor_map[props.tutor] || StylusTutor}\n      //tutorClass={tutor_map[props.tutor]}\n      tutorClass={tutorClass}\n      {...props}\n    />,\n    document.getElementById(\"root\")\n  );\n});\n\n/*\nif (false) {\n  // function setSkillWindowState(evt){\n\n  // }\n  // window.state_machine = ButtonsMachine.initialState\n  // window.state_machine_service = interpret(ButtonsMachine)\n  // window.state_machine_service.start()\n\n  // const state = {\n  //   current:\n  // };\n  // window.state_machine_service.onTransition(current => {\n  // \tconsole.log(\"current.value\")\n  // \tconsole.log(current.value)\n  // \tsetButtonsState(current,window.debugmode)\n\n  //   // this.setState({ current : current })\n  //   }\n  // );\n\n  // function setButtonCallbacks(callbacks){\n  // window.button_callbacks = callbacks\n  // }\n  // window.setButtonCallbacks = setButtonCallbacks\n\n  // function setNoolsCallback(callback){\n  // \twindow.nools_callback = callback\n  // }\n  // window.setNoolsCallback = setNoolsCallback\n\n  function setSkillWindowState(\n    skill_set,\n    select_callback,\n    correctness_callback,\n    initial_select = null,\n    where_colors = null\n  ) {\n    ReactDOM.render(\n      //<View>\n      <CTAT_Tutor></CTAT_Tutor>,\n      //<SkillPanel skill_set={skill_set}\n      //\t\t\t\t\t\tselect_callback={select_callback}\n      //\t\t\t\t\t\tcorrectness_callback={correctness_callback}\n      //\t\t\t\t\t\t\tinitial_select={initial_select}\n      //\t\t\t\t\t\t\twhere_colors={where_colors || undefined}\n      //\t\t\t\t\t\t\t\tcurrent = {window.state_machine}\n      //\t\t\t\t\t\t\t\tservice = {window.state_machine_service}\n      //\n      //\t\t\t\t\t\t\t\t/>\n      //\t\t</View>\n      document.getElementById(\"skill_panel\")\n    );\n  }\n\n  function setButtonsState(current, debugmode = false) {\n    window.state_machine = current;\n    ReactDOM.render(\n      <Buttons\n        current={current}\n        service={window.state_machine_service}\n        debugmode={debugmode}\n        callbacks={window.button_callbacks}\n        nools_callback={window.nools_callback}\n      />,\n      document.getElementById(\"buttons\")\n    );\n  }\n\n  window.setSkillWindowState = setSkillWindowState;\n  window.setButtonCallbacks = setSkillWindowState;\n  window.setButtonsState = setButtonsState;\n\n  // function render(){\n  // let sections = [\n  // \t              {title: 'D', data: ['Devin the long named fool']},\n  // \t              {title: 'J', data: ['Jackson', 'James', 'Jillian', 'Jimmy', 'Joel', 'John', 'Julie']},\n  // \t              {title: 'B', data: ['Backson', 'Bames', 'Billian', 'Bimmy', 'Boel', 'Bohn', 'Bulie']},\n  // \t            ];\n\n  let test_skills = {\n    explanations: [\n      {\n        name: \"E0 + E1\",\n        how: \"E0 + E1\",\n        where: { A: { B: 1 } },\n        when: \"WHEN PART\",\n        which: 7.0,\n        mapping: { \"?sel\": \"A1\", \"?arg0\": \"B1\", \"?arg1\": \"C1\" }\n      },\n      {\n        name: \"E0 + E1\",\n        how: \"E0 + E1\",\n        where: \"WHERE PART\",\n        when: \"WHEN PART\",\n        which: 7.0,\n        mapping: { \"?sel\": \"A2\", \"?arg0\": \"B2\", \"?arg1\": \"C2\" }\n      },\n      {\n        name: \"(E0 + E1) // 10\",\n        how: \"(E0 + E1) // 10\",\n        where: \"WHERE PART\",\n        when: \"WHEN PART\",\n        which: 4.0,\n        mapping: { \"?sel\": \"A1\", \"?arg0\": \"B1\", \"?arg1\": \"C1\" }\n      },\n      {\n        name: \"(E0 + E1) // 10\",\n        how: \"(E0 + E1) // 10\",\n        where: \"WHERE PART\",\n        when: \"WHEN PART\",\n        which: 4.0,\n        mapping: { \"?sel\": \"A2\", \"?arg0\": \"B2\", \"?arg1\": \"C2\" }\n      }\n    ],\n    \"other skills\": [\n      {\n        name: \"(E0 + E1) // 10\",\n        how: \"E0 + E1 + E2\",\n        where: \"WHERE PART (E0 + E1 + E2)\",\n        when: \"WHEN PART (E0 + E1 + E2)\",\n        which: 3.0\n      },\n      {\n        name: \"(E0 + E1 + E2) // 10\",\n        how: \"E0 + E1\",\n        where: \"WHERE PART ((E0 + E1 + E2) // 10)\",\n        when: \"WHEN PART ((E0 + E1 + E2) // 10)\",\n        which: 8.0\n      }\n    ]\n  };\n  // setSkillWindowState({\"skills:\": []});\n\n  if (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\n    window.debugmode = true;\n    window.query_apprentice = () => {};\n    setButtonsState(window.state_machine, true);\n    setSkillWindowState(test_skills);\n  } else {\n    window.debugmode = false;\n  }\n}*/\n// setButtonsState(\"press_next\",true,true);\n\n// }\n// document.getElementById('render_button').addEventListener(\"click\",render)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/Arrowhead-01-128.3fbf838f.png\";","module.exports = __webpack_public_path__ + \"static/media/Arrowhead-Down-01-128.912d4e8d.png\";","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport WebView from \"react-native-web-webview\";\nimport autobind from \"class-autobind\";\n\n// import WebViewFile from '../../examples/FracPreBake/FractionArithmetic/HTML/fraction_arithmetic.html';\nimport {\n  Icon,\n  View,\n  Text,\n  StyleSheet,\n  Platform //,\n  // WebView\n} from \"react-native\";\n\nconst queryString = require(\"query-string\");\nconst path = require(\"path\");\n\nvar $ = require(\"jquery\");\n\n// const post_message =\n// \"\\\n// function waitForBridge() {\\\n//    //the react native postMessage has only 1 parameter\\\n//    //while the default one has 2, so check the signature\\\n//    //of the function\\\n//    if (window.postMessage.length !== 1){\\\n//      setTimeout(waitForBridge, 200);\\\n//    }\\\n//    else {\\\n//      window.postMessage(document);\\\n//    }\\\n// }\\\n// \\\n// window.onload = waitForBridge;\\\n// \";\n\nfunction checkTypes(element, types) {\n  var ok = false;\n  for (var i = types.length - 1; i >= 0; i--) {\n    var type = types[i];\n    if (element.classList.contains(type)) ok = true;\n  }\n  return ok;\n}\n\nclass CTAT_Tutor extends React.Component {\n  constructor(props) {\n    super(props);\n    autobind(this);\n\n    this.where_colors = [\n      \"darkorchid\",\n      \"#ff884d\",\n      \"#52d0e0\",\n      \"#feb201\",\n      \"#e44161\",\n      \"#ed3eea\",\n      \"#2f85ee\",\n      \"#562ac6\",\n      \"#cc24cc\"\n    ];\n\n    this.relative_pos_cache = {};\n\n    this.color_class_map = {\n      EXAMPLE: \"CTAT--example\",\n      CORRECT: \"CTAT--correct\",\n      INCORRECT: \"CTAT--incorrect\",\n      HIGHLIGHT: \"CTAT--AL_highlight\",\n      START_STATE: \"CTAT--AL_start\",\n      ATTEMPT: \"\",\n      DEFAULT: \"\"\n    };\n\n    this.ctat_webview = React.createRef();\n\n    this.state = {\n      // \"mode\" : this.props.mode || \"train\",\n      source:\n        \"../../examples/FracPreBake/FractionArithmetic/HTML/fraction_arithmetic.html?question_file=../mass_production/mass_production_brds/AD 5_9_plus_3_7.brd\"\n    };\n    this.start_state_history = [];\n    this.highlighted_elements = [];\n\n    // window.setMode = (mode) => {this.setState({mode : mode })}\n  }\n\n  // setMode(mode){\n  //   if(this.state.mode == \"train\" && mode == \"tutor\"){\n  //     this.clearProposedSAI()\n  //   }\n\n  //   this.setState({mode : mode })\n\n  // }\n\n  componentDidMount() {\n    // window.ctat_webview = this.ctat_webview.current\n\n    console.log(\"THIS\", this);\n    // this.graph = this.iframe_content.CTAT.ToolTutor.tutor.getGraph() || false;\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    console.log(\"UPDATED\", this.state);\n    this.iframe = this.ctat_webview.current;\n\n    if (!this.init_callback) {\n      this.init_callback = x => {};\n    }\n\n    // this._triggerWhenInitialized()\n  }\n\n  getProblemName(){\n    return this.problem_name\n  }\n\n  loadProblem(context) {\n    const prob_obj = context.prob_obj;\n    const nl = context.network_layer;\n    const interactive = context.interactive;\n    this.interactive = context.interactive;\n    this.setState({ source: { html: LOAD_SCREEN } });\n    const promise = new Promise((resolve, reject) => {\n      var HTML_name = prob_obj[\"HTML\"]\n        .substring(prob_obj[\"HTML\"].lastIndexOf(\"/\") + 1)\n        .replace(\".html\", \"\");\n\n      var domain_name = prob_obj[\"domain_name\"] || HTML_name;\n\n      // Point the iframe to the HTML and question_file (brd or nools) for the next problem\n\n      // iframe_content.CTAT = null;\n      // iframe_content.CTATCommShell = null;\n\n      //Repalcing \"..\" w/ \"!u\" Allows to fetch above working dir\n      var HTML_PATH = prob_obj[\"HTML\"].replace(/\\.\\./g,\"!u\"); \n      if (!path.isAbsolute(HTML_PATH)) {\n        HTML_PATH = path.join(context.working_dir || \"/\", HTML_PATH);\n      }\n      // console.log(\"working_dir: \", working_dir)\n      // console.log(\"HTML_PATH: \", HTML_PATH)\n\n      // if(session_id == null){\n      //     user_guid = \"Stu_\" + CTATGuid.guid();\n      //     session_id = CTATGuid.guid();\n      // }\n\n      var qf_exists =\n        prob_obj[\"question_file\"] != undefined &&\n        prob_obj[\"question_file\"].toUpperCase() != \"INTERACTIVE\";\n      var abs_qf_paths = prob_obj['abs_qf_paths'] || false\n      var BRD_name, free_authoring;\n      if (qf_exists) {\n        BRD_name = prob_obj[\"question_file\"]\n          .substring(prob_obj[\"question_file\"].lastIndexOf(\"/\") + 1)\n          .replace(\".brd\", \"\")\n          .replace(\".nools\", \"\");\n        free_authoring = false;\n      } else {\n        BRD_name = \"FREE AUTHORING\";\n        free_authoring = true;\n      }\n      // this.free_authoring =\n      // term_print(prob_obj[\"question_file\"])\n\n      nl.term_print(\"Starting Problem: \" + BRD_name, \"INFO\");\n\n      var qf  = (prob_obj[\"question_file\"]||\"\").replace(/\\.\\./g,\"!u\"); \n      qf = qf_exists\n        ? (abs_qf_paths ?\n            { question_file: context.network_layer.HOST_URL + qf }\n          : { question_file: qf })\n        : { question_file: \"/host/empty.nools\" };\n\n      console.log(\"qf\", qf, interactive, prob_obj);\n      if (!interactive && qf[\"question_file\"].includes(\".nools\")) {\n        console.log(\"BAD QF\", qf[\"question_file\"])\n        nl.kill_this(\n          \"Got question_file: '\" + qf[\"question_file\"] + \"'. Question file cannot be nools in non-interactive mode. Use example tracing.\"\n        );\n      }\n\n      this.problem_obj = prob_obj\n      var logging_params = {\n        problem_name: BRD_name,\n        dataset_level_name1: domain_name,\n        dataset_level_type1: \"Domain\",\n        SessionLog: \"true\",\n        Logging: \"ClientToLogServer\",\n        log_service_url: window.location.origin,\n        user_guid: context.agent_name,\n        session_id: context.session_id\n      };\n      if (\"problem_context\" in prob_obj) {\n        logging_params[\"problem_context\"] = prob_obj[\"problem_context\"];\n      }\n\n      if (\"custom_fields\" in prob_obj) {\n        var custom_fields = prob_obj[\"custom_fields\"];\n        for (var [i, key] of Object.keys(custom_fields).entries()) {\n          logging_params[\"custom_field_name\" + String(i)] = key;\n          logging_params[\"custom_field_value\" + String(i)] = custom_fields[key];\n        }\n      }\n      var params = Object.assign({}, qf, logging_params); //Merge dictionaries\n\n      this.HTML_PATH = HTML_PATH;\n      this.init_callback = () => {\n        resolve({ updateContext: { free_author: free_authoring } });\n      };\n      var source = HTML_PATH + \"?\" + queryString.stringify(params);\n      console.log(\"source\", source);\n      this.graph = null;\n      this.commLibrary = null;\n      this.hasConfig = null;\n      this.setState({\n        source: { uri: source },\n        onLoad: this._triggerWhenInitialized,\n        // TODO: [nr] convert elements to string?\n        steps: prob_obj[\"only_step_ids\"] ? prob_obj[\"only_step_ids\"].flat() : null,\n        selections: prob_obj[\"only_Selections\"]\n          ? prob_obj[\"only_Selections\"].flat() : null\n      });\n      // this.iframe.onLoad = this._triggerWhenInitialized;\n      // this.iframe.src = HTML_PATH + \"?\" + queryString.stringify( params ).search;\n      // setTimout(this._triggerWhenInitialized(),10)\n    });\n    return promise;\n  }\n\n  _inject_element(elm_type, attributes = {}) {\n    var elm = this.iframe_content.document.createElement(elm_type);\n    for (var attr in attributes) {\n      elm.setAttribute(attr, attributes[attr]);\n    }\n    this.iframe_content.document\n      .getElementsByTagName(\"head\")[0]\n      .appendChild(elm);\n  }\n\n  /*\n  _checkAndStartTrigger(){\n      this.iframe_content = this.iframe.frameRef.contentWindow;\n    // if(this.iframe_content.document){\n      this._inject_element('link',   {href:'/CTAT/CTAT.css',type: \"text/css\",rel: \"stylesheet\"})\n      this._inject_element('link',   {href:'/CTAT/normalize.css',type: \"text/css\",rel: \"stylesheet\"})\n      this._inject_element('link',   {href:'/CTAT/front-end.css',type: \"text/css\",rel: \"stylesheet\"})\n      this._inject_element('script', {\"data-silex-static\" : true, type:'text/javascript', src : \"/CTAT/jquery.min.js\"})\n      this._inject_element('script', {\"data-silex-static\" : true, type:'text/javascript', src : \"/CTAT/nools.js\"})\n      this._inject_element('script', {\"data-silex-static\" : true, type:'text/javascript', src : \"/CTAT/ctat.min.js\"})\n      \n      window.setTimeout(() => {\n        this._inject_element('script', {\"data-silex-static\" : true, type:'text/javascript', src : \"/CTAT/ctatloader.js\"})\n        this._triggerWhenInitialized()      \n      }, 100);\n      \n    // }else{\n    //   window.setTimeout(() => {this._checkAndStartTrigger()}, 200);\n    // }\n    \n    \n  }*/\n\n  _triggerWhenInitialized() {\n    console.log(\"TRIGGER WHEN INITIALIZED\");\n    this.iframe_content = this.iframe.frameRef.contentWindow;\n    const iframe_content = this.iframe_content;\n\n    if (\n      typeof iframe_content.CTAT == \"undefined\" ||\n      iframe_content.CTAT == null ||\n      typeof iframe_content.CTATCommShell == \"undefined\" ||\n      iframe_content.CTATCommShell == null ||\n      typeof iframe_content.CTATCommShell.commShell == \"undefined\" ||\n      iframe_content.CTATCommShell.commShell == null ||\n      typeof iframe_content.CTAT.ToolTutor == \"undefined\" ||\n      iframe_content.CTAT.ToolTutor == null ||\n      typeof iframe_content.CTAT.ToolTutor.tutor == \"undefined\" ||\n      iframe_content.CTAT.ToolTutor.tutor == null\n    ) {\n      // term_print('\\x1b[0;30;47m' + \"BLEHH1\" +  '\\x1b[0m');\n      console.log(\"CTAT not defined yet...\");\n      window.setTimeout(() => {\n        this._triggerWhenInitialized();\n      }, 500);\n      return;\n    }\n    this.graph = iframe_content.CTAT.ToolTutor.tutor.getGraph() || false;\n    this.commLibrary = iframe_content.CTATCommShell.commShell.getCommLibrary();\n    this.hasConfig = iframe_content.CTATConfiguration != undefined;\n\n    // console.log(\"graph\")\n    // console.log(graph)\n    // console.log(\"comm\")\n    // console.log(commLibrary)\n    // console.log(hasConfig)\n\n    if (\n      (this.graph || this.interactive) &&\n      this.commLibrary &&\n      this.hasConfig\n    ) {\n      this._inject_element(\"link\", {\n        href: \"/host/css/AL_colors.css\",\n        type: \"text/css\",\n        rel: \"stylesheet\"\n      });\n      // var link = iframe_content.document.createElement('link');\n      // link.setAttribute('rel', 'stylesheet');\n      // link.setAttribute('type', 'text/css');\n      // // link.setAttribute('href', \"../\".repeat(working_dir.split('/').length+1) + 'css/AL_colors.css');\n      // link.setAttribute('href', document.location.origin + '/css/AL_colors.css');\n      // iframe_content.document.getElementsByTagName('head')[0].appendChild(link);\n\n      //Gets rid of annyoing sai printout on every call to sendXML\n      iframe_content.flashVars.setParams({ deliverymode: \"bleehhhh\" });\n\n      //Grab these event constants from CTAT\n      this.CTAT_CORRECT =\n        iframe_content.CTAT.Component.Base.Tutorable.EventType.correct;\n      this.CTAT_INCORRECT =\n        iframe_content.CTAT.Component.Base.Tutorable.EventType.incorrect;\n      this.CTAT_ACTION =\n        iframe_content.CTAT.Component.Base.Tutorable.EventType.action;\n\n      console.log(\"CTAT INITIALIZED!\");\n      this.init_callback(this);\n    } else {\n      // term_print('\\x1b[0;30;47m' + \"BLEHH2\" + '\\x1b[0m');\n      console.log(\"CTAT not initialized yet...\");\n      window.setTimeout(() => {\n        this._triggerWhenInitialized();\n      }, 500);\n    }\n  }\n\n  handle_user_set_state(evt) {\n    var sai = evt.detail.sai;\n    var sel = sai.getSelection();\n\n    // var elm = );\n    // elm = this.iframe_content.document.getElementById(sai.getSelection());\n    // console.log(sai.getInput())\n    if (sai.getInput() != \"\") {\n      this.colorElement(sel, \"START_STATE\");\n      //elm.firstChild.classList.add(\"CTAT--AL_start\");\n      this.start_state_elements.push(sel);\n    } else {\n      // elm.firstChild.classList.remove(\"CTAT--AL_start\");\n      this.colorElement(sel, \"DEFAULT\");\n      if (this.start_state_elements.includes(sel)) {\n        this.start_state_elements.remove(sel);\n      }\n    }\n  }\n\n  enterSetStartStateMode() {\n    this.start_state_elements = [];\n    this.iframe_content.document.addEventListener(\n      this.CTAT_ACTION,\n      this.handle_user_set_state\n    );\n  }\n\n  exitSetStartStateMode() {\n    this.iframe_content.document.removeEventListener(\n      this.CTAT_ACTION,\n      this.handle_user_set_state\n    );\n\n    console.log(\"START DONE\");\n    for (var i in this.start_state_elements) {\n      var sel = this.start_state_elements[i];\n      var elm = this.iframe_content.document.getElementById(sel);\n      if (elm.firstChild.value) {\n        this.lockElement(sel);\n        // elm.setAttribute(\"data-ctat-enabled\",\"false\")\n        // elm.firstChild.setAttribute(\"contentEditable\",\"false\")\n        // elm.firstChild.disabled = true;\n      }\n      this.colorElement(sel, \"DEFAULT\");\n      // elm.firstChild.classList.remove(\"CTAT--AL_start\");\n      // console.log(\"BOOP\",elm);\n    }\n    console.log(\"FINISHED LOCKING\");\n    //Take away focus from whatever is there so it isn't treated as an example\n    // document.activeElement.blur();\n    // console.log(\"STAT\",getState())\n    this.start_state_history.push(this.getState());\n    // last_action = proposed_SAI = null;\n  }\n\n  handleUserExample(evt) {\n    this.handleUserInput(evt, \"EXAMPLE\");\n  }\n  handleUserAttempt(evt) {\n    this.handleUserInput(evt, \"ATTEMPT\");\n  }\n\n  handleUserInput(evt, type) {\n    var sai = evt.detail.sai;\n    var sel = sai.getSelection();\n\n    var elm = this.iframe_content.document.getElementById(sel);\n    if (elm.firstChild.contentEditable == \"false\") {\n      console.log(\"BAIL\");\n      return;\n    }\n\n    var sai = {\n      selection: sai.getSelection(),\n      action: sai.getAction(),\n      inputs: { value: sai.getInput() }\n    };\n\n    this.lockElement(sel);\n    this.colorElement(sel, type);\n\n    // if(this.state.mode == \"train\"){\n    if (type == \"EXAMPLE\") {\n      this.props.interactions_service.send({\n        type: \"DEMONSTRATE\",\n        data: { ...sai, reward: 1 }\n      });\n    } else if (type == \"ATTEMPT\") {\n      console.log(\"SEND ATTEMPT\", sai);\n      this.props.interactions_service.send({\n        type: \"ATTEMPT\",\n        data: { ...sai }\n      });\n    } else {\n      throw \"uknown type given\";\n    }\n    // }else if(this.state.mode == \"tutor\"){\n    //   this.props.interactions_service.send({\n    //     type : \"ATTEMPT\",\n    //     data : {...sai,reward : 1},\n    //   });\n    // }\n  }\n\n  displayCorrectness(context, event) {\n    var sai = context.staged_SAI;\n    var sel = sai.selection;\n    if (event.data == 1) {\n      this.colorElement(sel, \"CORRECT\");\n    } else {\n      this.colorElement(sel, \"INCORRECT\");\n      this.unlockElement(sel);\n    }\n  }\n\n  printFeedback(context, event) {\n    var nl = context.network_layer;\n    var staged_SAI = context.staged_SAI;\n\n    var type = context.action_type;\n    // var reward = staged_SAI.reward\n    if (!context.feedback_map || Object.keys(context.feedback_map).length === 0) {\n      if (type == \"ATTEMPT\") {\n        type = staged_SAI.reward > 0 ? \"CORRECT\" : \"INCORRECT\";\n      }\n\n      // var color = color_map[type]\n      var inps =\n        staged_SAI.inputs[\"value\"] != null ? staged_SAI.inputs[\"value\"] : \"\";\n\n      nl.term_print(type + \": \" + staged_SAI.selection + \" -> \" + inps, type);\n    } else {\n      for (var index in context.feedback_map) {\n        var skill_app = context.skill_applications[index];\n        var type = context.feedback_map[index].toUpperCase();\n        // var color = color_map[type]\n        var inps =\n          skill_app.inputs[\"value\"] != null ? skill_app.inputs[\"value\"] : \"\";\n        nl.term_print(type + \": \" + skill_app.selection + \" -> \" + inps, type);\n      }\n    }\n  }\n\n  _done_clicked_example(evt) {\n    this.handleUserExample({\n      detail: {\n        sai: new this.iframe_content.CTATSAI(\"done\", \"ButtonPressed\", \"-1\")\n      }\n    });\n  }\n\n  enterFeedbackMode() {\n    this.iframe_content.document.addEventListener(\n      this.CTAT_ACTION,\n      this.handleUserExample\n    );\n    this.iframe_content.document\n      .getElementById(\"done\")\n      .addEventListener(\"click\", this._done_clicked_example);\n  }\n\n  exitFeedbackMode() {\n    this.iframe_content.document.removeEventListener(\n      this.CTAT_ACTION,\n      this.handleUserExample\n    );\n    this.iframe_content.document\n      .getElementById(\"done\")\n      .removeEventListener(\"click\", this._done_clicked_example);\n  }\n\n  _done_clicked_attempt(evt) {\n    this.handleUserAttempt({\n      detail: {\n        sai: new this.iframe_content.CTATSAI(\"done\", \"ButtonPressed\", \"-1\")\n      }\n    });\n  }\n\n  enterTutoringMode() {\n    this.iframe_content.document.addEventListener(\n      this.CTAT_ACTION,\n      this.handleUserAttempt\n    );\n    this.iframe_content.document\n      .getElementById(\"done\")\n      .addEventListener(\"click\", this._done_clicked_attempt);\n  }\n\n  exitTutoringMode() {\n    this.iframe_content.document.removeEventListener(\n      this.CTAT_ACTION,\n      this.handleUserAttempt\n    );\n    this.iframe_content.document\n      .getElementById(\"done\")\n      .removeEventListener(\"click\", this._done_clicked_attempt);\n  }\n\n\n\n  handle_foci_select(evt) {\n    console.log(\"FOCI SELECT!\");\n    for (var ele of evt.path) {\n      console.log(\"EELE\", ele);\n      if (\n        ele.classList != undefined &&\n        ele.classList.contains(\"CTATComponent\")\n      ) {\n        var indx = this.current_foci.indexOf(ele);\n        // console.log(current_foci)\n        if (indx == -1) {\n          this.current_foci.push(ele);\n          this.highlightElement(ele.id, 1);\n          // ele.classList.add(\"CTAT--AL_highlight1\");\n        } else {\n          this.current_foci.splice(indx, 1);\n          // ele.classList.remove(\"CTAT--AL_highlight1\");\n          this.unhighlightElement(ele.id);\n        }\n        console.log(this.current_foci);\n\n        break;\n      }\n    }\n  }\n\n  enterFociMode() {\n    console.log(\"FOCI START!\");\n    this.unhighlightAll();\n    this.current_foci = [];\n    this.iframe_content.document.addEventListener(\n      \"click\",\n      this.handle_foci_select\n    );\n  }\n\n  getCurrentFoci() {\n    if (this.current_foci) {\n      return this.current_foci.map(elm => elm.id);\n    } else {\n      return [];\n    }\n  }\n\n  exitFociMode() {\n    this.unhighlightAll();\n    console.log(\"FOCI DONE!\");\n    // var foci_of_attention = [];\n    // for(var ele of this.current_foci){\n    //     // ele.classList.remove(\"CTAT--AL_highlight1\");\n    //     this.colorElement(ele.id)\n    //     // foci_of_attention.push(ele.id);\n    // }\n    // console.log(foci_of_attention)\n    // current_sai_data.foci_of_attention = foci_of_attention;\n    this.current_foci = [];\n    this.iframe_content.document.removeEventListener(\n      \"click\",\n      this.handle_foci_select\n    );\n  }\n\n  _shouldSkipTraining(sai) {\n    if (!this.state.steps && !this.state.selections) {\n      return false;\n    }\n\n    if (this.state.steps) {\n      var tracer = this.iframe_content.CTAT.ToolTutor.tutor.getTracer();\n      var stepId = tracer.getLastResult().getStepID();\n      console.log(\"stepId:\", stepId);\n\n      if (this.state.steps.includes(stepId)) {\n        return false;\n      }\n    }\n\n    if (this.state.selections &&\n        this.state.selections.includes(sai.selection)) {\n      return false;\n    }\n\n    return true;\n  }\n\n  //---------- Xstate API with promises ----------------\n  attemptStagedSAI(context, event) {\n    const promise = new Promise((resolve, reject) => {\n      // try {\n      const sai = context.staged_SAI;\n      var currentElement = this.iframe_content.document.getElementById(\n        sai.selection\n      );\n      const CTAT_CORRECT = this.CTAT_CORRECT;\n      const CTAT_INCORRECT = this.CTAT_INCORRECT;\n      const shouldSkipTraining = this._shouldSkipTraining;\n      const lockElement = this.lockElement;\n\n      function handle_ctat_feedback(evt) {\n        console.log(\"EVENT\", evt);\n        console.log(\"EVENT\", evt.detail.sai.getTransactionID());\n        currentElement.removeEventListener(CTAT_CORRECT, handle_ctat_feedback);\n        currentElement.removeEventListener(\n          CTAT_INCORRECT,\n          handle_ctat_feedback\n        );\n\n        //If in test mode make sure that fields are locked on incorrect\n        console.log(\"MOOOOOOOO\", context)\n        if(context.test_mode){\n          lockElement(sai.selection)\n        }\n\n        resolve({\n          ...sai,\n          reward: evt.type == CTAT_CORRECT ? 1 : -1,\n          skipTraining: shouldSkipTraining(sai)\n        });\n      }\n\n      currentElement.addEventListener(CTAT_CORRECT, handle_ctat_feedback);\n      currentElement.addEventListener(CTAT_INCORRECT, handle_ctat_feedback);\n      this.applySAI(sai);\n      // }catch(err){\n      //   reject(err)\n      // }\n    });\n    return promise;\n  }\n  applyNextExample(context, event) {\n    const promise = new Promise((resolve, reject) => {\n      // try{\n      this.applyHint();\n      var sai = this.getDefaultSAI();\n      this.colorElement(sai.selection, \"EXAMPLE\");\n      this.lockElement(sai.selection)\n      this.applySAI(sai);\n      resolve({\n        ...sai,\n        reward: 1,\n        skipTraining: this._shouldSkipTraining(sai)\n      });\n      //   }catch(err){\n      //     reject(err)\n      //   }\n    });\n    return promise;\n  }\n  //----------------------------------------------------\n\n  applySAI(sai) {\n    var sel_elm = this.iframe_content.document.getElementById(sai.selection);\n    if ((sel_elm[\"data-ctat-enabled\"] || \"true\") == \"false\") {\n      //Force incorrect if try to edit uneditaable\n      var incorrect_event = new CustomEvent(this.CTAT_INCORRECT, {\n        detail: { sai: sai, component: sel_elm },\n        bubbles: true,\n        cancelable: true\n      });\n      sel_elm.dispatchEvent(incorrect_event);\n    }\n\n    if (sai.action == \"ButtonPressed\") {\n      sai.inputs = { value: -1 };\n    }\n\n    // last_action = sai\n    const CTATSAI = this.iframe_content.CTATSAI;\n    var sai_obj = new CTATSAI(sai.selection, sai.action, sai.inputs[\"value\"]);\n    this.iframe_content.CTATCommShell.commShell.processComponentAction(\n      sai_obj,\n      true\n    );\n  }\n\n  lockElement(name) {\n    var comp = this.iframe_content.CTATShellTools.findComponent(name)[0];\n    comp.setEnabled(false);\n  }\n\n  unlockElement(name) {\n    var comp = this.iframe_content.CTATShellTools.findComponent(name)[0];\n    comp.setEnabled(true);\n  }\n\n  colorElement(name, type) {\n    var elm = this.iframe_content.document.getElementById(name);\n    // if(type == \"DEFAULT\"){\n    //   for (const [key, value] of Object.entries(this.color_class_map)) {\n    //     if(elm.firstElementChild.classList.contains(value)){\n    //       elm.firstElementChild.classList.remove(value);\n    //     }\n    //   }\n    // }else{\n    // this.colorElement(name,\"DEFAULT\")\n    if (elm && elm.firstElementChild) {\n      elm.firstElementChild.setAttribute(\"class\", this.color_class_map[type]);\n    }\n    // elm.firstElementChild.classList.add(this.color_class_map[type]);\n    //   }\n  }\n\n  // highlightSAI(sai){\n\n  //   if(sai.mapping){\n  //       Object.entries(sai.mapping).forEach(function(v,index){\n  //           const [var_str, elem_str] = v\n  //           var colorIndex = 1\n  //           if(var_str != \"?sel\"){\n  //               colorIndex = 2 + ((index-1) % (this.where_colors.length-1));\n  //               console.log(colorIndex)\n  //           }\n  //           // elm = this.iframe_content.document.getElementById(elem_str.replace('?ele-',\"\"));\n  //           this.highlightElement(elem_str,colorIndex)\n  //       });\n  //   }else{\n  //     alert(\"IDK WHAT THIS IS\")\n  //       // this.highlighted_elements.push(elm.firstElementChild.id)\n  //       // elm.firstElementChild.classList.add(\"CTAT--AL_highlight1\")\n  //   }\n  // }\n\n  highlightElement(name, colorIndex = 1) {\n    this.unhighlightElement(name);\n    var elm = this.iframe_content.document.getElementById(\n      name.replace(\"?ele-\", \"\")\n    );\n    elm.firstElementChild.classList.add(\"CTAT--AL_highlight\" + colorIndex);\n    this.highlighted_elements.push(name);\n    // console.log(\"H\", this.highlighted_elements)\n  }\n\n  unhighlightElement(name) {\n    if (this.highlighted_elements.includes(name)) {\n      var elm = this.iframe_content.document.getElementById(\n        name.replace(\"?ele-\", \"\")\n      );\n      var before = elm.firstElementChild.classList.toString();\n      for (var i = 1; i <= this.where_colors.length; i++) {\n        var c = \"CTAT--AL_highlight\" + i;\n        // console.log(c)\n        if (elm.firstElementChild.classList.contains(c)) {\n          elm.firstElementChild.classList.remove(c);\n        }\n      }\n      var after = elm.firstElementChild.classList.toString();\n      // console.log(\"BEF-AFT:\", before,after)\n      var index = this.highlighted_elements.indexOf(name);\n      if (index > -1) {\n        this.highlighted_elements.splice(index, 1);\n      }\n    }\n  }\n\n  clearElement(name) {\n    var elm = this.iframe_content.document.getElementById(name);\n    elm.firstElementChild.value = \"\";\n  }\n\n  highlightSAI(sai) {\n    if (sai.mapping) {\n      var index = 0;\n      for (var var_str in sai.mapping) {\n        var elem_str = sai.mapping[var_str];\n        var colorIndex = 1;\n        if (var_str != \"?sel\") {\n          colorIndex = 2 + ((index - 1) % (this.where_colors.length - 1));\n          // console.log(colorIndex)\n        }\n        // elm = this.iframe_content.document.getElementById(elem_str.replace('?ele-',\"\"));\n        this.highlightElement(elem_str, colorIndex);\n        index++;\n      }\n    } else {\n      alert(\"RESPONSE IS MISSING FIELD:'mapping'\");\n      // this.highlighted_elements.push(elm.firstElementChild.id)\n      // elm.firstElementChild.classList.add(\"CTAT--AL_highlight1\")\n    }\n  }\n\n  unhighlightAll() {\n    // console.log(\"HIGHLIGHTED_/\", this.highlighted_elements)\n    for (var elem_str of [...this.highlighted_elements]) {\n      this.unhighlightElement(elem_str);\n    }\n  }\n\n  getDefaultSAI() {\n    var sai = this.graph\n      .getExampleTracer()\n      .getBestNextLink()\n      .getDefaultSAI();\n    sai = {\n      selection: sai.getSelection(),\n      action: sai.getAction(),\n      inputs: { value: sai.getInput() }\n    };\n    return sai;\n  }\n\n  clearProposedSAI() {\n    if (this.proposed_SAI) {\n      this.clearElement(this.proposed_SAI.selection);\n      this.unlockElement(this.proposed_SAI.selection.replace(\"?ele-\", \"\"));\n      this.unhighlightAll();\n      this.proposed_SAI = null;\n    }\n  }\n\n  proposeSAI(sai) {\n    // console.log(\"EVDA\", event.data)\n    // var sai = event.data\n    this.clearProposedSAI();\n    this.proposed_SAI = { ...sai };\n    this.highlightSAI(sai);\n    this.stageSAI(sai);\n  }\n\n  stageSAI(sai) {\n    var comp = this.iframe_content.CTATShellTools.findComponent(\n      sai.selection\n    )[0];\n    var sai_obj = new this.iframe_content.CTATSAI(\n      sai.selection,\n      sai.action,\n      sai.inputs[\"value\"]\n    );\n    comp.executeSAI(sai_obj);\n    this.lockElement(sai.selection);\n  }\n\n  confirmProposedSAI() {\n    if (this.proposed_SAI) {\n      this.unhighlightAll();\n      this.proposed_SAI = null;\n    }\n  }\n\n  applyHint() {\n    var message =\n      \"<message><properties>\" +\n      \"<MessageType>InterfaceAction</MessageType>\" +\n      \"<Selection><value>hint</value></Selection>\" +\n      \"<Action><value>ButtonPressed</value></Action>\" +\n      \"<Input><value><![CDATA[hint request]]></value></Input>\" +\n      \"</properties></message>\";\n    // console.log(\"MESSAGE\",message);\n    this.commLibrary.sendXML(message);\n  }\n\n  getState({\n    encode_relative = true,\n    strip_offsets = true,\n    use_offsets = true,\n    use_class = true,\n    use_id = true,\n    append_ele = false,\n    numeric_values = false,\n    clear_editable_values = true,\n  } = {}) {\n    var relative_pos_cache = this.relative_pos_cache;\n    var HTML_PATH = this.HTML_PATH;\n    var state_array = this.iframe_content.$(\"div\").toArray();\n    // state_array.push({current_task: current_task});\n\n    var state_json = {};\n    var count = 0;\n    $.each(state_array, function(idx, element) {\n      obj = {};\n      if (\n        element.classList.contains(\"CTATComponent\") &&\n        !element.classList.contains(\"CTATTable\")\n      ) {\n        // if(obj[\"className\"] == \"CTATTextField\") {continue;} //Skip table objects and just use cells\n        if (element.classList[0] != \"CTATTextField\") {\n          //Skip text fields\n          if (use_class) {\n            obj[\"dom_class\"] = element.classList[0];\n          }\n          if (use_offsets) {\n            obj[\"offsetParent\"] = element.offsetParent.dataset.silexId;\n            obj[\"offsetLeft\"] = element.offsetLeft;\n            obj[\"offsetTop\"] = element.offsetTop;\n            obj[\"offsetWidth\"] = element.offsetWidth;\n            obj[\"offsetHeight\"] = element.offsetHeight;\n          }\n\n          if (use_id) {\n            obj[\"id\"] = element.id;\n          }\n\n          if (\n            checkTypes(element, [\n              \"CTATTextInput\",\n              \"CTATComboBox\",\n              \"CTATTable--cell\"\n            ])\n          ) {\n            obj['type'] = \"TextField\"\n            obj[\"value\"] = element.firstElementChild.value;\n            if (numeric_values) {\n              obj[\"value\"] = Number(obj[\"value\"]) || obj[\"value\"];\n            }\n            obj[\"contentEditable\"] =\n              element.firstElementChild.contentEditable == \"true\";\n\n            if(clear_editable_values && obj[\"contentEditable\"] == true){\n              obj['value'] = \"\"\n            }\n            // obj[\"name\"] = element.id\n          }else if(checkTypes(element, [\"CTATButton\"])){\n            obj['type'] = \"Button\"\n          }\n          // if(checkTypes(element, [\"CTATTextField\", \"CTATComboBox\"])){\n          //  obj[\"textContent\"] = element.textContent;\n          // }\n\n          if (checkTypes(element, [\"CTATComboBox\"])) {\n            obj['type'] = \"ComboBox\"\n            // if(element.options){\n            //Probably not the best\n            var options = element.firstElementChild.options;\n            var temp = [];\n            for (var i = 0; i < options.length; i++) {\n              temp.push(options[i].text);\n            }\n            obj[\"options\"] = Object.assign({}, temp);\n\n            // }\n          }\n\n          if(!obj['type']){ obj['type'] = \"Component\"}\n          let name = (append_ele ? \"?ele-\" : \"\") + element.id;\n          // console.log(name,append_ele)\n          state_json[name] = obj;\n          count++;\n        }\n      }\n      // add question marks for apprentice\n      // element = jQuery.extend({}, element);\n      // element = jQuery.data(element);\n      // if(element && !jQuery.isEmptyObject(element) && element.CTATComponent){\n      //  console.log(\"ELEEMENT\", element);\n      //  // element = jQuery.data(element.CTATComponent);\n      //  element = element.CTATComponent;\n      //  // if(element.CTATComponent){\n      //    // element.CTATComponent = jQuery.data(element.CTATComponent);\n      //  // }\n      //  console.log(\"KEY \", idx, element.className);\n      //  state_json[\"?ele-\" + idx] = element;\n      //  count++;\n      // }\n\n      // element.component = jQuery.data(element.component);\n\n      // if(element.hasAttribute(\"removeData\") ){\n      //  element.removeData();\n      //  console.log(\"WOOOPS\");\n      // }\n    });\n\n    // Gets lists of elements that are to the left, right and above the current element\n    if (encode_relative) {\n      const elm_list = Object.entries(state_json);\n      // console.log(elm_list);\n\n      var rel_objs;\n      if (!(HTML_PATH in relative_pos_cache)) {\n        rel_objs = {};\n        for (var i = 0; i < elm_list.length; i++) {\n          // console.log(elm_list[i][0])\n          rel_objs[elm_list[i][0]] = {\n            to_left: [],\n            to_right: [],\n            above: [],\n            below: []\n          };\n        }\n\n        for (var i = 0; i < elm_list.length; i++) {\n          for (var j = 0; j < elm_list.length; j++) {\n            if (i != j) {\n              var [a_n, a_obj] = elm_list[i];\n              var [b_n, b_obj] = elm_list[j];\n              if (\n                a_obj.offsetTop > b_obj.offsetTop &&\n                a_obj.offsetLeft < b_obj.offsetLeft + b_obj.offsetWidth &&\n                a_obj.offsetLeft + a_obj.offsetWidth > b_obj.offsetLeft\n              ) {\n                var dist = a_obj.offsetTop - b_obj.offsetTop;\n                rel_objs[a_n][\"above\"].push([b_n, dist]);\n                rel_objs[b_n][\"below\"].push([a_n, dist]);\n              }\n              if (\n                a_obj.offsetLeft < b_obj.offsetLeft &&\n                a_obj.offsetTop + a_obj.offsetHeight > b_obj.offsetTop &&\n                a_obj.offsetTop < b_obj.offsetTop + b_obj.offsetHeight\n              ) {\n                var dist = b_obj.offsetLeft - a_obj.offsetLeft;\n                rel_objs[a_n][\"to_right\"].push([b_n, dist]);\n                rel_objs[b_n][\"to_left\"].push([a_n, dist]);\n\n                // console.log(a_n,b_n,dist)\n              }\n            }\n          }\n        }\n\n        var grab1st = function(x) {\n          return x[0];\n        };\n        var compare2nd = function(x, y) {\n          return x[1] - y[1];\n        };\n        var grabN = function(x, n) {\n          let out = [];\n          for (var i = 0; i < n; i++) {\n            if (i < x.length) {\n              out.push(x[i]);\n            } else {\n              out.push(null);\n            }\n          }\n          return out;\n        };\n        for (var i = 0; i < elm_list.length; i++) {\n          var rel_obj = rel_objs[elm_list[i][0]];\n          // rel_obj[\"below\"] = rel_obj[\"below\"].sort(compare2nd).map(grab1st).join(' ');\n          // rel_obj[\"above\"] = rel_obj[\"above\"].sort(compare2nd).map(grab1st).join(' ');\n          // rel_obj[\"to_right\"] = rel_obj[\"to_right\"].sort(compare2nd).map(grab1st).join(' ');\n          // rel_obj[\"to_left\"] = rel_obj[\"to_left\"].sort(compare2nd).map(grab1st).join(' ');\n          // console.log(elm_list[i], rel_obj[\"to_left\"].sort(compare2nd))\n          rel_obj[\"below\"] =\n            rel_obj[\"below\"].sort(compare2nd).map(grab1st)[0] || \"\";\n          rel_obj[\"above\"] =\n            rel_obj[\"above\"].sort(compare2nd).map(grab1st)[0] || \"\";\n          rel_obj[\"to_right\"] =\n            rel_obj[\"to_right\"].sort(compare2nd).map(grab1st)[0] || \"\";\n          rel_obj[\"to_left\"] =\n            rel_obj[\"to_left\"].sort(compare2nd).map(grab1st)[0] || \"\";\n\n          // rel_obj[\"below\"] = grabN(rel_obj[\"below\"].sort(compare2nd).map(grab1st),2);\n          // rel_obj[\"above\"] = grabN(rel_obj[\"above\"].sort(compare2nd).map(grab1st),2);\n          // rel_obj[\"to_right\"] = grabN(rel_obj[\"to_right\"].sort(compare2nd).map(grab1st),2);\n          // rel_obj[\"to_left\"] = grabN(rel_obj[\"to_left\"].sort(compare2nd).map(grab1st),2);\n        }\n\n        // console.log(rel_objs)\n        relative_pos_cache[HTML_PATH] = rel_objs;\n      } else {\n        rel_objs = relative_pos_cache[HTML_PATH];\n      }\n\n      for (var i = 0; i < elm_list.length; i++) {\n        var obj = state_json[elm_list[i][0]];\n        var rel_obj = rel_objs[elm_list[i][0]];\n        // console.log(rel_obj)\n        // console.log(elm_list[i][0])\n        // console.log(relative_pos_cache[HTML_PATH])\n\n        obj[\"below\"] = rel_obj[\"below\"];\n        obj[\"above\"] = rel_obj[\"above\"];\n        obj[\"to_right\"] = rel_obj[\"to_right\"];\n        obj[\"to_left\"] = rel_obj[\"to_left\"];\n        if (strip_offsets) {\n          delete obj[\"offsetTop\"];\n          delete obj[\"offsetLeft\"];\n          delete obj[\"offsetWidth\"];\n          delete obj[\"offsetHeight\"];\n        }\n\n        state_json[elm_list[i][0]] = obj;\n      }\n    }\n\n    console.log(\"STATE JSON\", state_json);\n    return state_json;\n  }\n\n  // state_update(state){\n\n  // }\n\n  // webview_loaded(message){\n  //   console.log(message)\n  //   var d = message.nativeEvent.data;\n  //   console.log(\"document&:\",d)\n  //   console.log(document.getElementsByClassName('background-initial'))\n  //   // window.document.domain = \"http://0.0.0.0:8000\"\n  // }\n\n  // setRef = webview => {\n  //   this.ctat_webview = webview;\n  // }\n  render() {\n    return (\n      <WebView\n        //title=\"hey\"\n        ///*ref={function(webview) {window.ctat_webview = webview;*/}\n        //                        this.iframe_content = webview.frameRef.contentWindow;\n        //                        console.log(\"THIS\",this)\n        //                        // this.graph = this.iframe_content.CTAT.ToolTutor.tutor.getGraph() || false;\n        //                       console.log(\"MOOP\",webview)}}\n        ref={this.ctat_webview}\n        // style={{ height: 700, width: 400 }}\n        originWhitelist={[\"*\"]}\n        // source={{\"uri\": \"http://0.0.0.0:8000/HTML/fraction_arithmetic.html?question_file=../mass_production/mass_production_brds/AD 5_9_plus_3_7.brd\"}}\n        source={this.state.source}\n        onLoad={this.state.onLoad}\n        // source={{\"html\": \"<!DOCTYPE html><html><head></head><body> HERE IS THE TUTOR... ARE YOU LEARNING YET? </body></html>\"}}\n        // source={{\"html\": \"<? echo file_get_contents('http://0.0.0.0:8000/HTML/fraction_arithmetic.html'); ?>\"}}\n        // injectedJavaScript={\"window.booger = document\"}\n        // onMessage={this.webview_loaded}\n      />\n    );\n  }\n}\n\nconst LOAD_SCREEN =\n  '<!DOCTYPE html> \\\n<html>\\\n<head>\\\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\\\n<style>\\\n.loader {\\\n  border: 16px solid #f3f3f3;\\\n  border-radius: 50%;\\\n  border-top: 16px solid #3498db;\\\n  width: 120px;\\\n  height: 120px;\\\n  -webkit-animation: spin 2s linear infinite; /* Safari */\\\n  animation: spin 2s linear infinite;\\\n  position: absolute;\\\n  left: 50%;\\\n  top: 50%;\\\n  transform: translate(-50%, -50%);*/\\\n}\\\n\\\n/* Safari */\\\n@-webkit-keyframes spin {\\\n  0% { -webkit-transform: rotate(0deg); }\\\n  100% { -webkit-transform: rotate(360deg); }\\\n}\\\n\\\n@keyframes spin {\\\n  0% { transform: rotate(0deg); }\\\n  100% { transform: rotate(360deg); }\\\n}\\\n</style>\\\n</head>\\\n<body>\\\n\\\n<h2>How To Create A Loader</h2>\\\n\\\n<div class=\"loader\"></div>\\\n\\\n</body>\\\n</html>\\\n';\n\nexport default CTAT_Tutor;\n","import Svg, {\n  Circle,\n  Ellipse,\n  G,\n  Text as SvgText,\n  TSpan,\n  TextPath,\n  Path,\n  Polygon,\n  Polyline,\n  Line,\n  Rect,\n  Use,\n  Image,\n  Symbol,\n  Defs,\n  LinearGradient,\n  RadialGradient,\n  Stop,\n  ClipPath,\n  Pattern,\n  Mask,\n  // Filter,\n  // FEGaussianBlur,\n  // FEOffset,\n  // FEMerge,\n  // FEMergeNode,\n} from 'react-native-svg';\n\n/* Use this if you are using Expo\nimport { Svg } from 'expo';\nconst { Circle, Rect } = Svg;\n*/\n\nimport React from 'react';\nimport {\n  Icon,\n  View,\n  Text,\n  StyleSheet,\n  TouchableHighlight,\n  TouchableWithoutFeedback,\n  Platform, \n  // WebView\n  Dimensions\n} from 'react-native';\n\nimport autobind from 'class-autobind';\nimport BezierFit from './c_modules/bezier_fit/bezier_fit'\n// import Seshat from './c_modules/seshat/seshat'\nimport StrokeClassifier from \"./StrokeClassifier\"\n\nconst MAX_STROKE_LENGTH = 512\nconst MIN_DIST = 4.0\n// var stroke_id_counter = 0;\n\nconst get_min = (key,strokes) => Math.min(...Object.values(strokes).map((stroke)=>stroke.bounds[key])) \nconst get_max = (key,strokes) => Math.max(...Object.values(strokes).map((stroke)=>stroke.bounds[key])) \nconst range = (start, end) => {\n  return Array(end - start).fill().map((_, idx) => start + idx)\n}\nconst array_equal = (a,b) => {\n  if (a === b) return true;\n  if (a == null || b == null) return false;\n  if (a.length != b.length) return false;\n  for (var i = 0; i < a.length; ++i) {\n    if (a[i] !== b[i]) return false;\n  }\n  return true;\n}\n\nfunction pick(obj, keys){\n  var out = {}\n  Object.keys(obj).forEach((x) => {if(keys.includes(x)){out[x] = obj[x]}})\n  return out\n}\n\n\nconst DEFAULT_START_STATE = {\n      pen_down : false,\n      strokes : {},\n      active_elements : [],\n      n_strokes : 0,\n      mode : \"loading\",\n      check_button_callback: null,\n      elmUnderPoint : null,\n  };\n\n/////\nexport default class StylusTutor extends React.Component {\n  \n  state = {...DEFAULT_START_STATE, ...{strokes:{}} }\n\n  constructor(props){\n    super(props);\n    autobind(this)\n\n    // if(!this.props.gridWidth) this.props.gridWidth = 100;\n    // if(!this.props.groupMode) this.props.groupMode = \"grid\"\n      \n    \n    this.BezierFit = new BezierFit();\n      this.BezierFit.promise.then(() => {\n        this.fitCurve = this.BezierFit.fitCurve\n        this.groupStrokes = this.BezierFit.groupStrokes\n        this.fitCurve([[1,2],[3,4],[5,6],[7,8]])\n    })\n\n    this.StrokeClassifier = new StrokeClassifier();\n    this.StrokeClassifier.promise.then(() => {\n      this.recognize_symbol = this.StrokeClassifier.recognize_symbol\n    })\n\n    // this.Seshat = new Seshat();\n    //   this.Seshat.promise.then(() => {\n    //     this.recognize_symbol = this.Seshat.recognize_symbol\n    //     // this.recognize_symbol([\n    //     //     [\n    //     //     [200,200],\n    //     //     [210,210],\n    //     //     [220,220],\n    //     //     [230,230],\n    //     //     [240,240],\n    //     //     [250,250],\n    //     //     ],\n    //     //     [\n    //     //     [250,200],\n    //     //     [240,210],\n    //     //     [230,220],\n    //     //     [220,230],\n    //     //     [210,240],\n    //     //     [200,250],\n    //     //     ],\n    //     //     ])\n    //     // console.log(\"I HAVE COMPLETED\")\n    //     // this.groupStrokes = this.BezierFit.groupStrokes\n    //     // this.fitCurve([[1,2],[3,4],[5,6],[7,8]])\n    // })\n\n\n    window.setMode = (mode) => {this.setState({mode : mode })}\n\n    this.where_colors = [  \"darkorchid\",  \"#ff884d\",  \"#52d0e0\", \"#feb201\",  \"#e44161\", \"#ed3eea\", \"#2f85ee\",  \"#562ac6\", \"#cc24cc\"]\n    // this.color_map = {\n    //   \"EXAMPLE\" : \"dodgerblue\",\n    //   \"CORRECT\" : \"limegreen\",\n    //   \"INCORRECT\" : \"red\",\n    //   \"HIGHLIGHT\" : \"darkorchid\",\n    //   \"START_STATE\" : \"darkcyan\",\n    //   \"DEFAULT\" : \"black\"\n    //   };\n    this.mode_to_color = {\n      \"set_start_state\" : \"START_STATE\",\n      \"demonstrate\" : \"EXAMPLE\",\n      \"debug\" : \"gray\"\n    }\n    this.current_foci = [];\n    this.start_state_history = [];\n    this.highlighted_elements = [];\n    this.elements = {};\n    this.groups = [];\n    // this.getEvaluatable = this.getEvaluatable.bind(this)\n    // this.evaluate = this.evaluate.bind(this)\n    // this.setStartState = this.setStartState.bind(this)\n    // this.undoStroke = this.undoStroke.bind(this)\n    // this.penDown = this.penDown.bind(this)\n    // this.penUp = this.penUp.bind(this)\n    // this.penMove = this.penMove.bind(this)\n\n    // this.setState({\"mode\" : (props.mode || \"set_start_state\")})\n    \n    // this.onStartShouldSetResponder = (e) => true;\n    // this.onMoveShouldSetResponder = (e) => true;\n    // this.onResponderStart = this.penDown.bind(this);\n    // this.onResponderRelease = this.penUp.bind(this);\n    // this.onResponderMove = this.penMove.bind(this);\n    // this.onMouseDown = this.penDown.bind(this);\n    // this.onPress= this.penDown.bind(this);\n    // this.onMouseUp = this.penUp.bind(this);\n    // this.onResponderStart = this.onResponderStart.bind(this);\n    // this.penDown = this.penDown.bind(this);\n    // this.penUp = this.penUp.bind(this);\n\n\n  }\n\n   onLayout = (e) => {\n    this.setState({\n      width: e.nativeEvent.layout.width,\n      height: e.nativeEvent.layout.height,\n      x: e.nativeEvent.layout.x,\n      y: e.nativeEvent.layout.y\n    })\n  }\n\n  componentDidMount(){\n    console.log(\"PROPSMODE\", this.props.mode)\n    this.setState({\"mode\" : this.props.mode || null})\n  }\n\n  enterSetStartStateMode(){\n    if(this.state.mode != \"debug\"){\n      this.setState({mode : \"set_start_state\",\n                     check_button_callback : this.setStartState })  \n    }\n    console.log(\"MODE!\", this.state.mode)\n  }\n\n  exitSetStartStateMode(){\n    let L = this.state.n_strokes+this.state.pen_down\n    let new_strokes = {}\n    for (var i=0; i<L;i++){\n      var stroke = this.state.strokes[i]\n      if(stroke['evaluation'] == \"START_STATE\"){\n        stroke['evaluation'] = \"TUTOR\"\n      }\n      new_strokes[i] = stroke\n    }\n    this.setState({strokes : new_strokes,mode : null })\n  }\n\n\n  enterFeedbackMode(){\n    this.setState({mode : \"feedback\",\n                   check_button_callback : this.demonstrate,\n                   feedback_start_stroke_id : this.state.n_strokes })  \n  }\n\n  exitFeedbackMode(){\n    this.setState({mode : null ,\n                   check_button_callback : null,\n                   feedback_start_stroke_id : null })\n  }\n\n  getCurrentFoci(){\n    if(this.current_foci){\n      return this.current_foci.map((elm) => elm.id)\n    }else{\n      return []\n    }\n  }\n\n  enterFociMode(){\n    this.unhighlightAll();\n    this.current_foci = []\n    this.setState({mode : \"foci\" }) \n    \n  }\n\n  exitFociMode(){\n    this.unhighlightAll();\n    this.current_foci = []\n    this.setState({mode : null })\n  }\n\n\n  printFeedback(context, event) {\n    var nl = context.network_layer;\n    var staged_SAI = context.staged_SAI;\n\n    var type = context.action_type;\n    // var reward = staged_SAI.reward\n    if (!context.feedback_map || Object.keys(context.feedback_map).length === 0) {\n      if (type == \"ATTEMPT\") {\n        type = staged_SAI.reward > 0 ? \"CORRECT\" : \"INCORRECT\";\n      }\n\n      // var color = color_map[type]\n      var inps =\n        staged_SAI.inputs[\"value\"] != null ? staged_SAI.inputs[\"value\"] : \"\";\n\n      nl.term_print(type + \": \" + staged_SAI.selection + \" -> \" + inps, type);\n    } else {\n      for (var index in context.feedback_map) {\n        var skill_app = context.skill_applications[index];\n        var type = context.feedback_map[index].toUpperCase();\n        // var color = color_map[type]\n        var inps =\n          skill_app.inputs[\"value\"] != null ? skill_app.inputs[\"value\"] : \"\";\n        nl.term_print(type + \": \" + skill_app.selection + \" -> \" + inps, type);\n      }\n    }\n  }\n\n\n\n  getCurrentFoci(){\n    if(this.current_foci){\n      return this.current_foci.map((elm) => elm.id);\n    }else{\n      return []\n    }\n  }\n  // setStartState(){\n  //   let L = this.state.n_strokes+this.state.pen_down\n  //   let new_strokes = {}\n  //   for (var i=0; i<L;i++){\n  //     var stroke = this.state.strokes[i]\n  //     if(stroke['evaluation'] == \"START_STATE\"){\n  //       stroke['evaluation'] = \"TUTOR\"\n  //     }\n  //     new_strokes[i] = stroke\n  //   }\n  //   this.setState({strokes : new_strokes,mode : \"authoring\" })\n\n  \n\n  loadProblem(context){\n    this.clear()\n    const promise = new Promise((resolve, reject) =>\n     {//this.setState({\"mode\" : \"set_start_state\"})\n      resolve({ updateContext: {} })})\n    return promise\n  }\n\n  clear(){\n    this.setState({...DEFAULT_START_STATE, ...{strokes:{},active_elements:[]}})\n    this.current_foci = [];\n    this.start_state_history = [];\n    this.highlighted_elements = [];\n    this.elements = {};\n    this.groups = [];\n  }\n\n  lockElement(name){\n    var elm = this.resolve_elm(elm)\n    if(!elm){return;}\n    elm.locked = true\n  }\n\n  unlockElement(name){\n    var elm = this.resolve_elm(elm)\n    if(!elm){return;}\n    elm.locked = false\n  }\n\n  colorElement(name,type){\n    alert(\"NOT IMPLEMENTED\")\n    // var stroke = this.state.strokes[name]\n    // stroke.color = this.color_map[type] || type\n    // this.setState({strokes :this.state.strokes})\n  }\n\n  resolve_elm(elm){\n    if(typeof(elm) == \"string\"){\n      return elm in this.elements ? this.elements[elm] : null\n    }else{\n      return elm\n    }\n  }\n\n  highlightElement(elm,colorIndex=0){\n    // if(!elm) return\n    // console.log(elm)\n    // var stroke_ids;\n\n    elm = this.resolve_elm(elm)\n    if(elm == null){return;}\n    \n    if(typeof(elm) != \"object\" || elm.type == \"strokes\"){\n      // if(typeof(elm) == \"object\"){\n      var stroke_ids = elm.stroke_ids == undefined ? [elm] : elm.stroke_ids\n      // }\n\n      for(var i=0; i< stroke_ids.length; i++){\n        var s_id = stroke_ids[i]\n        var stroke = this.state.strokes[s_id]\n        stroke.highlight = colorIndex;\n        var index = this.highlighted_elements.indexOf(s_id)\n        if(index == -1){\n          this.highlighted_elements.push(s_id)  \n        }\n      }\n    }else{\n      elm.highlight = colorIndex\n      var index = this.highlighted_elements.indexOf(elm.id)\n      if(index == -1){\n        this.highlighted_elements.push(elm.id)  \n      }\n    }\n  }\n\n  unhighlightElement(elm){\n    // if(!elm) return\n\n\n\n    elm = this.resolve_elm(elm)\n    console.log(\"UNHIGHTLIGHT\",elm.id,elm,typeof(elm))\n    if(elm == null){return;}\n    \n    if(typeof(elm) != \"object\" || elm.type == \"strokes\"){\n      var stroke_ids = elm.stroke_ids == undefined ? [elm] : elm.stroke_ids\n      for(var i=0; i< stroke_ids.length; i++){\n        var s_id = stroke_ids[i]\n        var stroke = this.state.strokes[s_id]\n        stroke.highlight = null\n        var index = this.highlighted_elements.indexOf(s_id)\n        if(index > -1){\n          this.highlighted_elements.splice(index,1)  \n        }\n      }\n    }else{\n      elm.highlight = null\n      var index = this.highlighted_elements.indexOf(elm.id)\n      if(index > -1){\n        this.highlighted_elements.splice(index,1)  \n      }\n    }\n  }\n\n  clearElement(name){\n    //TODO\n  }\n\n  highlightSAI(sai){\n    // console.log(\"HIGHLIGHT SAI\")\n    if(sai.mapping){\n      var index = 0\n      for (var var_str in sai.mapping){\n          var elem_str = sai.mapping[var_str]\n          var colorIndex = 0\n          if(var_str != \"?sel\"){\n              colorIndex = 1 + ((index-1) % (this.where_colors.length-1));\n          }\n          this.highlightElement(elem_str,colorIndex)\n          index++\n      }\n    }else{\n      alert(\"IDK WHAT THIS IS\")\n    }\n  }\n  \n\n  unhighlightAll(){\n    for(var elem_str of [...this.highlighted_elements]){\n      this.unhighlightElement(elem_str);\n    }\n  }\n\n  getState(){\n    var out = {}\n\n\n    for (let [id, elm1] of Object.entries(this.elements)) {\n    // for(var i=0; i < this.elements.length; i++){\n      // var elm1 = this.elements[i]\n      var elmobj;\n\n      if(this.props.groupMode == \"grid\"){\n        var value = elm1.value != null ? elm1.value.toString() : null\n        elmobj = {\n          id: \"e\" + elm1.g_coords.x + \"_\" + elm1.g_coords.y,//elm1.id,\n          type : \"Symbol\",\n          value : value,\n          filled : value != \"\" && value != null ? true : false\n        }\n        var c1 = elm1.g_coords\n        var [above,below,to_right,to_left] = [null,null,null,null];\n        for (let [id2, e2] of Object.entries(this.elements)) {\n          // var e2 = this.elements[j]\n          var c2 = e2.g_coords\n          if(c2.x == c1.x-1){to_left = e2.id}\n          if(c2.x == c1.x+1){to_right = e2.id}\n          if(c2.y == c1.y-1){above = e2.id}\n          if(c2.y == c1.y+1){below = e2.id}\n        }\n        elmobj = {...elmobj, ...{\"to_left\" : to_left, \"to_right\" : to_right,\n                    \"above\" : above, \"below\" : below}}\n      }\n\n      out[elmobj.id] = elmobj\n    }\n    const mW = this.state.width / this.props.gridWidth\n    const mH = this.state.height / this.props.gridWidth\n    if(this.props.groupMode == \"grid\"){\n      for(var i=0; i < mW; i++){\n        for(var j=0; j < mH; j++){\n          var id = \"e\" + i + \"_\" + j\n          if(!(id in out)){\n            out[id] = {\n              id : id,\n              type : \"Symbol\",\n              value : \"\",\n              filled : false\n            }\n          }\n        }\n      }\n      const ts = (x) => x.toString()\n      for(var i=0; i < mW; i++){\n        for(var j=0; j < mH; j++){\n          var id =\"e\" + ts(i) + \"_\" + ts(j)           \n          out[id][\"to_left\"] = (i-1 >= 0) ? (\"e\" + ts(i-1) + \"_\" + ts(j))   : null\n          out[id][\"to_right\"] = (i+1 < mW) ? (\"e\" + ts(i+1) + \"_\" + ts(j))  : null\n          out[id][\"above\"] = (j-1 >= 0) ? (\"e\" + ts(i) + \"_\" + ts(j-1)) : null\n          out[id][\"below\"] = (j+1 < mH) ? (\"e\" + ts(i) + \"_\" + ts(j+1)) : null\n        }\n      }\n    }\n    out['done'] = {'id': \"done\", type:'OverlayButton'}\n    console.log(\"STATE:\",out)\n    return out\n  }\n\n  clearProposedSAI(){\n    if(this.proposed_SAI){\n        // this.clearElement(this.proposed_SAI.selection)\n        // this.unlockElement(this.proposed_SAI.selection.replace('?ele-',\"\"))\n        this.unhighlightAll()\n        this.proposed_SAI = null;\n        delete this.elements[this.staged_element];\n    }\n  }\n\n  proposeSAI(sai){\n    console.log(\"PROPOSE\",sai)\n    this.clearProposedSAI()\n    this.proposed_SAI = {...sai}\n    this.stageSAI(sai)\n    this.highlightSAI(sai)\n\n    this.setState({active_elements : Object.keys(this.elements)})\n  }\n\n  stageSAI(sai){\n    //TODO\n    \n    var [gx,gy] = sai.selection.slice(1).split(\"_\").map(x => Number(x))\n    console.log(\"STAGE\",sai,gx,gy)\n    var [x,y] = [this.props.gridWidth * (gx+.5),this.props.gridWidth * (gy-.2)]\n    var width = this.props.gridWidth * .8\n    var elm = { \n      id : sai.selection,\n      g_coords: {x: gx,y: gy},\n      value : sai.inputs['value'],\n      type : 'text',\n      x : x,\n      y : y+this.props.gridWidth,\n      bounds : {\"minX\":x-width*.5, \"minY\":y, \"maxX\":x+width*.5, \"maxY\":y+width},\n      fontSize : Math.floor(this.props.gridWidth * .8)\n    }\n    this.elements[elm.id] = elm;\n    this.staged_element = elm.id;\n\n  }\n\n  confirmProposedSAI(){\n    console.log(\"confirmed\",this.proposed_SAI, this.highlighted_elements)\n    if(this.proposed_SAI){\n      this.unhighlightAll()\n      this.proposed_SAI = null  \n    }\n    this.setState() //Force rerender\n  }\n\n\n  penDown(e){\n    if(this.state.mode == \"loading\"){\n      return\n    }\n    if(this.state.mode == \"foci\"){\n      this.mouseDown(e)\n      return\n    }\n    console.log(\"HERE\",typeof(e.target.className),e.target.className.baseVal == \"svg_canvas\" || false)\n    console.log(\"PENDOWN\")\n    if(e.target.className.baseVal == \"svg_canvas\" || e.target.parentNode.className.baseVal == \"svg_canvas\"){\n      var strokes = this.state.strokes\n      var L = Object.keys(strokes).length\n      strokes[L] = {\"id\" : L}\n      strokes[L].points_str = e.clientX.toString()+\",\"+e.clientY.toString()\n      strokes[L].points = [[e.clientX,e.clientY]]\n      strokes[L].bounds = {\"minY\": e.clientY, \"maxY\":e.clientY, \"minX\":e.clientX, \"maxX\" :e.clientX }\n      console.log(\"MODE\",this.state.mode)\n      if(this.state.mode == \"set_start_state\"){\n        strokes[L]['evaluation'] = \"START_STATE\" \n      }else{\n        strokes[L]['evaluation'] = \"ATTEMPT\" \n      }\n      // strokes.push()\n      this.setState({pen_down : true,strokes:strokes});\n    }\n  }\n  snapStrokesToGrid(strokes){\n    \n\n    var grid_assignments = {}\n    var gridWidth = this.props.gridWidth\n    // console.log(\"GW\",this.props.gridWidth)\n\n    // console.log(\"strokes\", strokes)\n    for (var s_id in strokes){\n      var stroke = strokes[s_id]\n      // console.log(\"stroke\", stroke)\n      var {minX,maxX,minY,maxY} = stroke.bounds\n      var min_i = Math.floor(minX/gridWidth) \n      var max_i = Math.ceil(maxX/gridWidth)\n      var min_j = Math.floor(minY/gridWidth) \n      var max_j = Math.ceil(maxY/gridWidth)\n      if(maxX-minX > 1.5*gridWidth || maxY-minY > 1.5*gridWidth){\n        continue //Skip objects that span many gridlines\n      }\n      // console.log(\"MMM\",min_i,max_i,min_j,max_j)\n      var [b_i, b_j, b_area] = [-1, -1, 0.0]\n      for (var i=min_i; i < max_i; i++){\n        for (var j=min_j; j < max_j; j++){\n          var w = (Math.min(maxX,(i+1)*gridWidth) - Math.max(minX,i*gridWidth)) + 1\n          var h = (Math.min(maxY,(j+1)*gridWidth) - Math.max(minY,j*gridWidth)) + 1\n          var area = w * h\n          // console.log(\"AREA\", i, j,area, s_id)\n          if(area > b_area){\n            [b_area, b_i, b_j] = [area, i, j]\n          }\n        }\n      }\n      var b_str = b_i + \"_\" + b_j\n      var a = grid_assignments[b_str] || []\n      a.push(parseInt(s_id))\n      grid_assignments[b_str] = a      \n    }\n    // console.log(\"GRID ASSIGNMENTS\", grid_assignments)\n    return [Object.values(grid_assignments), grid_assignments]\n  }\n\n  removeElement(stroke_ids){\n    var elm;\n    for (let [id, e] of Object.entries(this.elements)) {\n      if(e.stroke_ids.length == stroke_ids.length){\n        var ok = true\n        for (var j = 0; j < e.stroke_ids.length; j++) {\n          if (e.stroke_ids[j] !== stroke_ids[j]){\n            ok = false; break;\n          }\n        }\n        if(ok){ delete this.elements[id];/*this.elements.splice(i,1);*/ return elm }\n      }\n    }\n\n    this.setState({active_elements : Object.keys(this.elements)})\n    return undefined\n  }\n  addElement(stroke_ids, extra_info=null){\n    // this.elements = this.elements || []\n    // for (var i=0; i < groups.length; i++){\n    var elm = {}\n    elm.stroke_ids = stroke_ids\n    elm.id = \"ie\" + stroke_ids.join(\"_\")\n    elm.strokes = stroke_ids.map((indx)=>this.state.strokes[indx])\n    // console.log(\"CLOOOO\",elm.strokes,Object.values(elm.strokes))\n    // console.log(\"CLOOOO\",Object.values(elm.strokes).map((stroke)=>stroke.bounds[\"minX\"]))\n    elm.bounds = {minX: get_min(\"minX\",elm.strokes),\n                  maxX: get_max(\"maxX\",elm.strokes),\n                  minY: get_min(\"minY\",elm.strokes),\n                  maxY: get_max(\"maxY\",elm.strokes)}\n    elm.type = 'strokes'              \n    \n\n    if(extra_info && this.props.groupMode == \"grid\"){\n      for(var loc_str in extra_info){\n        // console.log(\"MEEP\", extra_info[loc_str],stroke_ids)\n        if(array_equal(extra_info[loc_str],stroke_ids)){\n          var coords = loc_str.split(\"_\")\n          elm.g_coords = {\"x\" : parseInt(coords[0]), \"y\" : parseInt(coords[1])} \n        }\n      }\n      elm.id = \"e\" + elm.g_coords.x.toString() + \"_\" + elm.g_coords.y.toString()\n    }\n    console.log(\"BEFORE\", Object.keys(this.elements), elm)\n    this.elements[elm.id] = elm;\n    console.log(\"AFTER\",this.elements,Object.keys(this.elements))\n\n    this.setState({active_elements : Object.keys(this.elements)})\n    // }\n    // console.log(this.groupStrokes(this.state.strokes))\n    return elm\n  }\n\n  _elemsFromStrokes(strokes){\n    var elem_indxs = new Set()\n    for(var i=0; i < strokes.length; i++){\n      var s = strokes[i]\n      var stroke = typeof s != \"number\" ? s : this.state.strokes[s]\n      for (let [id, elm] of Object.entries(this.elements)) {\n      // for(var j=0; j < this.elements.length; j++){\n        // var elm = this.elements[j]\n        if(elm.type == 'strokes' && elm.stroke_ids.indexOf(stroke.id) != -1){\n          elem_indxs.add(id)\n        }  \n      }\n    }\n    return Array.from(elem_indxs).map((e_id)=>this.elements[e_id])\n  }\n\n  _groupDiff(old_g,new_g){\n    let old_s = old_g.map(x => x.join(\",\"))\n    let new_s = new_g.map(x => x.join(\",\"))\n\n    let added_s = new_s.filter(x => !old_s.includes(x));\n    let removed_s = old_s.filter(x => !new_s.includes(x));\n\n    let added = added_s.map(x => x.split(\",\").map(x => parseInt(x)))\n    let removed = removed_s.map(x => x.split(\",\").map(x => parseInt(x)))\n    // console.log(added,removed)\n    return [added, removed]\n  }\n\n  async penUp(e){\n    console.log(\"penUP\")\n    if(this.state.mode == \"loading\"){\n      return\n    }\n    if(this.state.mode == \"foci\"){\n      this.mouseUp(e)\n      return\n    }\n    console.log(\"UP\",this.state.pen_down,Object.keys(this.elements))\n    if(this.state.pen_down){\n      this.setState({pen_down : false,n_strokes: this.state.n_strokes+1});\n\n    }\n    if(this.props.groupMode == \"grid\"){\n      var [groups, extra_info] = this.snapStrokesToGrid(this.state.strokes)\n    }else{\n      var [groups, extra_info] = this.groupStrokes(this.state.strokes)\n    }\n\n\n    var [added, removed] = this._groupDiff(this.groups || [],groups)\n\n    // if(this.props.groupMode == \"grid\"){\n    //   var groups = this.snapStrokesToGrid(this.state.strokes)\n    // }else{\n    //   var groups = this.groupStrokes(this.state.strokes)\n    // }\n    this.groups = groups\n\n    // console.log(\"GROUPS\", groups)\n\n    // this.removeElement(group)\n    \n    for(var i=0; i < removed.length; i++){\n      this.removeElement(removed[i])\n    }\n\n    for(var i=0; i < added.length; i++){\n      let group = added[i]\n      let elm = this.addElement(group, extra_info)\n      // elm.symbol_probs = this.recognize_symbol(elm.strokes)\n      console.time(\"recognize_symbol\")\n      elm.symbol_probs = await this.recognize_symbol(elm.strokes)\n\n      //Just take numbers\n      elm.symbol_probs = pick(elm.symbol_probs,['1','2','3','4','5','6','7','8','9','0','+','-'])  \n\n\n      console.timeEnd(\"recognize_symbol\")\n\n      console.log(\"Recognize Symbol: \")\n      Object.entries(elm.symbol_probs).sort((a,b)=>b[1]-a[1]).forEach(function([sym,prob]){\n        if(elm.value == undefined){elm.value = sym}\n        console.log(sym.padStart(12),\":\", prob.toFixed(3))\n      })\n    }\n\n  }\n\n  penMove(e){\n    // console.log(e)\n    // var X,Y\n    // console.log(e.type)\n    // if(e.type == \"mousemove\"){\n    //   X,Y = \n    // }\n\n    // console.log(this.state.pen_down)\n    if(this.state.mode == \"foci\"){\n      this.mouseMove(e)\n      return\n    }\n    if(this.state.pen_down){\n      var strokes = this.state.strokes \n      var stroke = strokes[this.state.n_strokes]\n      var p = [e.clientX,e.clientY]\n      var lp = stroke.points[stroke.points.length-1]\n      if(e.clientX < stroke.bounds.minX){stroke.bounds.minX = e.clientX}\n      if(e.clientX > stroke.bounds.maxX){stroke.bounds.maxX = e.clientX}\n      if(e.clientY < stroke.bounds.minY){stroke.bounds.minY = e.clientY}\n      if(e.clientY > stroke.bounds.maxY){stroke.bounds.maxY = e.clientY}\n      // console.log(\"DIST\", (p[0]-lp[0])**2 + (p[1]-lp[1])**2)\n\n      if( (p[0]-lp[0])**2 + (p[1]-lp[1])**2 >= MIN_DIST*MIN_DIST && stroke.points.length < MAX_STROKE_LENGTH){\n        stroke.points.push(p)\n        stroke.points_str += \" \" + e.clientX.toString()+\",\"+e.clientY.toString()\n        stroke.bezier_splines = this.fitCurve(stroke.points)\n\n\n        this.setState({\"strokes\":strokes})\n        // var evt = e.nativeEvent;\n        // console.log(\"BEZ\",stroke.bezier_splines);  \n      }\n    }\n  }\n\n  mouseMove(e){\n    var ele = this.getElementUnderPoint(e.clientX,e.clientY)\n    // var id = ele ? ele.id : null\n    this.setState({elmUnderPoint : ele})\n  }\n\n  mouseDown(e){\n    console.log(\"MOUSE DOWN\")\n    var ele = this.getElementUnderPoint(e.clientX,e.clientY)\n    // var id = ele ? ele.id : null\n    this.setState({mouseDownElm : ele,\n                    elmUnderPoint : ele})\n  }\n\n  mouseUp(e){\n    console.log(\"MOUSE UP\")\n    var ele = this.getElementUnderPoint(e.clientX,e.clientY)\n    // var id = ele ? ele.id : null\n    if(ele && ele == this.state.mouseDownElm){\n      var indx = this.current_foci.indexOf(ele)\n      if(indx == -1){\n          this.current_foci.push(ele)\n          this.highlightElement(ele,0)\n      }else{\n          this.current_foci.splice(indx,1)\n          this.unhighlightElement(ele)\n      }\n    }\n    // console.log(this.current_foci)\n    this.setState({mouseDownElm : null,\n                    elmUnderPoint : ele})\n  }\n\n  getStokeUnderPoint(x,y,padding=10){\n    var strokeCandidates = []\n    for (let i=0; i<this.state.n_strokes;i++){\n        var stroke = this.state.strokes[i]\n        // console.log(stroke.bounds.minX,stroke.bounds.minY,stroke.bounds.maxX,stroke.bounds.maxY)\n        if(stroke &&\n           x > stroke.bounds.minX-padding && x < stroke.bounds.maxX+padding &&\n           y > stroke.bounds.minY-padding && y < stroke.bounds.maxY+padding){\n          strokeCandidates.push(stroke)\n        }\n    }\n    if(strokeCandidates.length == 0){return null};\n    var minDist = Number.MAX_VALUE;\n    var minStroke;\n    for(let stroke of strokeCandidates){\n      for(let i=0; i<stroke.points.length;i++){\n        let p = stroke.points[i]\n        var d = (x-p[0])**2 + (y-p[1])**2\n        if(d < minDist){\n          minDist = d\n          minStroke = stroke\n        }\n      }\n    }\n    return minStroke\n  }\n\n  getElementUnderPoint(x,y,padding=10){\n    for (let [id, elm] of Object.entries(this.elements)) {\n      console.log(\"ET:\",id, elm)\n      if( x > elm.bounds.minX-padding && x < elm.bounds.maxX+padding &&\n          y > elm.bounds.minY-padding && y < elm.bounds.maxY+padding){\n        return elm        \n      }\n    }\n    return null\n\n  }\n\n  undoStroke(e){\n    const strokes = this.state.strokes\n    if(this.state.n_strokes > 0){\n      const last_ev = strokes[this.state.n_strokes-1]['evaluation']\n      if(last_ev == \"INCORRECT\" || last_ev == \"ATTEMPT\" || last_ev == \"START_STATE\"){\n        delete strokes[this.state.n_strokes-1]\n        this.setState({\"strokes\" : strokes, \"n_strokes\" : this.state.n_strokes-1})\n      }\n    }\n\n  }\n\n\n\n  demonstrate(){\n    var L = this.state.n_strokes\n    var start = this.state.feedback_start_stroke_id\n    var d_strokes = range(start,L).map(x => this.state.strokes[x])\n\n    for(var i=0; i < d_strokes.length; i++){\n      d_strokes[i].evaluation = \"DEMONSTRATE\"\n    }\n\n    var elems = this._elemsFromStrokes(d_strokes)\n    if(elems.length > 0){\n      var e = elems[0];  \n      this.props.interactions_service.send({\n        type: \"DEMONSTRATE\",\n        data: { \n                selection : e.id,\n                action : \"WriteExpr\",\n                inputs : {'value' : e.value},\n                reward: 1 \n              }\n      });\n    }\n    \n\n\n    \n    // } else if (type == \"ATTEMPT\") {\n    //   console.log(\"SEND ATTEMPT\", sai);\n    //   this.props.interactions_service.send({\n    //     type: \"ATTEMPT\",\n    //     data: { ...sai }\n    //   });\n  }\n\n  pressDone(){\n    this.props.interactions_service.send({\n        type: \"DEMONSTRATE\",\n        data: { selection:\"done\",\n                action : \"ButtonPressed\",\n                inputs : {value : -1},\n                reward: 1 \n              }\n      });\n  }\n\n  getEvaluatable(){\n    let i=0;\n    let L = this.state.n_strokes+this.state.pen_down\n    for (; i<L;i++){\n      let ev = this.state.strokes[i]['evaluation'];\n      if(ev == \"ATTEMPT\" || ev == \"INCORRECT\"){\n          break\n      }\n    }\n    console.log(\"hee\", i)\n    let out = {}\n    for (; i<L;i++){\n      out[i] = this.state.strokes[i]\n    }\n\n    return out\n  }\n\n  evaluate(){\n    let ev_strokes = {};\n    if(this.props.evaluate){\n      ev_strokes = this.props.evaluate(this.getEvaluatable())\n    }else{\n      ev_strokes = this.getEvaluatable()\n      // console.log(\"bleep\", ev_strokes)\n      // for (let i=0; i<ev_strokes.length;i++){\n      for(var i in ev_strokes){\n        ev_strokes[i]['evaluation'] = \"INCORRECT\"\n      }\n    }\n    // console.log(\"bloop\", ev_strokes)\n    this.setState({strokes: {...this.state.strokes,...ev_strokes}})\n  }\n\n\n\n  render() {\n    // console.log(\"RERENDER\",[...this.highlighted_elements])\n    // console.log(this.state.strokes)\n    let svg_content = []\n    // svg_content.push( <Circle cx={300} cy={200} r=\"50\" fill=\"red\" />);\n    for (let i=0; i<this.state.n_strokes+this.state.pen_down;i++){\n\n        var stroke = this.state.strokes[i]\n        // if(this.state.mode != \"debug\"){\n                 \n        // }else{\n        var elmUnderCursor =this.state.elmUnderPoint\n        var elmUnderCursor_strokes = elmUnderCursor ? elmUnderCursor.stroke_ids || [] : [] \n        var strokeWidth = this.state.mode == \"debug\" ? \".5\" :(elmUnderCursor_strokes.indexOf(stroke.id) != -1  ?  \"4\": \"3\")\n        if(stroke.highlight != null){\n          svg_content.push(<Polyline\n            points= {stroke['points_str']} fill=\"none\"\n            stroke={this.where_colors[stroke.highlight]}\n            strokeWidth={strokeWidth*3 +1}\n            strokeOpacity={0.15}\n            strokeLinecap='round'\n          />);   \n          svg_content.push(<Polyline\n            points= {stroke['points_str']} fill=\"none\"\n            stroke={this.where_colors[stroke.highlight]}\n            strokeWidth={strokeWidth*2}\n            strokeOpacity={0.4}\n            strokeLinecap='round'\n          />);   \n        }\n\n        if(stroke.points.length > 1){\n          svg_content.push(<Polyline\n            points= {stroke['points_str']} fill=\"none\"\n            stroke={pen_color_map[stroke['evaluation']] || pen_color_map[\"DEFAULT\"]}\n            strokeWidth={strokeWidth}\n            strokeLinecap='round'\n          />);   \n        }else{\n          svg_content.push(<Circle\n            cx= {stroke.points[0][0]}\n            cy= {stroke.points[0][1]}\n            r={strokeWidth*1.5}\n            fill = {pen_color_map[stroke['evaluation']] || pen_color_map[\"DEFAULT\"]}\n          />);   \n        }\n        \n        // var curve_str = \"\";\n        if(this.state.mode == \"debug\"){\n          var splines = stroke['bezier_splines'] || [];\n          var circles = []\n          for (let j=0; j<splines.length;j++){\n            var b = splines[j];\n          // for (const b of splines){\n            var curve_str = \"M\"+b[0]+\" \"+b[1]+\" C\"+b[2]+\" \"+b[3]+\" \"+b[4]+\" \" +b[5]+\" \"+b[6]+\" \"+b[7]+\" \";\n            svg_content.push(<Path\n              d= {curve_str}\n              fill=\"none\"\n              stroke={'blue'}\n              strokeWidth=\"3\"\n              strokeLinecap='round'\n            />);\n\n            circles.push( <Circle cx={b[0]+\"\"} cy={b[1]+\"\"} r=\"3\" fill=\"red\" />);\n          }\n          \n          var points = stroke['points'] || [];\n          for (let j=0; j<points.length;j++){\n            var p = points[j];\n            circles.push( <Circle cx={p[0]+\"\"} cy={p[1]+\"\"} r=\"1\" fill=\"red\" />);\n          }\n          svg_content = svg_content.concat(circles);   \n\n          \n        }\n    }\n\n    var winWidth = this.state.width//Dimensions.get(\"window\").width\n    var winHeight = this.state.height//Dimensions.get(\"window\").height\n    var gridWidth = this.props.gridWidth || 100\n    for (let i=0; i<winWidth/gridWidth;i++){\n      svg_content.push(<Polyline\n        points= {i*gridWidth+\",\"+\"0\"+\" \"+i*gridWidth+\",\"+winHeight}\n        fill=\"none\"\n        stroke={'gray'}\n        strokeWidth=\".5\"\n        strokeOpacity={0.4}\n      />);\n    }\n\n    for (let i=0; i<winHeight/gridWidth;i++){\n      svg_content.push(<Polyline\n        points= {\"0\"+\",\"+i*gridWidth+\" \"+winWidth+\",\"+i*gridWidth}\n        fill=\"none\"\n        stroke={'gray'}\n        strokeWidth=\".5\"\n        strokeOpacity={0.4}\n      />);\n    }\n    // console.log(\"svg_content\",svg_content)\n\n    // for (let j=0; j<10;j++){\n        \n    // }\n\n    // svg_content.push(<SvgText x={100} y={100}\n    //                                  fontSize={80}\n    //                                  stroke={this.where_colors[2]}\n    //                                  strokeOpacity={0.15}\n    //                                  strokeWidth={3*(80.0/40.0) + 1}\n    //                         > {7} </SvgText>);  \n    // svg_content.push(<SvgText x={100} y={100}\n    //                                  fontSize={80}\n    //                                  stroke={this.where_colors[2]}\n    //                                  strokeOpacity={0.45}\n    //                                  strokeWidth={2*(80.0/40.0)}\n    //                         > {7} </SvgText>);  \n    // svg_content.push(<SvgText x={100} y={100} fontSize={80}\n                            // > {42} </SvgText>);\n    // var elems = this.elements || {};\n    // for (let j=0; j<elems.length;j++){\n    for (let [id, elm] of Object.entries(this.elements)) {\n       var b = elm.bounds;\n        if(elm.id == \"done\"){continue}\n        if(elm.type == 'text'){\n          if(elm.highlight != null){\n            svg_content.push(<SvgText x={elm.x} y={elm.y}\n                                     fontSize={elm.fontSize}\n                                     stroke={this.where_colors[elm.highlight]}\n                                     strokeOpacity={0.15}\n                                     strokeWidth={elm.fontSize/14.0 + 1}\n                                     textAnchor=\"middle\"\n                            > {elm.value.toString()} </SvgText>);  \n            svg_content.push(<SvgText x={elm.x} y={elm.y} \n                                    fontSize={elm.fontSize}\n                                     stroke={this.where_colors[elm.highlight]}\n                                     strokeOpacity={0.45}\n                                     strokeWidth={elm.fontSize/20.0}\n                                     textAnchor=\"middle\"\n                            > {elm.value.toString()} </SvgText>);\n          }else{\n            svg_content.push(<SvgText x={elm.x} y={elm.y} \n                            fontSize={elm.fontSize}\n                            textAnchor=\"middle\"\n                            > {elm.value.toString()} </SvgText>);\n          }\n          \n          // console.log(elm.value.toString())\n        }else if(elm.type == 'strokes'){\n          svg_content.push( <Rect x={b.minX} y={b.minY} width={b.maxX-b.minX} height={b.maxY-b.minY}\n                            stroke='orange' strokeWidth=\".5\" fill='none'/> ); \n        }\n\n    }\n\n\n\n    // let check_button_callback\n    // if(this.state.mode == \"set_start_state\"){\n    //   check_button_callback = this.setStartState\n    // }else if(this.state.mode == \"set_start_state\"){\n    //   check_button_callback = this.demonstrate\n    // }else{  \n      \n    //   check_button_callback = this.evaluate\n    // }\n    \n    \n    var cursor;\n    if(this.state.mode == \"foci\"){\n      cursor = this.state.elmUnderPoint == null ? \"default\" : \"pointer\"\n    }else{\n      cursor = cursor_map[this.state.mode] || cursor_map[null]\n    }\n\n\n    // console.log(\"CURSOR\", cursor)\n    return (\n\n      <TouchableWithoutFeedback\n        /*onStartShouldSetResponder = {(e) => true}\n        onMoveShouldSetResponder = {(e) => true}*/\n        onMouseDown = {this.penDown}\n        onMouseUp = {this.penUp}\n        onMouseLeave = {this.penUp}\n        onMouseMove = {this.penMove}\n        style={{height:\"100%\", width:\"100%\" }}\n        /*onResponderStart = {this.penDown.bind(this)}\n        onResponderRelease = {this.penUp.bind(this)}\n        onResponderMove = {this.penMove.bind(this)}*/\n        >\n      \n      <View\n        onLayout = {this.onLayout}\n        style={[\n          StyleSheet.absoluteFill,\n          {  justifyContent: 'center', height:\"100%\", width:\"100%\" },\n        ]}>\n        \n        \n        <Svg className=\"svg_canvas\" style ={{\"cursor\" : cursor}} height=\"100%\" width=\"100%\" >\n         <Defs>\n            {/*<Filter\n                id=\"a\"\n                filterUnits=\"userSpaceOnUse\"\n                x={0}\n                y={0}\n                width={200}\n                height={120}\n            >\n                <FEGaussianBlur\n                    in=\"SourceAlpha\"\n                    stdDeviation={4}\n                    result=\"blur\"\n                />\n                <FEOffset in=\"blur\" dx={4} dy={4} result=\"offsetBlur\" />\n                <FEMerge>\n                    <FEMergeNode in=\"offsetBlur\" />\n                    <FEMergeNode in=\"SourceGraphic\" />\n                </FEMerge>\n            </Filter>*/}\n        </Defs>\n          {svg_content}\n        </Svg>\n\n        {(this.state.mode != \"foci\" && this.state.mode != \"loading\")  &&\n          <View>\n            <TouchableHighlight\n              style = {[styles.circle_buttons,styles.undo_button]}\n              onPress = {this.undoStroke}>\n              <Text style={styles.undo_button_text}>{'\\u21B6'}</Text>\n            </TouchableHighlight>\n            {(this.state.mode != \"set_start_state\") && [\n            <TouchableHighlight\n              style = {[styles.circle_buttons,styles.check_button]}\n              onPress = {this.state.check_button_callback}>\n              <Text style={styles.check_button_text}>{'\\u2713'}</Text>\n            </TouchableHighlight>,\n            <TouchableHighlight\n              style = {[styles.circle_buttons,styles.done_button]}\n              onPress = {this.pressDone}>\n              <Text style={styles.done_button_text}>{'Done'}</Text>\n            </TouchableHighlight>\n            ]}\n            \n          </View>\n        }\n\n      </View>\n      </TouchableWithoutFeedback>\n\n      \n    );\n  }\n}\n\nStylusTutor.defaultProps = {\n    gridWidth : 100,\n    groupMode : \"grid\"\n  };\n\nconst pen_color_map = { \n  'DEFAULT' : 'black',\n  'ATTEMPT' : 'slategray',\n  'TUTOR' : 'black',\n  'DEMONSTRATE' : 'dodgerblue',\n  'START_STATE' : 'teal',\n  'CORRECT' : 'limegreen', \n  'INCORRECT' : 'crimson', //Crimson better than red since looks same as limegreen for people w/ deuteranopia \n}\n\nvar cursor_map = {\n    \"debug\" : \"crosshair\",\n    \"foci\" : \"pointer\",\n    \"set_start_state\" : \"crosshair\",\n    \"feedback\" : \"crosshair\",\n    null : \"progress\",\n    \"loading\" : \"progress\"\n  }\n\nconst styles = StyleSheet.create({\n  circle_buttons: {\n    position : \"absolute\",\n    backgroundColor : \"gray\",\n    borderRadius:60,\n    height:60,\n    width:60,\n    justifyContent: 'center',\n    alignItems: 'center',\n    zIndex: 1,\n    shadowColor: '#000',\n    shadowOffset: { width: 2, height: 2 },\n    shadowOpacity: 0.8,\n    shadowRadius: 2\n  },\n  undo_button: {\n    bottom : 50,\n    right : 120,\n  },\n  undo_button_text: {\n    fontSize: 40\n  },\n  check_button: {\n    bottom : 50,\n    right: 50,\n  },\n  check_button_text: {\n    fontSize: 40\n  },\n  done_button : {\n    bottom : 50,\n    left: 50,\n    width:80,\n    height:40,\n  },\n  done_button_text: {\n    fontSize: 24\n  },\n  \n\n\n\n})","/* eslint-disable */\n\nvar c_BezierFit = (function() {\n  var _scriptDir = '/dist/';\n  \n  return (\nfunction(c_BezierFit) {\n  c_BezierFit = c_BezierFit || {};\n\n\n\n// The Module object: Our interface to the outside world. We import\n// and export values on it. There are various ways Module can be used:\n// 1. Not defined. We create it here\n// 2. A function parameter, function(Module) { ..generated code.. }\n// 3. pre-run appended it, var Module = {}; ..generated code..\n// 4. External script tag defines var Module.\n// We need to check if Module already exists (e.g. case 3 above).\n// Substitution will be replaced with actual code on later stage of the build,\n// this way Closure Compiler will not mangle it (e.g. case 4. above).\n// Note that if you want to run closure, and also to use Module\n// after the generated code, you will need to define   var Module = {};\n// before the code. Then that object will be used in the code, and you\n// can continue to use Module afterwards as well.\nvar Module = typeof c_BezierFit !== 'undefined' ? c_BezierFit : {};\n\n\n// Set up the promise that indicates the Module is initialized\nvar readyPromiseResolve, readyPromiseReject;\nModule['ready'] = new Promise(function(resolve, reject) {\n  readyPromiseResolve = resolve;\n  readyPromiseReject = reject;\n});\n\n      if (!Object.getOwnPropertyDescriptor(Module['ready'], '_c_FitCurve')) {\n        Object.defineProperty(Module['ready'], '_c_FitCurve', { configurable: true, get: function() { abort('You are getting _c_FitCurve on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n        Object.defineProperty(Module['ready'], '_c_FitCurve', { configurable: true, set: function() { abort('You are setting _c_FitCurve on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n      }\n    \n\n      if (!Object.getOwnPropertyDescriptor(Module['ready'], '_c_ML_EncodeCurves')) {\n        Object.defineProperty(Module['ready'], '_c_ML_EncodeCurves', { configurable: true, get: function() { abort('You are getting _c_ML_EncodeCurves on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n        Object.defineProperty(Module['ready'], '_c_ML_EncodeCurves', { configurable: true, set: function() { abort('You are setting _c_ML_EncodeCurves on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n      }\n    \n\n      if (!Object.getOwnPropertyDescriptor(Module['ready'], '_c_GroupStrokes')) {\n        Object.defineProperty(Module['ready'], '_c_GroupStrokes', { configurable: true, get: function() { abort('You are getting _c_GroupStrokes on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n        Object.defineProperty(Module['ready'], '_c_GroupStrokes', { configurable: true, set: function() { abort('You are setting _c_GroupStrokes on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n      }\n    \n\n      if (!Object.getOwnPropertyDescriptor(Module['ready'], '_malloc')) {\n        Object.defineProperty(Module['ready'], '_malloc', { configurable: true, get: function() { abort('You are getting _malloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n        Object.defineProperty(Module['ready'], '_malloc', { configurable: true, set: function() { abort('You are setting _malloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n      }\n    \n\n      if (!Object.getOwnPropertyDescriptor(Module['ready'], '_free')) {\n        Object.defineProperty(Module['ready'], '_free', { configurable: true, get: function() { abort('You are getting _free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n        Object.defineProperty(Module['ready'], '_free', { configurable: true, set: function() { abort('You are setting _free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n      }\n    \n\n      if (!Object.getOwnPropertyDescriptor(Module['ready'], '_stackSave')) {\n        Object.defineProperty(Module['ready'], '_stackSave', { configurable: true, get: function() { abort('You are getting _stackSave on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n        Object.defineProperty(Module['ready'], '_stackSave', { configurable: true, set: function() { abort('You are setting _stackSave on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n      }\n    \n\n      if (!Object.getOwnPropertyDescriptor(Module['ready'], '_stackRestore')) {\n        Object.defineProperty(Module['ready'], '_stackRestore', { configurable: true, get: function() { abort('You are getting _stackRestore on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n        Object.defineProperty(Module['ready'], '_stackRestore', { configurable: true, set: function() { abort('You are setting _stackRestore on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n      }\n    \n\n      if (!Object.getOwnPropertyDescriptor(Module['ready'], '_stackAlloc')) {\n        Object.defineProperty(Module['ready'], '_stackAlloc', { configurable: true, get: function() { abort('You are getting _stackAlloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n        Object.defineProperty(Module['ready'], '_stackAlloc', { configurable: true, set: function() { abort('You are setting _stackAlloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n      }\n    \n\n      if (!Object.getOwnPropertyDescriptor(Module['ready'], '___data_end')) {\n        Object.defineProperty(Module['ready'], '___data_end', { configurable: true, get: function() { abort('You are getting ___data_end on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n        Object.defineProperty(Module['ready'], '___data_end', { configurable: true, set: function() { abort('You are setting ___data_end on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n      }\n    \n\n      if (!Object.getOwnPropertyDescriptor(Module['ready'], '___wasm_call_ctors')) {\n        Object.defineProperty(Module['ready'], '___wasm_call_ctors', { configurable: true, get: function() { abort('You are getting ___wasm_call_ctors on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n        Object.defineProperty(Module['ready'], '___wasm_call_ctors', { configurable: true, set: function() { abort('You are setting ___wasm_call_ctors on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n      }\n    \n\n      if (!Object.getOwnPropertyDescriptor(Module['ready'], '___errno_location')) {\n        Object.defineProperty(Module['ready'], '___errno_location', { configurable: true, get: function() { abort('You are getting ___errno_location on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n        Object.defineProperty(Module['ready'], '___errno_location', { configurable: true, set: function() { abort('You are setting ___errno_location on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n      }\n    \n\n      if (!Object.getOwnPropertyDescriptor(Module['ready'], '_setThrew')) {\n        Object.defineProperty(Module['ready'], '_setThrew', { configurable: true, get: function() { abort('You are getting _setThrew on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n        Object.defineProperty(Module['ready'], '_setThrew', { configurable: true, set: function() { abort('You are setting _setThrew on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n      }\n    \n\n      if (!Object.getOwnPropertyDescriptor(Module['ready'], 'onRuntimeInitialized')) {\n        Object.defineProperty(Module['ready'], 'onRuntimeInitialized', { configurable: true, get: function() { abort('You are getting onRuntimeInitialized on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n        Object.defineProperty(Module['ready'], 'onRuntimeInitialized', { configurable: true, set: function() { abort('You are setting onRuntimeInitialized on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n      }\n    \n\n// --pre-jses are emitted after the Module integration code, so that they can\n// refer to Module (if they choose; they can also define Module)\n// {{PRE_JSES}}\n\n// Sometimes an existing Module object exists with properties\n// meant to overwrite the default module functionality. Here\n// we collect those properties and reapply _after_ we configure\n// the current environment's defaults to avoid having to be so\n// defensive during initialization.\nvar moduleOverrides = {};\nvar key;\nfor (key in Module) {\n  if (Module.hasOwnProperty(key)) {\n    moduleOverrides[key] = Module[key];\n  }\n}\n\nvar arguments_ = [];\nvar thisProgram = './this.program';\nvar quit_ = function(status, toThrow) {\n  throw toThrow;\n};\n\n// Determine the runtime environment we are in. You can customize this by\n// setting the ENVIRONMENT setting at compile time (see settings.js).\n\nvar ENVIRONMENT_IS_WEB = true;\nvar ENVIRONMENT_IS_WORKER = false;\nvar ENVIRONMENT_IS_NODE = false;\nvar ENVIRONMENT_IS_SHELL = false;\n\nif (Module['ENVIRONMENT']) {\n  throw new Error('Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -s ENVIRONMENT=web or -s ENVIRONMENT=node)');\n}\n\n\n\n// `/` should be present at the end if `scriptDirectory` is not empty\nvar scriptDirectory = '';\nfunction locateFile(path) {\n  if (Module['locateFile']) {\n    return Module['locateFile'](path, scriptDirectory);\n  }\n  return scriptDirectory + path;\n}\n\n// Hooks that are implemented differently in different runtime environments.\nvar read_,\n    readAsync,\n    readBinary,\n    setWindowTitle;\n\n\n// Note that this includes Node.js workers when relevant (pthreads is enabled).\n// Node.js workers are detected as a combination of ENVIRONMENT_IS_WORKER and\n// ENVIRONMENT_IS_NODE.\nif (ENVIRONMENT_IS_WEB || ENVIRONMENT_IS_WORKER) {\n  if (ENVIRONMENT_IS_WORKER) { // Check worker, not web, since window could be polyfilled\n    scriptDirectory = self.location.href;\n  } else if (document.currentScript) { // web\n    scriptDirectory = document.currentScript.src;\n  }\n  // When MODULARIZE, this JS may be executed later, after document.currentScript\n  // is gone, so we saved it, and we use it here instead of any other info.\n  if (_scriptDir) {\n    scriptDirectory = _scriptDir;\n  }\n  // blob urls look like blob:http://site.com/etc/etc and we cannot infer anything from them.\n  // otherwise, slice off the final part of the url to find the script directory.\n  // if scriptDirectory does not contain a slash, lastIndexOf will return -1,\n  // and scriptDirectory will correctly be replaced with an empty string.\n  if (scriptDirectory.indexOf('blob:') !== 0) {\n    scriptDirectory = scriptDirectory.substr(0, scriptDirectory.lastIndexOf('/')+1);\n  } else {\n    scriptDirectory = '';\n  }\n\n  if (!(typeof window === 'object' || typeof importScripts === 'function')) throw new Error('not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)');\n\n  // Differentiate the Web Worker from the Node Worker case, as reading must\n  // be done differently.\n  {\n\n\n\n\n  read_ = function shell_read(url) {\n      var xhr = new XMLHttpRequest();\n      xhr.open('GET', url, false);\n      xhr.send(null);\n      return xhr.responseText;\n  };\n\n  if (ENVIRONMENT_IS_WORKER) {\n    readBinary = function readBinary(url) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', url, false);\n        xhr.responseType = 'arraybuffer';\n        xhr.send(null);\n        return new Uint8Array(/** @type{!ArrayBuffer} */(xhr.response));\n    };\n  }\n\n  readAsync = function readAsync(url, onload, onerror) {\n    var xhr = new XMLHttpRequest();\n    xhr.open('GET', url, true);\n    xhr.responseType = 'arraybuffer';\n    xhr.onload = function xhr_onload() {\n      if (xhr.status == 200 || (xhr.status == 0 && xhr.response)) { // file URLs can return 0\n        onload(xhr.response);\n        return;\n      }\n      onerror();\n    };\n    xhr.onerror = onerror;\n    xhr.send(null);\n  };\n\n\n\n\n  }\n\n  setWindowTitle = function(title) { document.title = title };\n} else\n{\n  throw new Error('environment detection error');\n}\n\n\n// Set up the out() and err() hooks, which are how we can print to stdout or\n// stderr, respectively.\nvar out = Module['print'] || console.log.bind(console);\nvar err = Module['printErr'] || console.warn.bind(console);\n\n// Merge back in the overrides\nfor (key in moduleOverrides) {\n  if (moduleOverrides.hasOwnProperty(key)) {\n    Module[key] = moduleOverrides[key];\n  }\n}\n// Free the object hierarchy contained in the overrides, this lets the GC\n// reclaim data used e.g. in memoryInitializerRequest, which is a large typed array.\nmoduleOverrides = null;\n\n// Emit code to handle expected values on the Module object. This applies Module.x\n// to the proper local x. This has two benefits: first, we only emit it if it is\n// expected to arrive, and second, by using a local everywhere else that can be\n// minified.\nif (Module['arguments']) arguments_ = Module['arguments'];if (!Object.getOwnPropertyDescriptor(Module, 'arguments')) Object.defineProperty(Module, 'arguments', { configurable: true, get: function() { abort('Module.arguments has been replaced with plain arguments_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)') } });\nif (Module['thisProgram']) thisProgram = Module['thisProgram'];if (!Object.getOwnPropertyDescriptor(Module, 'thisProgram')) Object.defineProperty(Module, 'thisProgram', { configurable: true, get: function() { abort('Module.thisProgram has been replaced with plain thisProgram (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)') } });\nif (Module['quit']) quit_ = Module['quit'];if (!Object.getOwnPropertyDescriptor(Module, 'quit')) Object.defineProperty(Module, 'quit', { configurable: true, get: function() { abort('Module.quit has been replaced with plain quit_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)') } });\n\n// perform assertions in shell.js after we set up out() and err(), as otherwise if an assertion fails it cannot print the message\n// Assertions on removed incoming Module JS APIs.\nassert(typeof Module['memoryInitializerPrefixURL'] === 'undefined', 'Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead');\nassert(typeof Module['pthreadMainPrefixURL'] === 'undefined', 'Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead');\nassert(typeof Module['cdInitializerPrefixURL'] === 'undefined', 'Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead');\nassert(typeof Module['filePackagePrefixURL'] === 'undefined', 'Module.filePackagePrefixURL option was removed, use Module.locateFile instead');\nassert(typeof Module['read'] === 'undefined', 'Module.read option was removed (modify read_ in JS)');\nassert(typeof Module['readAsync'] === 'undefined', 'Module.readAsync option was removed (modify readAsync in JS)');\nassert(typeof Module['readBinary'] === 'undefined', 'Module.readBinary option was removed (modify readBinary in JS)');\nassert(typeof Module['setWindowTitle'] === 'undefined', 'Module.setWindowTitle option was removed (modify setWindowTitle in JS)');\nassert(typeof Module['TOTAL_MEMORY'] === 'undefined', 'Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY');\nif (!Object.getOwnPropertyDescriptor(Module, 'read')) Object.defineProperty(Module, 'read', { configurable: true, get: function() { abort('Module.read has been replaced with plain read_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)') } });\nif (!Object.getOwnPropertyDescriptor(Module, 'readAsync')) Object.defineProperty(Module, 'readAsync', { configurable: true, get: function() { abort('Module.readAsync has been replaced with plain readAsync (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)') } });\nif (!Object.getOwnPropertyDescriptor(Module, 'readBinary')) Object.defineProperty(Module, 'readBinary', { configurable: true, get: function() { abort('Module.readBinary has been replaced with plain readBinary (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)') } });\nif (!Object.getOwnPropertyDescriptor(Module, 'setWindowTitle')) Object.defineProperty(Module, 'setWindowTitle', { configurable: true, get: function() { abort('Module.setWindowTitle has been replaced with plain setWindowTitle (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)') } });\nvar IDBFS = 'IDBFS is no longer included by default; build with -lidbfs.js';\nvar PROXYFS = 'PROXYFS is no longer included by default; build with -lproxyfs.js';\nvar WORKERFS = 'WORKERFS is no longer included by default; build with -lworkerfs.js';\nvar NODEFS = 'NODEFS is no longer included by default; build with -lnodefs.js';\n\n\n\n\n\n\n// {{PREAMBLE_ADDITIONS}}\n\nvar STACK_ALIGN = 16;\n\nfunction dynamicAlloc(size) {\n  assert(DYNAMICTOP_PTR);\n  var ret = HEAP32[DYNAMICTOP_PTR>>2];\n  var end = (ret + size + 15) & -16;\n  assert(end <= HEAP8.length, 'failure to dynamicAlloc - memory growth etc. is not supported there, call malloc/sbrk directly');\n  HEAP32[DYNAMICTOP_PTR>>2] = end;\n  return ret;\n}\n\nfunction alignMemory(size, factor) {\n  if (!factor) factor = STACK_ALIGN; // stack alignment (16-byte) by default\n  return Math.ceil(size / factor) * factor;\n}\n\nfunction getNativeTypeSize(type) {\n  switch (type) {\n    case 'i1': case 'i8': return 1;\n    case 'i16': return 2;\n    case 'i32': return 4;\n    case 'i64': return 8;\n    case 'float': return 4;\n    case 'double': return 8;\n    default: {\n      if (type[type.length-1] === '*') {\n        return 4; // A pointer\n      } else if (type[0] === 'i') {\n        var bits = Number(type.substr(1));\n        assert(bits % 8 === 0, 'getNativeTypeSize invalid bits ' + bits + ', type ' + type);\n        return bits / 8;\n      } else {\n        return 0;\n      }\n    }\n  }\n}\n\nfunction warnOnce(text) {\n  if (!warnOnce.shown) warnOnce.shown = {};\n  if (!warnOnce.shown[text]) {\n    warnOnce.shown[text] = 1;\n    err(text);\n  }\n}\n\n\n\n\n\n\n\n\n// Wraps a JS function as a wasm function with a given signature.\nfunction convertJsFunctionToWasm(func, sig) {\n\n  // If the type reflection proposal is available, use the new\n  // \"WebAssembly.Function\" constructor.\n  // Otherwise, construct a minimal wasm module importing the JS function and\n  // re-exporting it.\n  if (typeof WebAssembly.Function === \"function\") {\n    var typeNames = {\n      'i': 'i32',\n      'j': 'i64',\n      'f': 'f32',\n      'd': 'f64'\n    };\n    var type = {\n      parameters: [],\n      results: sig[0] == 'v' ? [] : [typeNames[sig[0]]]\n    };\n    for (var i = 1; i < sig.length; ++i) {\n      type.parameters.push(typeNames[sig[i]]);\n    }\n    return new WebAssembly.Function(type, func);\n  }\n\n  // The module is static, with the exception of the type section, which is\n  // generated based on the signature passed in.\n  var typeSection = [\n    0x01, // id: section,\n    0x00, // length: 0 (placeholder)\n    0x01, // count: 1\n    0x60, // form: func\n  ];\n  var sigRet = sig.slice(0, 1);\n  var sigParam = sig.slice(1);\n  var typeCodes = {\n    'i': 0x7f, // i32\n    'j': 0x7e, // i64\n    'f': 0x7d, // f32\n    'd': 0x7c, // f64\n  };\n\n  // Parameters, length + signatures\n  typeSection.push(sigParam.length);\n  for (var i = 0; i < sigParam.length; ++i) {\n    typeSection.push(typeCodes[sigParam[i]]);\n  }\n\n  // Return values, length + signatures\n  // With no multi-return in MVP, either 0 (void) or 1 (anything else)\n  if (sigRet == 'v') {\n    typeSection.push(0x00);\n  } else {\n    typeSection = typeSection.concat([0x01, typeCodes[sigRet]]);\n  }\n\n  // Write the overall length of the type section back into the section header\n  // (excepting the 2 bytes for the section id and length)\n  typeSection[1] = typeSection.length - 2;\n\n  // Rest of the module is static\n  var bytes = new Uint8Array([\n    0x00, 0x61, 0x73, 0x6d, // magic (\"\\0asm\")\n    0x01, 0x00, 0x00, 0x00, // version: 1\n  ].concat(typeSection, [\n    0x02, 0x07, // import section\n      // (import \"e\" \"f\" (func 0 (type 0)))\n      0x01, 0x01, 0x65, 0x01, 0x66, 0x00, 0x00,\n    0x07, 0x05, // export section\n      // (export \"f\" (func 0 (type 0)))\n      0x01, 0x01, 0x66, 0x00, 0x00,\n  ]));\n\n   // We can compile this wasm module synchronously because it is very small.\n  // This accepts an import (at \"e.f\"), that it reroutes to an export (at \"f\")\n  var module = new WebAssembly.Module(bytes);\n  var instance = new WebAssembly.Instance(module, {\n    'e': {\n      'f': func\n    }\n  });\n  var wrappedFunc = instance.exports['f'];\n  return wrappedFunc;\n}\n\nvar freeTableIndexes = [];\n\n// Weak map of functions in the table to their indexes, created on first use.\nvar functionsInTableMap;\n\n// Add a wasm function to the table.\nfunction addFunctionWasm(func, sig) {\n  var table = wasmTable;\n\n  // Check if the function is already in the table, to ensure each function\n  // gets a unique index. First, create the map if this is the first use.\n  if (!functionsInTableMap) {\n    functionsInTableMap = new WeakMap();\n    for (var i = 0; i < table.length; i++) {\n      var item = table.get(i);\n      // Ignore null values.\n      if (item) {\n        functionsInTableMap.set(item, i);\n      }\n    }\n  }\n  if (functionsInTableMap.has(func)) {\n    return functionsInTableMap.get(func);\n  }\n\n  // It's not in the table, add it now.\n\n\n  var ret;\n  // Reuse a free index if there is one, otherwise grow.\n  if (freeTableIndexes.length) {\n    ret = freeTableIndexes.pop();\n  } else {\n    ret = table.length;\n    // Grow the table\n    try {\n      table.grow(1);\n    } catch (err) {\n      if (!(err instanceof RangeError)) {\n        throw err;\n      }\n      throw 'Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.';\n    }\n  }\n\n  // Set the new value.\n  try {\n    // Attempting to call this with JS function will cause of table.set() to fail\n    table.set(ret, func);\n  } catch (err) {\n    if (!(err instanceof TypeError)) {\n      throw err;\n    }\n    assert(typeof sig !== 'undefined', 'Missing signature argument to addFunction');\n    var wrapped = convertJsFunctionToWasm(func, sig);\n    table.set(ret, wrapped);\n  }\n\n  functionsInTableMap.set(func, ret);\n\n  return ret;\n}\n\nfunction removeFunctionWasm(index) {\n  functionsInTableMap.delete(wasmTable.get(index));\n  freeTableIndexes.push(index);\n}\n\n// 'sig' parameter is required for the llvm backend but only when func is not\n// already a WebAssembly function.\nfunction addFunction(func, sig) {\n  assert(typeof func !== 'undefined');\n\n  return addFunctionWasm(func, sig);\n}\n\nfunction removeFunction(index) {\n  removeFunctionWasm(index);\n}\n\n\n\nvar funcWrappers = {};\n\nfunction getFuncWrapper(func, sig) {\n  if (!func) return; // on null pointer, return undefined\n  assert(sig);\n  if (!funcWrappers[sig]) {\n    funcWrappers[sig] = {};\n  }\n  var sigCache = funcWrappers[sig];\n  if (!sigCache[func]) {\n    // optimize away arguments usage in common cases\n    if (sig.length === 1) {\n      sigCache[func] = function dynCall_wrapper() {\n        return dynCall(sig, func);\n      };\n    } else if (sig.length === 2) {\n      sigCache[func] = function dynCall_wrapper(arg) {\n        return dynCall(sig, func, [arg]);\n      };\n    } else {\n      // general case\n      sigCache[func] = function dynCall_wrapper() {\n        return dynCall(sig, func, Array.prototype.slice.call(arguments));\n      };\n    }\n  }\n  return sigCache[func];\n}\n\n\n\n\n\n\n\nfunction makeBigInt(low, high, unsigned) {\n  return unsigned ? ((+((low>>>0)))+((+((high>>>0)))*4294967296.0)) : ((+((low>>>0)))+((+((high|0)))*4294967296.0));\n}\n\n/** @param {Array=} args */\nfunction dynCall(sig, ptr, args) {\n  if (args && args.length) {\n    // j (64-bit integer) must be passed in as two numbers [low 32, high 32].\n    assert(args.length === sig.substring(1).replace(/j/g, '--').length);\n    assert(('dynCall_' + sig) in Module, 'bad function pointer type - no table for sig \\'' + sig + '\\'');\n    return Module['dynCall_' + sig].apply(null, [ptr].concat(args));\n  } else {\n    assert(sig.length == 1);\n    assert(('dynCall_' + sig) in Module, 'bad function pointer type - no table for sig \\'' + sig + '\\'');\n    return Module['dynCall_' + sig].call(null, ptr);\n  }\n}\n\nvar tempRet0 = 0;\n\nvar setTempRet0 = function(value) {\n  tempRet0 = value;\n};\n\nvar getTempRet0 = function() {\n  return tempRet0;\n};\n\nfunction getCompilerSetting(name) {\n  throw 'You must build with -s RETAIN_COMPILER_SETTINGS=1 for getCompilerSetting or emscripten_get_compiler_setting to work';\n}\n\n// The address globals begin at. Very low in memory, for code size and optimization opportunities.\n// Above 0 is static memory, starting with globals.\n// Then the stack.\n// Then 'dynamic' memory for sbrk.\nvar GLOBAL_BASE = 1024;\n\n\n\n\n\n// === Preamble library stuff ===\n\n// Documentation for the public APIs defined in this file must be updated in:\n//    site/source/docs/api_reference/preamble.js.rst\n// A prebuilt local version of the documentation is available at:\n//    site/build/text/docs/api_reference/preamble.js.txt\n// You can also build docs locally as HTML or other formats in site/\n// An online HTML version (which may be of a different version of Emscripten)\n//    is up at http://kripken.github.io/emscripten-site/docs/api_reference/preamble.js.html\n\n\nvar wasmBinary;if (Module['wasmBinary']) wasmBinary = Module['wasmBinary'];if (!Object.getOwnPropertyDescriptor(Module, 'wasmBinary')) Object.defineProperty(Module, 'wasmBinary', { configurable: true, get: function() { abort('Module.wasmBinary has been replaced with plain wasmBinary (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)') } });\nvar noExitRuntime;if (Module['noExitRuntime']) noExitRuntime = Module['noExitRuntime'];if (!Object.getOwnPropertyDescriptor(Module, 'noExitRuntime')) Object.defineProperty(Module, 'noExitRuntime', { configurable: true, get: function() { abort('Module.noExitRuntime has been replaced with plain noExitRuntime (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)') } });\n\n\nif (typeof WebAssembly !== 'object') {\n  abort('No WebAssembly support found. Build with -s WASM=0 to target JavaScript instead.');\n}\n\n\n\n\n// In MINIMAL_RUNTIME, setValue() and getValue() are only available when building with safe heap enabled, for heap safety checking.\n// In traditional runtime, setValue() and getValue() are always available (although their use is highly discouraged due to perf penalties)\n\n/** @param {number} ptr\n    @param {number} value\n    @param {string} type\n    @param {number|boolean=} noSafe */\nfunction setValue(ptr, value, type, noSafe) {\n  type = type || 'i8';\n  if (type.charAt(type.length-1) === '*') type = 'i32'; // pointers are 32-bit\n    switch(type) {\n      case 'i1': HEAP8[((ptr)>>0)]=value; break;\n      case 'i8': HEAP8[((ptr)>>0)]=value; break;\n      case 'i16': HEAP16[((ptr)>>1)]=value; break;\n      case 'i32': HEAP32[((ptr)>>2)]=value; break;\n      case 'i64': (tempI64 = [value>>>0,(tempDouble=value,(+(Math_abs(tempDouble))) >= 1.0 ? (tempDouble > 0.0 ? ((Math_min((+(Math_floor((tempDouble)/4294967296.0))), 4294967295.0))|0)>>>0 : (~~((+(Math_ceil((tempDouble - +(((~~(tempDouble)))>>>0))/4294967296.0)))))>>>0) : 0)],HEAP32[((ptr)>>2)]=tempI64[0],HEAP32[(((ptr)+(4))>>2)]=tempI64[1]); break;\n      case 'float': HEAPF32[((ptr)>>2)]=value; break;\n      case 'double': HEAPF64[((ptr)>>3)]=value; break;\n      default: abort('invalid type for setValue: ' + type);\n    }\n}\n\n/** @param {number} ptr\n    @param {string} type\n    @param {number|boolean=} noSafe */\nfunction getValue(ptr, type, noSafe) {\n  type = type || 'i8';\n  if (type.charAt(type.length-1) === '*') type = 'i32'; // pointers are 32-bit\n    switch(type) {\n      case 'i1': return HEAP8[((ptr)>>0)];\n      case 'i8': return HEAP8[((ptr)>>0)];\n      case 'i16': return HEAP16[((ptr)>>1)];\n      case 'i32': return HEAP32[((ptr)>>2)];\n      case 'i64': return HEAP32[((ptr)>>2)];\n      case 'float': return HEAPF32[((ptr)>>2)];\n      case 'double': return HEAPF64[((ptr)>>3)];\n      default: abort('invalid type for getValue: ' + type);\n    }\n  return null;\n}\n\n\n\n\n\n\n// Wasm globals\n\nvar wasmMemory;\n\n// In fastcomp asm.js, we don't need a wasm Table at all.\n// In the wasm backend, we polyfill the WebAssembly object,\n// so this creates a (non-native-wasm) table for us.\nvar wasmTable = new WebAssembly.Table({\n  'initial': 354,\n  'maximum': 354 + 0,\n  'element': 'anyfunc'\n});\n\n\n//========================================\n// Runtime essentials\n//========================================\n\n// whether we are quitting the application. no code should run after this.\n// set in exit() and abort()\nvar ABORT = false;\n\n// set by exit() and abort().  Passed to 'onExit' handler.\n// NOTE: This is also used as the process return code code in shell environments\n// but only when noExitRuntime is false.\nvar EXITSTATUS = 0;\n\n/** @type {function(*, string=)} */\nfunction assert(condition, text) {\n  if (!condition) {\n    abort('Assertion failed: ' + text);\n  }\n}\n\n// Returns the C function with a specified identifier (for C++, you need to do manual name mangling)\nfunction getCFunc(ident) {\n  var func = Module['_' + ident]; // closure exported function\n  assert(func, 'Cannot call unknown function ' + ident + ', make sure it is exported');\n  return func;\n}\n\n// C calling interface.\n/** @param {string|null=} returnType\n    @param {Array=} argTypes\n    @param {Arguments|Array=} args\n    @param {Object=} opts */\nfunction ccall(ident, returnType, argTypes, args, opts) {\n  // For fast lookup of conversion functions\n  var toC = {\n    'string': function(str) {\n      var ret = 0;\n      if (str !== null && str !== undefined && str !== 0) { // null string\n        // at most 4 bytes per UTF-8 code point, +1 for the trailing '\\0'\n        var len = (str.length << 2) + 1;\n        ret = stackAlloc(len);\n        stringToUTF8(str, ret, len);\n      }\n      return ret;\n    },\n    'array': function(arr) {\n      var ret = stackAlloc(arr.length);\n      writeArrayToMemory(arr, ret);\n      return ret;\n    }\n  };\n\n  function convertReturnValue(ret) {\n    if (returnType === 'string') return UTF8ToString(ret);\n    if (returnType === 'boolean') return Boolean(ret);\n    return ret;\n  }\n\n  var func = getCFunc(ident);\n  var cArgs = [];\n  var stack = 0;\n  assert(returnType !== 'array', 'Return type should not be \"array\".');\n  if (args) {\n    for (var i = 0; i < args.length; i++) {\n      var converter = toC[argTypes[i]];\n      if (converter) {\n        if (stack === 0) stack = stackSave();\n        cArgs[i] = converter(args[i]);\n      } else {\n        cArgs[i] = args[i];\n      }\n    }\n  }\n  var ret = func.apply(null, cArgs);\n\n  ret = convertReturnValue(ret);\n  if (stack !== 0) stackRestore(stack);\n  return ret;\n}\n\n/** @param {string=} returnType\n    @param {Array=} argTypes\n    @param {Object=} opts */\nfunction cwrap(ident, returnType, argTypes, opts) {\n  return function() {\n    return ccall(ident, returnType, argTypes, arguments, opts);\n  }\n}\n\nvar ALLOC_NORMAL = 0; // Tries to use _malloc()\nvar ALLOC_STACK = 1; // Lives for the duration of the current function call\nvar ALLOC_DYNAMIC = 2; // Cannot be freed except through sbrk\nvar ALLOC_NONE = 3; // Do not allocate\n\n// allocate(): This is for internal use. You can use it yourself as well, but the interface\n//             is a little tricky (see docs right below). The reason is that it is optimized\n//             for multiple syntaxes to save space in generated code. So you should\n//             normally not use allocate(), and instead allocate memory using _malloc(),\n//             initialize it with setValue(), and so forth.\n// @slab: An array of data, or a number. If a number, then the size of the block to allocate,\n//        in *bytes* (note that this is sometimes confusing: the next parameter does not\n//        affect this!)\n// @types: Either an array of types, one for each byte (or 0 if no type at that position),\n//         or a single type which is used for the entire block. This only matters if there\n//         is initial data - if @slab is a number, then this does not matter at all and is\n//         ignored.\n// @allocator: How to allocate memory, see ALLOC_*\n/** @type {function((TypedArray|Array<number>|number), string, number, number=)} */\nfunction allocate(slab, types, allocator, ptr) {\n  var zeroinit, size;\n  if (typeof slab === 'number') {\n    zeroinit = true;\n    size = slab;\n  } else {\n    zeroinit = false;\n    size = slab.length;\n  }\n\n  var singleType = typeof types === 'string' ? types : null;\n\n  var ret;\n  if (allocator == ALLOC_NONE) {\n    ret = ptr;\n  } else {\n    ret = [_malloc,\n    stackAlloc,\n    dynamicAlloc][allocator](Math.max(size, singleType ? 1 : types.length));\n  }\n\n  if (zeroinit) {\n    var stop;\n    ptr = ret;\n    assert((ret & 3) == 0);\n    stop = ret + (size & ~3);\n    for (; ptr < stop; ptr += 4) {\n      HEAP32[((ptr)>>2)]=0;\n    }\n    stop = ret + size;\n    while (ptr < stop) {\n      HEAP8[((ptr++)>>0)]=0;\n    }\n    return ret;\n  }\n\n  if (singleType === 'i8') {\n    if (slab.subarray || slab.slice) {\n      HEAPU8.set(/** @type {!Uint8Array} */ (slab), ret);\n    } else {\n      HEAPU8.set(new Uint8Array(slab), ret);\n    }\n    return ret;\n  }\n\n  var i = 0, type, typeSize, previousType;\n  while (i < size) {\n    var curr = slab[i];\n\n    type = singleType || types[i];\n    if (type === 0) {\n      i++;\n      continue;\n    }\n    assert(type, 'Must know what type to store in allocate!');\n\n    if (type == 'i64') type = 'i32'; // special case: we have one i32 here, and one i32 later\n\n    setValue(ret+i, curr, type);\n\n    // no need to look up size unless type changes, so cache it\n    if (previousType !== type) {\n      typeSize = getNativeTypeSize(type);\n      previousType = type;\n    }\n    i += typeSize;\n  }\n\n  return ret;\n}\n\n// Allocate memory during any stage of startup - static memory early on, dynamic memory later, malloc when ready\nfunction getMemory(size) {\n  if (!runtimeInitialized) return dynamicAlloc(size);\n  return _malloc(size);\n}\n\n\n\n\n// runtime_strings.js: Strings related runtime functions that are part of both MINIMAL_RUNTIME and regular runtime.\n\n// Given a pointer 'ptr' to a null-terminated UTF8-encoded string in the given array that contains uint8 values, returns\n// a copy of that string as a Javascript String object.\n\nvar UTF8Decoder = typeof TextDecoder !== 'undefined' ? new TextDecoder('utf8') : undefined;\n\n/**\n * @param {number} idx\n * @param {number=} maxBytesToRead\n * @return {string}\n */\nfunction UTF8ArrayToString(heap, idx, maxBytesToRead) {\n  var endIdx = idx + maxBytesToRead;\n  var endPtr = idx;\n  // TextDecoder needs to know the byte length in advance, it doesn't stop on null terminator by itself.\n  // Also, use the length info to avoid running tiny strings through TextDecoder, since .subarray() allocates garbage.\n  // (As a tiny code save trick, compare endPtr against endIdx using a negation, so that undefined means Infinity)\n  while (heap[endPtr] && !(endPtr >= endIdx)) ++endPtr;\n\n  if (endPtr - idx > 16 && heap.subarray && UTF8Decoder) {\n    return UTF8Decoder.decode(heap.subarray(idx, endPtr));\n  } else {\n    var str = '';\n    // If building with TextDecoder, we have already computed the string length above, so test loop end condition against that\n    while (idx < endPtr) {\n      // For UTF8 byte structure, see:\n      // http://en.wikipedia.org/wiki/UTF-8#Description\n      // https://www.ietf.org/rfc/rfc2279.txt\n      // https://tools.ietf.org/html/rfc3629\n      var u0 = heap[idx++];\n      if (!(u0 & 0x80)) { str += String.fromCharCode(u0); continue; }\n      var u1 = heap[idx++] & 63;\n      if ((u0 & 0xE0) == 0xC0) { str += String.fromCharCode(((u0 & 31) << 6) | u1); continue; }\n      var u2 = heap[idx++] & 63;\n      if ((u0 & 0xF0) == 0xE0) {\n        u0 = ((u0 & 15) << 12) | (u1 << 6) | u2;\n      } else {\n        if ((u0 & 0xF8) != 0xF0) warnOnce('Invalid UTF-8 leading byte 0x' + u0.toString(16) + ' encountered when deserializing a UTF-8 string on the asm.js/wasm heap to a JS string!');\n        u0 = ((u0 & 7) << 18) | (u1 << 12) | (u2 << 6) | (heap[idx++] & 63);\n      }\n\n      if (u0 < 0x10000) {\n        str += String.fromCharCode(u0);\n      } else {\n        var ch = u0 - 0x10000;\n        str += String.fromCharCode(0xD800 | (ch >> 10), 0xDC00 | (ch & 0x3FF));\n      }\n    }\n  }\n  return str;\n}\n\n// Given a pointer 'ptr' to a null-terminated UTF8-encoded string in the emscripten HEAP, returns a\n// copy of that string as a Javascript String object.\n// maxBytesToRead: an optional length that specifies the maximum number of bytes to read. You can omit\n//                 this parameter to scan the string until the first \\0 byte. If maxBytesToRead is\n//                 passed, and the string at [ptr, ptr+maxBytesToReadr[ contains a null byte in the\n//                 middle, then the string will cut short at that byte index (i.e. maxBytesToRead will\n//                 not produce a string of exact length [ptr, ptr+maxBytesToRead[)\n//                 N.B. mixing frequent uses of UTF8ToString() with and without maxBytesToRead may\n//                 throw JS JIT optimizations off, so it is worth to consider consistently using one\n//                 style or the other.\n/**\n * @param {number} ptr\n * @param {number=} maxBytesToRead\n * @return {string}\n */\nfunction UTF8ToString(ptr, maxBytesToRead) {\n  return ptr ? UTF8ArrayToString(HEAPU8, ptr, maxBytesToRead) : '';\n}\n\n// Copies the given Javascript String object 'str' to the given byte array at address 'outIdx',\n// encoded in UTF8 form and null-terminated. The copy will require at most str.length*4+1 bytes of space in the HEAP.\n// Use the function lengthBytesUTF8 to compute the exact number of bytes (excluding null terminator) that this function will write.\n// Parameters:\n//   str: the Javascript string to copy.\n//   heap: the array to copy to. Each index in this array is assumed to be one 8-byte element.\n//   outIdx: The starting offset in the array to begin the copying.\n//   maxBytesToWrite: The maximum number of bytes this function can write to the array.\n//                    This count should include the null terminator,\n//                    i.e. if maxBytesToWrite=1, only the null terminator will be written and nothing else.\n//                    maxBytesToWrite=0 does not write any bytes to the output, not even the null terminator.\n// Returns the number of bytes written, EXCLUDING the null terminator.\n\nfunction stringToUTF8Array(str, heap, outIdx, maxBytesToWrite) {\n  if (!(maxBytesToWrite > 0)) // Parameter maxBytesToWrite is not optional. Negative values, 0, null, undefined and false each don't write out any bytes.\n    return 0;\n\n  var startIdx = outIdx;\n  var endIdx = outIdx + maxBytesToWrite - 1; // -1 for string null terminator.\n  for (var i = 0; i < str.length; ++i) {\n    // Gotcha: charCodeAt returns a 16-bit word that is a UTF-16 encoded code unit, not a Unicode code point of the character! So decode UTF16->UTF32->UTF8.\n    // See http://unicode.org/faq/utf_bom.html#utf16-3\n    // For UTF8 byte structure, see http://en.wikipedia.org/wiki/UTF-8#Description and https://www.ietf.org/rfc/rfc2279.txt and https://tools.ietf.org/html/rfc3629\n    var u = str.charCodeAt(i); // possibly a lead surrogate\n    if (u >= 0xD800 && u <= 0xDFFF) {\n      var u1 = str.charCodeAt(++i);\n      u = 0x10000 + ((u & 0x3FF) << 10) | (u1 & 0x3FF);\n    }\n    if (u <= 0x7F) {\n      if (outIdx >= endIdx) break;\n      heap[outIdx++] = u;\n    } else if (u <= 0x7FF) {\n      if (outIdx + 1 >= endIdx) break;\n      heap[outIdx++] = 0xC0 | (u >> 6);\n      heap[outIdx++] = 0x80 | (u & 63);\n    } else if (u <= 0xFFFF) {\n      if (outIdx + 2 >= endIdx) break;\n      heap[outIdx++] = 0xE0 | (u >> 12);\n      heap[outIdx++] = 0x80 | ((u >> 6) & 63);\n      heap[outIdx++] = 0x80 | (u & 63);\n    } else {\n      if (outIdx + 3 >= endIdx) break;\n      if (u >= 0x200000) warnOnce('Invalid Unicode code point 0x' + u.toString(16) + ' encountered when serializing a JS string to an UTF-8 string on the asm.js/wasm heap! (Valid unicode code points should be in range 0-0x1FFFFF).');\n      heap[outIdx++] = 0xF0 | (u >> 18);\n      heap[outIdx++] = 0x80 | ((u >> 12) & 63);\n      heap[outIdx++] = 0x80 | ((u >> 6) & 63);\n      heap[outIdx++] = 0x80 | (u & 63);\n    }\n  }\n  // Null-terminate the pointer to the buffer.\n  heap[outIdx] = 0;\n  return outIdx - startIdx;\n}\n\n// Copies the given Javascript String object 'str' to the emscripten HEAP at address 'outPtr',\n// null-terminated and encoded in UTF8 form. The copy will require at most str.length*4+1 bytes of space in the HEAP.\n// Use the function lengthBytesUTF8 to compute the exact number of bytes (excluding null terminator) that this function will write.\n// Returns the number of bytes written, EXCLUDING the null terminator.\n\nfunction stringToUTF8(str, outPtr, maxBytesToWrite) {\n  assert(typeof maxBytesToWrite == 'number', 'stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!');\n  return stringToUTF8Array(str, HEAPU8,outPtr, maxBytesToWrite);\n}\n\n// Returns the number of bytes the given Javascript string takes if encoded as a UTF8 byte array, EXCLUDING the null terminator byte.\nfunction lengthBytesUTF8(str) {\n  var len = 0;\n  for (var i = 0; i < str.length; ++i) {\n    // Gotcha: charCodeAt returns a 16-bit word that is a UTF-16 encoded code unit, not a Unicode code point of the character! So decode UTF16->UTF32->UTF8.\n    // See http://unicode.org/faq/utf_bom.html#utf16-3\n    var u = str.charCodeAt(i); // possibly a lead surrogate\n    if (u >= 0xD800 && u <= 0xDFFF) u = 0x10000 + ((u & 0x3FF) << 10) | (str.charCodeAt(++i) & 0x3FF);\n    if (u <= 0x7F) ++len;\n    else if (u <= 0x7FF) len += 2;\n    else if (u <= 0xFFFF) len += 3;\n    else len += 4;\n  }\n  return len;\n}\n\n\n\n\n\n// runtime_strings_extra.js: Strings related runtime functions that are available only in regular runtime.\n\n// Given a pointer 'ptr' to a null-terminated ASCII-encoded string in the emscripten HEAP, returns\n// a copy of that string as a Javascript String object.\n\nfunction AsciiToString(ptr) {\n  var str = '';\n  while (1) {\n    var ch = HEAPU8[((ptr++)>>0)];\n    if (!ch) return str;\n    str += String.fromCharCode(ch);\n  }\n}\n\n// Copies the given Javascript String object 'str' to the emscripten HEAP at address 'outPtr',\n// null-terminated and encoded in ASCII form. The copy will require at most str.length+1 bytes of space in the HEAP.\n\nfunction stringToAscii(str, outPtr) {\n  return writeAsciiToMemory(str, outPtr, false);\n}\n\n// Given a pointer 'ptr' to a null-terminated UTF16LE-encoded string in the emscripten HEAP, returns\n// a copy of that string as a Javascript String object.\n\nvar UTF16Decoder = typeof TextDecoder !== 'undefined' ? new TextDecoder('utf-16le') : undefined;\n\nfunction UTF16ToString(ptr, maxBytesToRead) {\n  assert(ptr % 2 == 0, 'Pointer passed to UTF16ToString must be aligned to two bytes!');\n  var endPtr = ptr;\n  // TextDecoder needs to know the byte length in advance, it doesn't stop on null terminator by itself.\n  // Also, use the length info to avoid running tiny strings through TextDecoder, since .subarray() allocates garbage.\n  var idx = endPtr >> 1;\n  var maxIdx = idx + maxBytesToRead / 2;\n  // If maxBytesToRead is not passed explicitly, it will be undefined, and this\n  // will always evaluate to true. This saves on code size.\n  while (!(idx >= maxIdx) && HEAPU16[idx]) ++idx;\n  endPtr = idx << 1;\n\n  if (endPtr - ptr > 32 && UTF16Decoder) {\n    return UTF16Decoder.decode(HEAPU8.subarray(ptr, endPtr));\n  } else {\n    var i = 0;\n\n    var str = '';\n    while (1) {\n      var codeUnit = HEAP16[(((ptr)+(i*2))>>1)];\n      if (codeUnit == 0 || i == maxBytesToRead / 2) return str;\n      ++i;\n      // fromCharCode constructs a character from a UTF-16 code unit, so we can pass the UTF16 string right through.\n      str += String.fromCharCode(codeUnit);\n    }\n  }\n}\n\n// Copies the given Javascript String object 'str' to the emscripten HEAP at address 'outPtr',\n// null-terminated and encoded in UTF16 form. The copy will require at most str.length*4+2 bytes of space in the HEAP.\n// Use the function lengthBytesUTF16() to compute the exact number of bytes (excluding null terminator) that this function will write.\n// Parameters:\n//   str: the Javascript string to copy.\n//   outPtr: Byte address in Emscripten HEAP where to write the string to.\n//   maxBytesToWrite: The maximum number of bytes this function can write to the array. This count should include the null\n//                    terminator, i.e. if maxBytesToWrite=2, only the null terminator will be written and nothing else.\n//                    maxBytesToWrite<2 does not write any bytes to the output, not even the null terminator.\n// Returns the number of bytes written, EXCLUDING the null terminator.\n\nfunction stringToUTF16(str, outPtr, maxBytesToWrite) {\n  assert(outPtr % 2 == 0, 'Pointer passed to stringToUTF16 must be aligned to two bytes!');\n  assert(typeof maxBytesToWrite == 'number', 'stringToUTF16(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!');\n  // Backwards compatibility: if max bytes is not specified, assume unsafe unbounded write is allowed.\n  if (maxBytesToWrite === undefined) {\n    maxBytesToWrite = 0x7FFFFFFF;\n  }\n  if (maxBytesToWrite < 2) return 0;\n  maxBytesToWrite -= 2; // Null terminator.\n  var startPtr = outPtr;\n  var numCharsToWrite = (maxBytesToWrite < str.length*2) ? (maxBytesToWrite / 2) : str.length;\n  for (var i = 0; i < numCharsToWrite; ++i) {\n    // charCodeAt returns a UTF-16 encoded code unit, so it can be directly written to the HEAP.\n    var codeUnit = str.charCodeAt(i); // possibly a lead surrogate\n    HEAP16[((outPtr)>>1)]=codeUnit;\n    outPtr += 2;\n  }\n  // Null-terminate the pointer to the HEAP.\n  HEAP16[((outPtr)>>1)]=0;\n  return outPtr - startPtr;\n}\n\n// Returns the number of bytes the given Javascript string takes if encoded as a UTF16 byte array, EXCLUDING the null terminator byte.\n\nfunction lengthBytesUTF16(str) {\n  return str.length*2;\n}\n\nfunction UTF32ToString(ptr, maxBytesToRead) {\n  assert(ptr % 4 == 0, 'Pointer passed to UTF32ToString must be aligned to four bytes!');\n  var i = 0;\n\n  var str = '';\n  // If maxBytesToRead is not passed explicitly, it will be undefined, and this\n  // will always evaluate to true. This saves on code size.\n  while (!(i >= maxBytesToRead / 4)) {\n    var utf32 = HEAP32[(((ptr)+(i*4))>>2)];\n    if (utf32 == 0) break;\n    ++i;\n    // Gotcha: fromCharCode constructs a character from a UTF-16 encoded code (pair), not from a Unicode code point! So encode the code point to UTF-16 for constructing.\n    // See http://unicode.org/faq/utf_bom.html#utf16-3\n    if (utf32 >= 0x10000) {\n      var ch = utf32 - 0x10000;\n      str += String.fromCharCode(0xD800 | (ch >> 10), 0xDC00 | (ch & 0x3FF));\n    } else {\n      str += String.fromCharCode(utf32);\n    }\n  }\n  return str;\n}\n\n// Copies the given Javascript String object 'str' to the emscripten HEAP at address 'outPtr',\n// null-terminated and encoded in UTF32 form. The copy will require at most str.length*4+4 bytes of space in the HEAP.\n// Use the function lengthBytesUTF32() to compute the exact number of bytes (excluding null terminator) that this function will write.\n// Parameters:\n//   str: the Javascript string to copy.\n//   outPtr: Byte address in Emscripten HEAP where to write the string to.\n//   maxBytesToWrite: The maximum number of bytes this function can write to the array. This count should include the null\n//                    terminator, i.e. if maxBytesToWrite=4, only the null terminator will be written and nothing else.\n//                    maxBytesToWrite<4 does not write any bytes to the output, not even the null terminator.\n// Returns the number of bytes written, EXCLUDING the null terminator.\n\nfunction stringToUTF32(str, outPtr, maxBytesToWrite) {\n  assert(outPtr % 4 == 0, 'Pointer passed to stringToUTF32 must be aligned to four bytes!');\n  assert(typeof maxBytesToWrite == 'number', 'stringToUTF32(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!');\n  // Backwards compatibility: if max bytes is not specified, assume unsafe unbounded write is allowed.\n  if (maxBytesToWrite === undefined) {\n    maxBytesToWrite = 0x7FFFFFFF;\n  }\n  if (maxBytesToWrite < 4) return 0;\n  var startPtr = outPtr;\n  var endPtr = startPtr + maxBytesToWrite - 4;\n  for (var i = 0; i < str.length; ++i) {\n    // Gotcha: charCodeAt returns a 16-bit word that is a UTF-16 encoded code unit, not a Unicode code point of the character! We must decode the string to UTF-32 to the heap.\n    // See http://unicode.org/faq/utf_bom.html#utf16-3\n    var codeUnit = str.charCodeAt(i); // possibly a lead surrogate\n    if (codeUnit >= 0xD800 && codeUnit <= 0xDFFF) {\n      var trailSurrogate = str.charCodeAt(++i);\n      codeUnit = 0x10000 + ((codeUnit & 0x3FF) << 10) | (trailSurrogate & 0x3FF);\n    }\n    HEAP32[((outPtr)>>2)]=codeUnit;\n    outPtr += 4;\n    if (outPtr + 4 > endPtr) break;\n  }\n  // Null-terminate the pointer to the HEAP.\n  HEAP32[((outPtr)>>2)]=0;\n  return outPtr - startPtr;\n}\n\n// Returns the number of bytes the given Javascript string takes if encoded as a UTF16 byte array, EXCLUDING the null terminator byte.\n\nfunction lengthBytesUTF32(str) {\n  var len = 0;\n  for (var i = 0; i < str.length; ++i) {\n    // Gotcha: charCodeAt returns a 16-bit word that is a UTF-16 encoded code unit, not a Unicode code point of the character! We must decode the string to UTF-32 to the heap.\n    // See http://unicode.org/faq/utf_bom.html#utf16-3\n    var codeUnit = str.charCodeAt(i);\n    if (codeUnit >= 0xD800 && codeUnit <= 0xDFFF) ++i; // possibly a lead surrogate, so skip over the tail surrogate.\n    len += 4;\n  }\n\n  return len;\n}\n\n// Allocate heap space for a JS string, and write it there.\n// It is the responsibility of the caller to free() that memory.\nfunction allocateUTF8(str) {\n  var size = lengthBytesUTF8(str) + 1;\n  var ret = _malloc(size);\n  if (ret) stringToUTF8Array(str, HEAP8, ret, size);\n  return ret;\n}\n\n// Allocate stack space for a JS string, and write it there.\nfunction allocateUTF8OnStack(str) {\n  var size = lengthBytesUTF8(str) + 1;\n  var ret = stackAlloc(size);\n  stringToUTF8Array(str, HEAP8, ret, size);\n  return ret;\n}\n\n// Deprecated: This function should not be called because it is unsafe and does not provide\n// a maximum length limit of how many bytes it is allowed to write. Prefer calling the\n// function stringToUTF8Array() instead, which takes in a maximum length that can be used\n// to be secure from out of bounds writes.\n/** @deprecated\n    @param {boolean=} dontAddNull */\nfunction writeStringToMemory(string, buffer, dontAddNull) {\n  warnOnce('writeStringToMemory is deprecated and should not be called! Use stringToUTF8() instead!');\n\n  var /** @type {number} */ lastChar, /** @type {number} */ end;\n  if (dontAddNull) {\n    // stringToUTF8Array always appends null. If we don't want to do that, remember the\n    // character that existed at the location where the null will be placed, and restore\n    // that after the write (below).\n    end = buffer + lengthBytesUTF8(string);\n    lastChar = HEAP8[end];\n  }\n  stringToUTF8(string, buffer, Infinity);\n  if (dontAddNull) HEAP8[end] = lastChar; // Restore the value under the null character.\n}\n\nfunction writeArrayToMemory(array, buffer) {\n  assert(array.length >= 0, 'writeArrayToMemory array must have a length (should be an array or typed array)')\n  HEAP8.set(array, buffer);\n}\n\n/** @param {boolean=} dontAddNull */\nfunction writeAsciiToMemory(str, buffer, dontAddNull) {\n  for (var i = 0; i < str.length; ++i) {\n    assert(str.charCodeAt(i) === str.charCodeAt(i)&0xff);\n    HEAP8[((buffer++)>>0)]=str.charCodeAt(i);\n  }\n  // Null-terminate the pointer to the HEAP.\n  if (!dontAddNull) HEAP8[((buffer)>>0)]=0;\n}\n\n\n\n// Memory management\n\nvar PAGE_SIZE = 16384;\nvar WASM_PAGE_SIZE = 65536;\nvar ASMJS_PAGE_SIZE = 16777216;\n\nfunction alignUp(x, multiple) {\n  if (x % multiple > 0) {\n    x += multiple - (x % multiple);\n  }\n  return x;\n}\n\nvar HEAP,\n/** @type {ArrayBuffer} */\n  buffer,\n/** @type {Int8Array} */\n  HEAP8,\n/** @type {Uint8Array} */\n  HEAPU8,\n/** @type {Int16Array} */\n  HEAP16,\n/** @type {Uint16Array} */\n  HEAPU16,\n/** @type {Int32Array} */\n  HEAP32,\n/** @type {Uint32Array} */\n  HEAPU32,\n/** @type {Float32Array} */\n  HEAPF32,\n/** @type {Float64Array} */\n  HEAPF64;\n\nfunction updateGlobalBufferAndViews(buf) {\n  buffer = buf;\n  Module['HEAP8'] = HEAP8 = new Int8Array(buf);\n  Module['HEAP16'] = HEAP16 = new Int16Array(buf);\n  Module['HEAP32'] = HEAP32 = new Int32Array(buf);\n  Module['HEAPU8'] = HEAPU8 = new Uint8Array(buf);\n  Module['HEAPU16'] = HEAPU16 = new Uint16Array(buf);\n  Module['HEAPU32'] = HEAPU32 = new Uint32Array(buf);\n  Module['HEAPF32'] = HEAPF32 = new Float32Array(buf);\n  Module['HEAPF64'] = HEAPF64 = new Float64Array(buf);\n}\n\nvar STATIC_BASE = 1024,\n    STACK_BASE = 5264464,\n    STACKTOP = STACK_BASE,\n    STACK_MAX = 21584,\n    DYNAMIC_BASE = 5264464,\n    DYNAMICTOP_PTR = 21424;\n\nassert(STACK_BASE % 16 === 0, 'stack must start aligned');\nassert(DYNAMIC_BASE % 16 === 0, 'heap must start aligned');\n\n\nvar TOTAL_STACK = 5242880;\nif (Module['TOTAL_STACK']) assert(TOTAL_STACK === Module['TOTAL_STACK'], 'the stack size can no longer be determined at runtime')\n\nvar INITIAL_INITIAL_MEMORY = Module['INITIAL_MEMORY'] || 16777216;if (!Object.getOwnPropertyDescriptor(Module, 'INITIAL_MEMORY')) Object.defineProperty(Module, 'INITIAL_MEMORY', { configurable: true, get: function() { abort('Module.INITIAL_MEMORY has been replaced with plain INITIAL_INITIAL_MEMORY (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)') } });\n\nassert(INITIAL_INITIAL_MEMORY >= TOTAL_STACK, 'INITIAL_MEMORY should be larger than TOTAL_STACK, was ' + INITIAL_INITIAL_MEMORY + '! (TOTAL_STACK=' + TOTAL_STACK + ')');\n\n// check for full engine support (use string 'subarray' to avoid closure compiler confusion)\nassert(typeof Int32Array !== 'undefined' && typeof Float64Array !== 'undefined' && Int32Array.prototype.subarray !== undefined && Int32Array.prototype.set !== undefined,\n       'JS engine does not provide full typed array support');\n\n\n\n\n\n\n\n\n// In non-standalone/normal mode, we create the memory here.\n\n\n\n// Create the main memory. (Note: this isn't used in STANDALONE_WASM mode since the wasm\n// memory is created in the wasm, not in JS.)\n\n  if (Module['wasmMemory']) {\n    wasmMemory = Module['wasmMemory'];\n  } else\n  {\n    wasmMemory = new WebAssembly.Memory({\n      'initial': INITIAL_INITIAL_MEMORY / WASM_PAGE_SIZE\n      ,\n      'maximum': INITIAL_INITIAL_MEMORY / WASM_PAGE_SIZE\n    });\n  }\n\n\nif (wasmMemory) {\n  buffer = wasmMemory.buffer;\n}\n\n// If the user provides an incorrect length, just use that length instead rather than providing the user to\n// specifically provide the memory length with Module['INITIAL_MEMORY'].\nINITIAL_INITIAL_MEMORY = buffer.byteLength;\nassert(INITIAL_INITIAL_MEMORY % WASM_PAGE_SIZE === 0);\nupdateGlobalBufferAndViews(buffer);\n\nHEAP32[DYNAMICTOP_PTR>>2] = DYNAMIC_BASE;\n\n\n\n\n\n\n// Initializes the stack cookie. Called at the startup of main and at the startup of each thread in pthreads mode.\nfunction writeStackCookie() {\n  assert((STACK_MAX & 3) == 0);\n  // The stack grows downwards\n  HEAPU32[(STACK_MAX >> 2)+1] = 0x2135467;\n  HEAPU32[(STACK_MAX >> 2)+2] = 0x89BACDFE;\n  // Also test the global address 0 for integrity.\n  // We don't do this with ASan because ASan does its own checks for this.\n  HEAP32[0] = 0x63736d65; /* 'emsc' */\n}\n\nfunction checkStackCookie() {\n  var cookie1 = HEAPU32[(STACK_MAX >> 2)+1];\n  var cookie2 = HEAPU32[(STACK_MAX >> 2)+2];\n  if (cookie1 != 0x2135467 || cookie2 != 0x89BACDFE) {\n    abort('Stack overflow! Stack cookie has been overwritten, expected hex dwords 0x89BACDFE and 0x2135467, but received 0x' + cookie2.toString(16) + ' ' + cookie1.toString(16));\n  }\n  // Also test the global address 0 for integrity.\n  // We don't do this with ASan because ASan does its own checks for this.\n  if (HEAP32[0] !== 0x63736d65 /* 'emsc' */) abort('Runtime error: The application has corrupted its heap memory area (address zero)!');\n}\n\n\n\n\n\n// Endianness check (note: assumes compiler arch was little-endian)\n(function() {\n  var h16 = new Int16Array(1);\n  var h8 = new Int8Array(h16.buffer);\n  h16[0] = 0x6373;\n  if (h8[0] !== 0x73 || h8[1] !== 0x63) throw 'Runtime error: expected the system to be little-endian!';\n})();\n\nfunction abortFnPtrError(ptr, sig) {\n\tabort(\"Invalid function pointer \" + ptr + \" called with signature '\" + sig + \"'. Perhaps this is an invalid value (e.g. caused by calling a virtual method on a NULL pointer)? Or calling a function with an incorrect type, which will fail? (it is worth building your source files with -Werror (warnings are errors), as warnings can indicate undefined behavior which can cause this). Build with ASSERTIONS=2 for more info.\");\n}\n\n\n\nfunction callRuntimeCallbacks(callbacks) {\n  while(callbacks.length > 0) {\n    var callback = callbacks.shift();\n    if (typeof callback == 'function') {\n      callback(Module); // Pass the module as the first argument.\n      continue;\n    }\n    var func = callback.func;\n    if (typeof func === 'number') {\n      if (callback.arg === undefined) {\n        Module['dynCall_v'](func);\n      } else {\n        Module['dynCall_vi'](func, callback.arg);\n      }\n    } else {\n      func(callback.arg === undefined ? null : callback.arg);\n    }\n  }\n}\n\nvar __ATPRERUN__  = []; // functions called before the runtime is initialized\nvar __ATINIT__    = []; // functions called during startup\nvar __ATMAIN__    = []; // functions called when main() is to be run\nvar __ATEXIT__    = []; // functions called during shutdown\nvar __ATPOSTRUN__ = []; // functions called after the main() is called\n\nvar runtimeInitialized = false;\nvar runtimeExited = false;\n\n\nfunction preRun() {\n\n  if (Module['preRun']) {\n    if (typeof Module['preRun'] == 'function') Module['preRun'] = [Module['preRun']];\n    while (Module['preRun'].length) {\n      addOnPreRun(Module['preRun'].shift());\n    }\n  }\n\n  callRuntimeCallbacks(__ATPRERUN__);\n}\n\nfunction initRuntime() {\n  checkStackCookie();\n  assert(!runtimeInitialized);\n  runtimeInitialized = true;\n  \n  callRuntimeCallbacks(__ATINIT__);\n}\n\nfunction preMain() {\n  checkStackCookie();\n  \n  callRuntimeCallbacks(__ATMAIN__);\n}\n\nfunction exitRuntime() {\n  checkStackCookie();\n  runtimeExited = true;\n}\n\nfunction postRun() {\n  checkStackCookie();\n\n  if (Module['postRun']) {\n    if (typeof Module['postRun'] == 'function') Module['postRun'] = [Module['postRun']];\n    while (Module['postRun'].length) {\n      addOnPostRun(Module['postRun'].shift());\n    }\n  }\n\n  callRuntimeCallbacks(__ATPOSTRUN__);\n}\n\nfunction addOnPreRun(cb) {\n  __ATPRERUN__.unshift(cb);\n}\n\nfunction addOnInit(cb) {\n  __ATINIT__.unshift(cb);\n}\n\nfunction addOnPreMain(cb) {\n  __ATMAIN__.unshift(cb);\n}\n\nfunction addOnExit(cb) {\n}\n\nfunction addOnPostRun(cb) {\n  __ATPOSTRUN__.unshift(cb);\n}\n\n/** @param {number|boolean=} ignore */\nfunction unSign(value, bits, ignore) {\n  if (value >= 0) {\n    return value;\n  }\n  return bits <= 32 ? 2*Math.abs(1 << (bits-1)) + value // Need some trickery, since if bits == 32, we are right at the limit of the bits JS uses in bitshifts\n                    : Math.pow(2, bits)         + value;\n}\n/** @param {number|boolean=} ignore */\nfunction reSign(value, bits, ignore) {\n  if (value <= 0) {\n    return value;\n  }\n  var half = bits <= 32 ? Math.abs(1 << (bits-1)) // abs is needed if bits == 32\n                        : Math.pow(2, bits-1);\n  if (value >= half && (bits <= 32 || value > half)) { // for huge values, we can hit the precision limit and always get true here. so don't do that\n                                                       // but, in general there is no perfect solution here. With 64-bit ints, we get rounding and errors\n                                                       // TODO: In i64 mode 1, resign the two parts separately and safely\n    value = -2*half + value; // Cannot bitshift half, as it may be at the limit of the bits JS uses in bitshifts\n  }\n  return value;\n}\n\n\n\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/imul\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/fround\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/clz32\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/trunc\n\nassert(Math.imul, 'This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill');\nassert(Math.fround, 'This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill');\nassert(Math.clz32, 'This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill');\nassert(Math.trunc, 'This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill');\n\nvar Math_abs = Math.abs;\nvar Math_cos = Math.cos;\nvar Math_sin = Math.sin;\nvar Math_tan = Math.tan;\nvar Math_acos = Math.acos;\nvar Math_asin = Math.asin;\nvar Math_atan = Math.atan;\nvar Math_atan2 = Math.atan2;\nvar Math_exp = Math.exp;\nvar Math_log = Math.log;\nvar Math_sqrt = Math.sqrt;\nvar Math_ceil = Math.ceil;\nvar Math_floor = Math.floor;\nvar Math_pow = Math.pow;\nvar Math_imul = Math.imul;\nvar Math_fround = Math.fround;\nvar Math_round = Math.round;\nvar Math_min = Math.min;\nvar Math_max = Math.max;\nvar Math_clz32 = Math.clz32;\nvar Math_trunc = Math.trunc;\n\n\n\n// A counter of dependencies for calling run(). If we need to\n// do asynchronous work before running, increment this and\n// decrement it. Incrementing must happen in a place like\n// Module.preRun (used by emcc to add file preloading).\n// Note that you can add dependencies in preRun, even though\n// it happens right before run - run will be postponed until\n// the dependencies are met.\nvar runDependencies = 0;\nvar runDependencyWatcher = null;\nvar dependenciesFulfilled = null; // overridden to take different actions when all run dependencies are fulfilled\nvar runDependencyTracking = {};\n\nfunction getUniqueRunDependency(id) {\n  var orig = id;\n  while (1) {\n    if (!runDependencyTracking[id]) return id;\n    id = orig + Math.random();\n  }\n}\n\nfunction addRunDependency(id) {\n  runDependencies++;\n\n  if (Module['monitorRunDependencies']) {\n    Module['monitorRunDependencies'](runDependencies);\n  }\n\n  if (id) {\n    assert(!runDependencyTracking[id]);\n    runDependencyTracking[id] = 1;\n    if (runDependencyWatcher === null && typeof setInterval !== 'undefined') {\n      // Check for missing dependencies every few seconds\n      runDependencyWatcher = setInterval(function() {\n        if (ABORT) {\n          clearInterval(runDependencyWatcher);\n          runDependencyWatcher = null;\n          return;\n        }\n        var shown = false;\n        for (var dep in runDependencyTracking) {\n          if (!shown) {\n            shown = true;\n            err('still waiting on run dependencies:');\n          }\n          err('dependency: ' + dep);\n        }\n        if (shown) {\n          err('(end of list)');\n        }\n      }, 10000);\n    }\n  } else {\n    err('warning: run dependency added without ID');\n  }\n}\n\nfunction removeRunDependency(id) {\n  runDependencies--;\n\n  if (Module['monitorRunDependencies']) {\n    Module['monitorRunDependencies'](runDependencies);\n  }\n\n  if (id) {\n    assert(runDependencyTracking[id]);\n    delete runDependencyTracking[id];\n  } else {\n    err('warning: run dependency removed without ID');\n  }\n  if (runDependencies == 0) {\n    if (runDependencyWatcher !== null) {\n      clearInterval(runDependencyWatcher);\n      runDependencyWatcher = null;\n    }\n    if (dependenciesFulfilled) {\n      var callback = dependenciesFulfilled;\n      dependenciesFulfilled = null;\n      callback(); // can add another dependenciesFulfilled\n    }\n  }\n}\n\nModule[\"preloadedImages\"] = {}; // maps url to image data\nModule[\"preloadedAudios\"] = {}; // maps url to audio data\n\n/** @param {string|number=} what */\nfunction abort(what) {\n  if (Module['onAbort']) {\n    Module['onAbort'](what);\n  }\n\n  what += '';\n  out(what);\n  err(what);\n\n  ABORT = true;\n  EXITSTATUS = 1;\n\n  var output = 'abort(' + what + ') at ' + stackTrace();\n  what = output;\n\n  // Throw a wasm runtime error, because a JS error might be seen as a foreign\n  // exception, which means we'd run destructors on it. We need the error to\n  // simply make the program stop.\n  throw new WebAssembly.RuntimeError(what);\n}\n\n\nvar memoryInitializer = null;\n\n\n\n\n\n\n\n// show errors on likely calls to FS when it was not included\nvar FS = {\n  error: function() {\n    abort('Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with  -s FORCE_FILESYSTEM=1');\n  },\n  init: function() { FS.error() },\n  createDataFile: function() { FS.error() },\n  createPreloadedFile: function() { FS.error() },\n  createLazyFile: function() { FS.error() },\n  open: function() { FS.error() },\n  mkdev: function() { FS.error() },\n  registerDevice: function() { FS.error() },\n  analyzePath: function() { FS.error() },\n  loadFilesFromDB: function() { FS.error() },\n\n  ErrnoError: function ErrnoError() { FS.error() },\n};\nModule['FS_createDataFile'] = FS.createDataFile;\nModule['FS_createPreloadedFile'] = FS.createPreloadedFile;\n\n\n\n\n\nfunction hasPrefix(str, prefix) {\n  return String.prototype.startsWith ?\n      str.startsWith(prefix) :\n      str.indexOf(prefix) === 0;\n}\n\n// Prefix of data URIs emitted by SINGLE_FILE and related options.\nvar dataURIPrefix = 'data:application/octet-stream;base64,';\n\n// Indicates whether filename is a base64 data URI.\nfunction isDataURI(filename) {\n  return hasPrefix(filename, dataURIPrefix);\n}\n\nvar fileURIPrefix = \"file://\";\n\n// Indicates whether filename is delivered via file protocol (as opposed to http/https)\nfunction isFileURI(filename) {\n  return hasPrefix(filename, fileURIPrefix);\n}\n\n\n\nfunction createExportWrapper(name, fixedasm) {\n  return function() {\n    var displayName = name;\n    var asm = fixedasm;\n    if (!fixedasm) {\n      asm = Module['asm'];\n    }\n    assert(runtimeInitialized, 'native function `' + displayName + '` called before runtime initialization');\n    assert(!runtimeExited, 'native function `' + displayName + '` called after runtime exit (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n    if (!asm[name]) {\n      assert(asm[name], 'exported native function `' + displayName + '` not found');\n    }\n    return asm[name].apply(null, arguments);\n  };\n}\n\nvar wasmBinaryFile = 'bezier_fit.wasm';\nif (!isDataURI(wasmBinaryFile)) {\n  wasmBinaryFile = locateFile(wasmBinaryFile);\n}\n\nfunction getBinary() {\n  try {\n    if (wasmBinary) {\n      return new Uint8Array(wasmBinary);\n    }\n\n    if (readBinary) {\n      return readBinary(wasmBinaryFile);\n    } else {\n      throw \"both async and sync fetching of the wasm failed\";\n    }\n  }\n  catch (err) {\n    abort(err);\n  }\n}\n\nfunction getBinaryPromise() {\n  // If we don't have the binary yet, and have the Fetch api, use that;\n  // in some environments, like Electron's render process, Fetch api may be present, but have a different context than expected, let's only use it on the Web\n  if (!wasmBinary && (ENVIRONMENT_IS_WEB || ENVIRONMENT_IS_WORKER) && typeof fetch === 'function'\n      ) {\n    return fetch(wasmBinaryFile, { credentials: 'same-origin' }).then(function(response) {\n      if (!response['ok']) {\n        throw \"failed to load wasm binary file at '\" + wasmBinaryFile + \"'\";\n      }\n      return response['arrayBuffer']();\n    }).catch(function () {\n      return getBinary();\n    });\n  }\n  // Otherwise, getBinary should be able to get it synchronously\n  return new Promise(function(resolve, reject) {\n    resolve(getBinary());\n  });\n}\n\n\n\n// Create the wasm instance.\n// Receives the wasm imports, returns the exports.\nfunction createWasm() {\n  // prepare imports\n  var info = {\n    'env': asmLibraryArg,\n    'wasi_snapshot_preview1': asmLibraryArg\n  };\n  // Load the wasm module and create an instance of using native support in the JS engine.\n  // handle a generated wasm instance, receiving its exports and\n  // performing other necessary setup\n  /** @param {WebAssembly.Module=} module*/\n  function receiveInstance(instance, module) {\n    var exports = instance.exports;\n    Module['asm'] = exports;\n    removeRunDependency('wasm-instantiate');\n  }\n  // we can't run yet (except in a pthread, where we have a custom sync instantiator)\n  addRunDependency('wasm-instantiate');\n\n\n  // Async compilation can be confusing when an error on the page overwrites Module\n  // (for example, if the order of elements is wrong, and the one defining Module is\n  // later), so we save Module and check it later.\n  var trueModule = Module;\n  function receiveInstantiatedSource(output) {\n    // 'output' is a WebAssemblyInstantiatedSource object which has both the module and instance.\n    // receiveInstance() will swap in the exports (to Module.asm) so they can be called\n    assert(Module === trueModule, 'the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?');\n    trueModule = null;\n    // TODO: Due to Closure regression https://github.com/google/closure-compiler/issues/3193, the above line no longer optimizes out down to the following line.\n    // When the regression is fixed, can restore the above USE_PTHREADS-enabled path.\n    receiveInstance(output['instance']);\n  }\n\n\n  function instantiateArrayBuffer(receiver) {\n    return getBinaryPromise().then(function(binary) {\n      return WebAssembly.instantiate(binary, info);\n    }).then(receiver, function(reason) {\n      err('failed to asynchronously prepare wasm: ' + reason);\n      abort(reason);\n    });\n  }\n\n  // Prefer streaming instantiation if available.\n  function instantiateAsync() {\n    if (!wasmBinary &&\n        typeof WebAssembly.instantiateStreaming === 'function' &&\n        !isDataURI(wasmBinaryFile) &&\n        typeof fetch === 'function') {\n      fetch(wasmBinaryFile, { credentials: 'same-origin' }).then(function (response) {\n        var result = WebAssembly.instantiateStreaming(response, info);\n        return result.then(receiveInstantiatedSource, function(reason) {\n            // We expect the most common failure cause to be a bad MIME type for the binary,\n            // in which case falling back to ArrayBuffer instantiation should work.\n            err('wasm streaming compile failed: ' + reason);\n            err('falling back to ArrayBuffer instantiation');\n            return instantiateArrayBuffer(receiveInstantiatedSource);\n          });\n      });\n    } else {\n      return instantiateArrayBuffer(receiveInstantiatedSource);\n    }\n  }\n  // User shell pages can write their own Module.instantiateWasm = function(imports, successCallback) callback\n  // to manually instantiate the Wasm module themselves. This allows pages to run the instantiation parallel\n  // to any other async startup actions they are performing.\n  if (Module['instantiateWasm']) {\n    try {\n      var exports = Module['instantiateWasm'](info, receiveInstance);\n      return exports;\n    } catch(e) {\n      err('Module.instantiateWasm callback failed with error: ' + e);\n      return false;\n    }\n  }\n\n  instantiateAsync();\n  return {}; // no exports yet; we'll fill them in later\n}\n\n\n// Globals used by JS i64 conversions\nvar tempDouble;\nvar tempI64;\n\n// === Body ===\n\nvar ASM_CONSTS = {\n  \n};\n\n\n\n\n// STATICTOP = STATIC_BASE + 20560;\n/* global initializers */  __ATINIT__.push({ func: function() { ___wasm_call_ctors() } });\n\n\n\n\n/* no memory initializer */\n// {{PRE_LIBRARY}}\n\n\n  function abortStackOverflow(allocSize) {\n      abort('Stack overflow! Attempted to allocate ' + allocSize + ' bytes on the stack, but stack has only ' + (STACK_MAX - stackSave() + allocSize) + ' bytes available!');\n    }\n\n  function demangle(func) {\n      warnOnce('warning: build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling');\n      return func;\n    }\n\n  function demangleAll(text) {\n      var regex =\n        /\\b_Z[\\w\\d_]+/g;\n      return text.replace(regex,\n        function(x) {\n          var y = demangle(x);\n          return x === y ? x : (y + ' [' + x + ']');\n        });\n    }\n\n  function jsStackTrace() {\n      var err = new Error();\n      if (!err.stack) {\n        // IE10+ special cases: It does have callstack info, but it is only populated if an Error object is thrown,\n        // so try that as a special-case.\n        try {\n          throw new Error();\n        } catch(e) {\n          err = e;\n        }\n        if (!err.stack) {\n          return '(no stack trace available)';\n        }\n      }\n      return err.stack.toString();\n    }\n\n  function stackTrace() {\n      var js = jsStackTrace();\n      if (Module['extraStackTrace']) js += '\\n' + Module['extraStackTrace']();\n      return demangleAll(js);\n    }\n\n  function ___cxa_allocate_exception(size) {\n      return _malloc(size);\n    }\n\n  \n  function _atexit(func, arg) {\n      warnOnce('atexit() called, but EXIT_RUNTIME is not set, so atexits() will not be called. set EXIT_RUNTIME to 1 (see the FAQ)');\n      __ATEXIT__.unshift({ func: func, arg: arg });\n    }function ___cxa_atexit(a0,a1\n  ) {\n  return _atexit(a0,a1);\n  }\n\n  \n  var ___exception_infos={};\n  \n  var ___exception_last=0;\n  \n  function __ZSt18uncaught_exceptionv() { // std::uncaught_exception()\n      return __ZSt18uncaught_exceptionv.uncaught_exceptions > 0;\n    }function ___cxa_throw(ptr, type, destructor) {\n      ___exception_infos[ptr] = {\n        ptr: ptr,\n        adjusted: [ptr],\n        type: type,\n        destructor: destructor,\n        refcount: 0,\n        caught: false,\n        rethrown: false\n      };\n      ___exception_last = ptr;\n      if (!(\"uncaught_exception\" in __ZSt18uncaught_exceptionv)) {\n        __ZSt18uncaught_exceptionv.uncaught_exceptions = 1;\n      } else {\n        __ZSt18uncaught_exceptionv.uncaught_exceptions++;\n      }\n      throw ptr + \" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch.\";\n    }\n\n  function ___handle_stack_overflow() {\n      abort('stack overflow')\n    }\n\n  \n  function setErrNo(value) {\n      HEAP32[((___errno_location())>>2)]=value;\n      return value;\n    }function ___map_file(pathname, size) {\n      setErrNo(63);\n      return -1;\n    }\n\n  \n  \n  \n  var PATH={splitPath:function(filename) {\n        var splitPathRe = /^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;\n        return splitPathRe.exec(filename).slice(1);\n      },normalizeArray:function(parts, allowAboveRoot) {\n        // if the path tries to go above the root, `up` ends up > 0\n        var up = 0;\n        for (var i = parts.length - 1; i >= 0; i--) {\n          var last = parts[i];\n          if (last === '.') {\n            parts.splice(i, 1);\n          } else if (last === '..') {\n            parts.splice(i, 1);\n            up++;\n          } else if (up) {\n            parts.splice(i, 1);\n            up--;\n          }\n        }\n        // if the path is allowed to go above the root, restore leading ..s\n        if (allowAboveRoot) {\n          for (; up; up--) {\n            parts.unshift('..');\n          }\n        }\n        return parts;\n      },normalize:function(path) {\n        var isAbsolute = path.charAt(0) === '/',\n            trailingSlash = path.substr(-1) === '/';\n        // Normalize the path\n        path = PATH.normalizeArray(path.split('/').filter(function(p) {\n          return !!p;\n        }), !isAbsolute).join('/');\n        if (!path && !isAbsolute) {\n          path = '.';\n        }\n        if (path && trailingSlash) {\n          path += '/';\n        }\n        return (isAbsolute ? '/' : '') + path;\n      },dirname:function(path) {\n        var result = PATH.splitPath(path),\n            root = result[0],\n            dir = result[1];\n        if (!root && !dir) {\n          // No dirname whatsoever\n          return '.';\n        }\n        if (dir) {\n          // It has a dirname, strip trailing slash\n          dir = dir.substr(0, dir.length - 1);\n        }\n        return root + dir;\n      },basename:function(path) {\n        // EMSCRIPTEN return '/'' for '/', not an empty string\n        if (path === '/') return '/';\n        var lastSlash = path.lastIndexOf('/');\n        if (lastSlash === -1) return path;\n        return path.substr(lastSlash+1);\n      },extname:function(path) {\n        return PATH.splitPath(path)[3];\n      },join:function() {\n        var paths = Array.prototype.slice.call(arguments, 0);\n        return PATH.normalize(paths.join('/'));\n      },join2:function(l, r) {\n        return PATH.normalize(l + '/' + r);\n      }};var SYSCALLS={mappings:{},buffers:[null,[],[]],printChar:function(stream, curr) {\n        var buffer = SYSCALLS.buffers[stream];\n        assert(buffer);\n        if (curr === 0 || curr === 10) {\n          (stream === 1 ? out : err)(UTF8ArrayToString(buffer, 0));\n          buffer.length = 0;\n        } else {\n          buffer.push(curr);\n        }\n      },varargs:undefined,get:function() {\n        assert(SYSCALLS.varargs != undefined);\n        SYSCALLS.varargs += 4;\n        var ret = HEAP32[(((SYSCALLS.varargs)-(4))>>2)];\n        return ret;\n      },getStr:function(ptr) {\n        var ret = UTF8ToString(ptr);\n        return ret;\n      },get64:function(low, high) {\n        if (low >= 0) assert(high === 0);\n        else assert(high === -1);\n        return low;\n      }};function syscallMunmap(addr, len) {\n      if ((addr | 0) === -1 || len === 0) {\n        return -28;\n      }\n      // TODO: support unmmap'ing parts of allocations\n      var info = SYSCALLS.mappings[addr];\n      if (!info) return 0;\n      if (len === info.len) {\n        // Without FS support, only anonymous mappings are supported.\n        assert(SYSCALLS.mappings[addr].flags & 32);\n        SYSCALLS.mappings[addr] = null;\n        if (info.allocated) {\n          _free(info.malloc);\n        }\n      }\n      return 0;\n    }function ___sys_munmap(addr, len) {\n      return syscallMunmap(addr, len);\n    }\n\n  function _abort() {\n      abort();\n    }\n\n  function _emscripten_get_sbrk_ptr() {\n      return 21424;\n    }\n\n  function _emscripten_memcpy_big(dest, src, num) {\n      HEAPU8.copyWithin(dest, src, src + num);\n    }\n\n  \n  function _emscripten_get_heap_size() {\n      return HEAPU8.length;\n    }\n  \n  function abortOnCannotGrowMemory(requestedSize) {\n      abort('Cannot enlarge memory arrays to size ' + requestedSize + ' bytes (OOM). Either (1) compile with  -s INITIAL_MEMORY=X  with X higher than the current value ' + HEAP8.length + ', (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ');\n    }function _emscripten_resize_heap(requestedSize) {\n      requestedSize = requestedSize >>> 0;\n      abortOnCannotGrowMemory(requestedSize);\n    }\n\n  \n  \n  var ENV={};\n  \n  function __getExecutableName() {\n      return thisProgram || './this.program';\n    }function getEnvStrings() {\n      if (!getEnvStrings.strings) {\n        // Default values.\n        var env = {\n          'USER': 'web_user',\n          'LOGNAME': 'web_user',\n          'PATH': '/',\n          'PWD': '/',\n          'HOME': '/home/web_user',\n          // Browser language detection #8751\n          'LANG': ((typeof navigator === 'object' && navigator.languages && navigator.languages[0]) || 'C').replace('-', '_') + '.UTF-8',\n          '_': __getExecutableName()\n        };\n        // Apply the user-provided values, if any.\n        for (var x in ENV) {\n          env[x] = ENV[x];\n        }\n        var strings = [];\n        for (var x in env) {\n          strings.push(x + '=' + env[x]);\n        }\n        getEnvStrings.strings = strings;\n      }\n      return getEnvStrings.strings;\n    }function _environ_get(__environ, environ_buf) {\n      var bufSize = 0;\n      getEnvStrings().forEach(function(string, i) {\n        var ptr = environ_buf + bufSize;\n        HEAP32[(((__environ)+(i * 4))>>2)]=ptr;\n        writeAsciiToMemory(string, ptr);\n        bufSize += string.length + 1;\n      });\n      return 0;\n    }\n\n  function _environ_sizes_get(penviron_count, penviron_buf_size) {\n      var strings = getEnvStrings();\n      HEAP32[((penviron_count)>>2)]=strings.length;\n      var bufSize = 0;\n      strings.forEach(function(string) {\n        bufSize += string.length + 1;\n      });\n      HEAP32[((penviron_buf_size)>>2)]=bufSize;\n      return 0;\n    }\n\n  function _fd_close(fd) {\n      abort('it should not be possible to operate on streams when !SYSCALLS_REQUIRE_FILESYSTEM');\n      return 0;\n    }\n\n  function _fd_read(fd, iov, iovcnt, pnum) {\n      var stream = SYSCALLS.getStreamFromFD(fd);\n      var num = SYSCALLS.doReadv(stream, iov, iovcnt);\n      HEAP32[((pnum)>>2)]=num\n      return 0;\n    }\n\n  function _fd_seek(fd, offset_low, offset_high, whence, newOffset) {\n  abort('it should not be possible to operate on streams when !SYSCALLS_REQUIRE_FILESYSTEM')}\n\n  \n  function flush_NO_FILESYSTEM() {\n      // flush anything remaining in the buffers during shutdown\n      if (typeof _fflush !== 'undefined') _fflush(0);\n      var buffers = SYSCALLS.buffers;\n      if (buffers[1].length) SYSCALLS.printChar(1, 10);\n      if (buffers[2].length) SYSCALLS.printChar(2, 10);\n    }function _fd_write(fd, iov, iovcnt, pnum) {\n      // hack to support printf in SYSCALLS_REQUIRE_FILESYSTEM=0\n      var num = 0;\n      for (var i = 0; i < iovcnt; i++) {\n        var ptr = HEAP32[(((iov)+(i*8))>>2)];\n        var len = HEAP32[(((iov)+(i*8 + 4))>>2)];\n        for (var j = 0; j < len; j++) {\n          SYSCALLS.printChar(fd, HEAPU8[ptr+j]);\n        }\n        num += len;\n      }\n      HEAP32[((pnum)>>2)]=num\n      return 0;\n    }\n\n  function _setTempRet0($i) {\n      setTempRet0(($i) | 0);\n    }\n\n  \n  \n  function __isLeapYear(year) {\n        return year%4 === 0 && (year%100 !== 0 || year%400 === 0);\n    }\n  \n  function __arraySum(array, index) {\n      var sum = 0;\n      for (var i = 0; i <= index; sum += array[i++]) {\n        // no-op\n      }\n      return sum;\n    }\n  \n  \n  var __MONTH_DAYS_LEAP=[31,29,31,30,31,30,31,31,30,31,30,31];\n  \n  var __MONTH_DAYS_REGULAR=[31,28,31,30,31,30,31,31,30,31,30,31];function __addDays(date, days) {\n      var newDate = new Date(date.getTime());\n      while(days > 0) {\n        var leap = __isLeapYear(newDate.getFullYear());\n        var currentMonth = newDate.getMonth();\n        var daysInCurrentMonth = (leap ? __MONTH_DAYS_LEAP : __MONTH_DAYS_REGULAR)[currentMonth];\n  \n        if (days > daysInCurrentMonth-newDate.getDate()) {\n          // we spill over to next month\n          days -= (daysInCurrentMonth-newDate.getDate()+1);\n          newDate.setDate(1);\n          if (currentMonth < 11) {\n            newDate.setMonth(currentMonth+1)\n          } else {\n            newDate.setMonth(0);\n            newDate.setFullYear(newDate.getFullYear()+1);\n          }\n        } else {\n          // we stay in current month\n          newDate.setDate(newDate.getDate()+days);\n          return newDate;\n        }\n      }\n  \n      return newDate;\n    }function _strftime(s, maxsize, format, tm) {\n      // size_t strftime(char *restrict s, size_t maxsize, const char *restrict format, const struct tm *restrict timeptr);\n      // http://pubs.opengroup.org/onlinepubs/009695399/functions/strftime.html\n  \n      var tm_zone = HEAP32[(((tm)+(40))>>2)];\n  \n      var date = {\n        tm_sec: HEAP32[((tm)>>2)],\n        tm_min: HEAP32[(((tm)+(4))>>2)],\n        tm_hour: HEAP32[(((tm)+(8))>>2)],\n        tm_mday: HEAP32[(((tm)+(12))>>2)],\n        tm_mon: HEAP32[(((tm)+(16))>>2)],\n        tm_year: HEAP32[(((tm)+(20))>>2)],\n        tm_wday: HEAP32[(((tm)+(24))>>2)],\n        tm_yday: HEAP32[(((tm)+(28))>>2)],\n        tm_isdst: HEAP32[(((tm)+(32))>>2)],\n        tm_gmtoff: HEAP32[(((tm)+(36))>>2)],\n        tm_zone: tm_zone ? UTF8ToString(tm_zone) : ''\n      };\n  \n      var pattern = UTF8ToString(format);\n  \n      // expand format\n      var EXPANSION_RULES_1 = {\n        '%c': '%a %b %d %H:%M:%S %Y',     // Replaced by the locale's appropriate date and time representation - e.g., Mon Aug  3 14:02:01 2013\n        '%D': '%m/%d/%y',                 // Equivalent to %m / %d / %y\n        '%F': '%Y-%m-%d',                 // Equivalent to %Y - %m - %d\n        '%h': '%b',                       // Equivalent to %b\n        '%r': '%I:%M:%S %p',              // Replaced by the time in a.m. and p.m. notation\n        '%R': '%H:%M',                    // Replaced by the time in 24-hour notation\n        '%T': '%H:%M:%S',                 // Replaced by the time\n        '%x': '%m/%d/%y',                 // Replaced by the locale's appropriate date representation\n        '%X': '%H:%M:%S',                 // Replaced by the locale's appropriate time representation\n        // Modified Conversion Specifiers\n        '%Ec': '%c',                      // Replaced by the locale's alternative appropriate date and time representation.\n        '%EC': '%C',                      // Replaced by the name of the base year (period) in the locale's alternative representation.\n        '%Ex': '%m/%d/%y',                // Replaced by the locale's alternative date representation.\n        '%EX': '%H:%M:%S',                // Replaced by the locale's alternative time representation.\n        '%Ey': '%y',                      // Replaced by the offset from %EC (year only) in the locale's alternative representation.\n        '%EY': '%Y',                      // Replaced by the full alternative year representation.\n        '%Od': '%d',                      // Replaced by the day of the month, using the locale's alternative numeric symbols, filled as needed with leading zeros if there is any alternative symbol for zero; otherwise, with leading <space> characters.\n        '%Oe': '%e',                      // Replaced by the day of the month, using the locale's alternative numeric symbols, filled as needed with leading <space> characters.\n        '%OH': '%H',                      // Replaced by the hour (24-hour clock) using the locale's alternative numeric symbols.\n        '%OI': '%I',                      // Replaced by the hour (12-hour clock) using the locale's alternative numeric symbols.\n        '%Om': '%m',                      // Replaced by the month using the locale's alternative numeric symbols.\n        '%OM': '%M',                      // Replaced by the minutes using the locale's alternative numeric symbols.\n        '%OS': '%S',                      // Replaced by the seconds using the locale's alternative numeric symbols.\n        '%Ou': '%u',                      // Replaced by the weekday as a number in the locale's alternative representation (Monday=1).\n        '%OU': '%U',                      // Replaced by the week number of the year (Sunday as the first day of the week, rules corresponding to %U ) using the locale's alternative numeric symbols.\n        '%OV': '%V',                      // Replaced by the week number of the year (Monday as the first day of the week, rules corresponding to %V ) using the locale's alternative numeric symbols.\n        '%Ow': '%w',                      // Replaced by the number of the weekday (Sunday=0) using the locale's alternative numeric symbols.\n        '%OW': '%W',                      // Replaced by the week number of the year (Monday as the first day of the week) using the locale's alternative numeric symbols.\n        '%Oy': '%y',                      // Replaced by the year (offset from %C ) using the locale's alternative numeric symbols.\n      };\n      for (var rule in EXPANSION_RULES_1) {\n        pattern = pattern.replace(new RegExp(rule, 'g'), EXPANSION_RULES_1[rule]);\n      }\n  \n      var WEEKDAYS = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n      var MONTHS = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n  \n      function leadingSomething(value, digits, character) {\n        var str = typeof value === 'number' ? value.toString() : (value || '');\n        while (str.length < digits) {\n          str = character[0]+str;\n        }\n        return str;\n      }\n  \n      function leadingNulls(value, digits) {\n        return leadingSomething(value, digits, '0');\n      }\n  \n      function compareByDay(date1, date2) {\n        function sgn(value) {\n          return value < 0 ? -1 : (value > 0 ? 1 : 0);\n        }\n  \n        var compare;\n        if ((compare = sgn(date1.getFullYear()-date2.getFullYear())) === 0) {\n          if ((compare = sgn(date1.getMonth()-date2.getMonth())) === 0) {\n            compare = sgn(date1.getDate()-date2.getDate());\n          }\n        }\n        return compare;\n      }\n  \n      function getFirstWeekStartDate(janFourth) {\n          switch (janFourth.getDay()) {\n            case 0: // Sunday\n              return new Date(janFourth.getFullYear()-1, 11, 29);\n            case 1: // Monday\n              return janFourth;\n            case 2: // Tuesday\n              return new Date(janFourth.getFullYear(), 0, 3);\n            case 3: // Wednesday\n              return new Date(janFourth.getFullYear(), 0, 2);\n            case 4: // Thursday\n              return new Date(janFourth.getFullYear(), 0, 1);\n            case 5: // Friday\n              return new Date(janFourth.getFullYear()-1, 11, 31);\n            case 6: // Saturday\n              return new Date(janFourth.getFullYear()-1, 11, 30);\n          }\n      }\n  \n      function getWeekBasedYear(date) {\n          var thisDate = __addDays(new Date(date.tm_year+1900, 0, 1), date.tm_yday);\n  \n          var janFourthThisYear = new Date(thisDate.getFullYear(), 0, 4);\n          var janFourthNextYear = new Date(thisDate.getFullYear()+1, 0, 4);\n  \n          var firstWeekStartThisYear = getFirstWeekStartDate(janFourthThisYear);\n          var firstWeekStartNextYear = getFirstWeekStartDate(janFourthNextYear);\n  \n          if (compareByDay(firstWeekStartThisYear, thisDate) <= 0) {\n            // this date is after the start of the first week of this year\n            if (compareByDay(firstWeekStartNextYear, thisDate) <= 0) {\n              return thisDate.getFullYear()+1;\n            } else {\n              return thisDate.getFullYear();\n            }\n          } else {\n            return thisDate.getFullYear()-1;\n          }\n      }\n  \n      var EXPANSION_RULES_2 = {\n        '%a': function(date) {\n          return WEEKDAYS[date.tm_wday].substring(0,3);\n        },\n        '%A': function(date) {\n          return WEEKDAYS[date.tm_wday];\n        },\n        '%b': function(date) {\n          return MONTHS[date.tm_mon].substring(0,3);\n        },\n        '%B': function(date) {\n          return MONTHS[date.tm_mon];\n        },\n        '%C': function(date) {\n          var year = date.tm_year+1900;\n          return leadingNulls((year/100)|0,2);\n        },\n        '%d': function(date) {\n          return leadingNulls(date.tm_mday, 2);\n        },\n        '%e': function(date) {\n          return leadingSomething(date.tm_mday, 2, ' ');\n        },\n        '%g': function(date) {\n          // %g, %G, and %V give values according to the ISO 8601:2000 standard week-based year.\n          // In this system, weeks begin on a Monday and week 1 of the year is the week that includes\n          // January 4th, which is also the week that includes the first Thursday of the year, and\n          // is also the first week that contains at least four days in the year.\n          // If the first Monday of January is the 2nd, 3rd, or 4th, the preceding days are part of\n          // the last week of the preceding year; thus, for Saturday 2nd January 1999,\n          // %G is replaced by 1998 and %V is replaced by 53. If December 29th, 30th,\n          // or 31st is a Monday, it and any following days are part of week 1 of the following year.\n          // Thus, for Tuesday 30th December 1997, %G is replaced by 1998 and %V is replaced by 01.\n  \n          return getWeekBasedYear(date).toString().substring(2);\n        },\n        '%G': function(date) {\n          return getWeekBasedYear(date);\n        },\n        '%H': function(date) {\n          return leadingNulls(date.tm_hour, 2);\n        },\n        '%I': function(date) {\n          var twelveHour = date.tm_hour;\n          if (twelveHour == 0) twelveHour = 12;\n          else if (twelveHour > 12) twelveHour -= 12;\n          return leadingNulls(twelveHour, 2);\n        },\n        '%j': function(date) {\n          // Day of the year (001-366)\n          return leadingNulls(date.tm_mday+__arraySum(__isLeapYear(date.tm_year+1900) ? __MONTH_DAYS_LEAP : __MONTH_DAYS_REGULAR, date.tm_mon-1), 3);\n        },\n        '%m': function(date) {\n          return leadingNulls(date.tm_mon+1, 2);\n        },\n        '%M': function(date) {\n          return leadingNulls(date.tm_min, 2);\n        },\n        '%n': function() {\n          return '\\n';\n        },\n        '%p': function(date) {\n          if (date.tm_hour >= 0 && date.tm_hour < 12) {\n            return 'AM';\n          } else {\n            return 'PM';\n          }\n        },\n        '%S': function(date) {\n          return leadingNulls(date.tm_sec, 2);\n        },\n        '%t': function() {\n          return '\\t';\n        },\n        '%u': function(date) {\n          return date.tm_wday || 7;\n        },\n        '%U': function(date) {\n          // Replaced by the week number of the year as a decimal number [00,53].\n          // The first Sunday of January is the first day of week 1;\n          // days in the new year before this are in week 0. [ tm_year, tm_wday, tm_yday]\n          var janFirst = new Date(date.tm_year+1900, 0, 1);\n          var firstSunday = janFirst.getDay() === 0 ? janFirst : __addDays(janFirst, 7-janFirst.getDay());\n          var endDate = new Date(date.tm_year+1900, date.tm_mon, date.tm_mday);\n  \n          // is target date after the first Sunday?\n          if (compareByDay(firstSunday, endDate) < 0) {\n            // calculate difference in days between first Sunday and endDate\n            var februaryFirstUntilEndMonth = __arraySum(__isLeapYear(endDate.getFullYear()) ? __MONTH_DAYS_LEAP : __MONTH_DAYS_REGULAR, endDate.getMonth()-1)-31;\n            var firstSundayUntilEndJanuary = 31-firstSunday.getDate();\n            var days = firstSundayUntilEndJanuary+februaryFirstUntilEndMonth+endDate.getDate();\n            return leadingNulls(Math.ceil(days/7), 2);\n          }\n  \n          return compareByDay(firstSunday, janFirst) === 0 ? '01': '00';\n        },\n        '%V': function(date) {\n          // Replaced by the week number of the year (Monday as the first day of the week)\n          // as a decimal number [01,53]. If the week containing 1 January has four\n          // or more days in the new year, then it is considered week 1.\n          // Otherwise, it is the last week of the previous year, and the next week is week 1.\n          // Both January 4th and the first Thursday of January are always in week 1. [ tm_year, tm_wday, tm_yday]\n          var janFourthThisYear = new Date(date.tm_year+1900, 0, 4);\n          var janFourthNextYear = new Date(date.tm_year+1901, 0, 4);\n  \n          var firstWeekStartThisYear = getFirstWeekStartDate(janFourthThisYear);\n          var firstWeekStartNextYear = getFirstWeekStartDate(janFourthNextYear);\n  \n          var endDate = __addDays(new Date(date.tm_year+1900, 0, 1), date.tm_yday);\n  \n          if (compareByDay(endDate, firstWeekStartThisYear) < 0) {\n            // if given date is before this years first week, then it belongs to the 53rd week of last year\n            return '53';\n          }\n  \n          if (compareByDay(firstWeekStartNextYear, endDate) <= 0) {\n            // if given date is after next years first week, then it belongs to the 01th week of next year\n            return '01';\n          }\n  \n          // given date is in between CW 01..53 of this calendar year\n          var daysDifference;\n          if (firstWeekStartThisYear.getFullYear() < date.tm_year+1900) {\n            // first CW of this year starts last year\n            daysDifference = date.tm_yday+32-firstWeekStartThisYear.getDate()\n          } else {\n            // first CW of this year starts this year\n            daysDifference = date.tm_yday+1-firstWeekStartThisYear.getDate();\n          }\n          return leadingNulls(Math.ceil(daysDifference/7), 2);\n        },\n        '%w': function(date) {\n          return date.tm_wday;\n        },\n        '%W': function(date) {\n          // Replaced by the week number of the year as a decimal number [00,53].\n          // The first Monday of January is the first day of week 1;\n          // days in the new year before this are in week 0. [ tm_year, tm_wday, tm_yday]\n          var janFirst = new Date(date.tm_year, 0, 1);\n          var firstMonday = janFirst.getDay() === 1 ? janFirst : __addDays(janFirst, janFirst.getDay() === 0 ? 1 : 7-janFirst.getDay()+1);\n          var endDate = new Date(date.tm_year+1900, date.tm_mon, date.tm_mday);\n  \n          // is target date after the first Monday?\n          if (compareByDay(firstMonday, endDate) < 0) {\n            var februaryFirstUntilEndMonth = __arraySum(__isLeapYear(endDate.getFullYear()) ? __MONTH_DAYS_LEAP : __MONTH_DAYS_REGULAR, endDate.getMonth()-1)-31;\n            var firstMondayUntilEndJanuary = 31-firstMonday.getDate();\n            var days = firstMondayUntilEndJanuary+februaryFirstUntilEndMonth+endDate.getDate();\n            return leadingNulls(Math.ceil(days/7), 2);\n          }\n          return compareByDay(firstMonday, janFirst) === 0 ? '01': '00';\n        },\n        '%y': function(date) {\n          // Replaced by the last two digits of the year as a decimal number [00,99]. [ tm_year]\n          return (date.tm_year+1900).toString().substring(2);\n        },\n        '%Y': function(date) {\n          // Replaced by the year as a decimal number (for example, 1997). [ tm_year]\n          return date.tm_year+1900;\n        },\n        '%z': function(date) {\n          // Replaced by the offset from UTC in the ISO 8601:2000 standard format ( +hhmm or -hhmm ).\n          // For example, \"-0430\" means 4 hours 30 minutes behind UTC (west of Greenwich).\n          var off = date.tm_gmtoff;\n          var ahead = off >= 0;\n          off = Math.abs(off) / 60;\n          // convert from minutes into hhmm format (which means 60 minutes = 100 units)\n          off = (off / 60)*100 + (off % 60);\n          return (ahead ? '+' : '-') + String(\"0000\" + off).slice(-4);\n        },\n        '%Z': function(date) {\n          return date.tm_zone;\n        },\n        '%%': function() {\n          return '%';\n        }\n      };\n      for (var rule in EXPANSION_RULES_2) {\n        if (pattern.indexOf(rule) >= 0) {\n          pattern = pattern.replace(new RegExp(rule, 'g'), EXPANSION_RULES_2[rule](date));\n        }\n      }\n  \n      var bytes = intArrayFromString(pattern, false);\n      if (bytes.length > maxsize) {\n        return 0;\n      }\n  \n      writeArrayToMemory(bytes, s);\n      return bytes.length-1;\n    }function _strftime_l(s, maxsize, format, tm) {\n      return _strftime(s, maxsize, format, tm); // no locale support yet\n    }\nvar ASSERTIONS = true;\n\n\n\n/** @type {function(string, boolean=, number=)} */\nfunction intArrayFromString(stringy, dontAddNull, length) {\n  var len = length > 0 ? length : lengthBytesUTF8(stringy)+1;\n  var u8array = new Array(len);\n  var numBytesWritten = stringToUTF8Array(stringy, u8array, 0, u8array.length);\n  if (dontAddNull) u8array.length = numBytesWritten;\n  return u8array;\n}\n\nfunction intArrayToString(array) {\n  var ret = [];\n  for (var i = 0; i < array.length; i++) {\n    var chr = array[i];\n    if (chr > 0xFF) {\n      if (ASSERTIONS) {\n        assert(false, 'Character code ' + chr + ' (' + String.fromCharCode(chr) + ')  at offset ' + i + ' not in 0x00-0xFF.');\n      }\n      chr &= 0xFF;\n    }\n    ret.push(String.fromCharCode(chr));\n  }\n  return ret.join('');\n}\n\n\nvar asmGlobalArg = {};\nvar asmLibraryArg = { \"__cxa_allocate_exception\": ___cxa_allocate_exception, \"__cxa_atexit\": ___cxa_atexit, \"__cxa_throw\": ___cxa_throw, \"__handle_stack_overflow\": ___handle_stack_overflow, \"__map_file\": ___map_file, \"__sys_munmap\": ___sys_munmap, \"abort\": _abort, \"emscripten_get_sbrk_ptr\": _emscripten_get_sbrk_ptr, \"emscripten_memcpy_big\": _emscripten_memcpy_big, \"emscripten_resize_heap\": _emscripten_resize_heap, \"environ_get\": _environ_get, \"environ_sizes_get\": _environ_sizes_get, \"fd_close\": _fd_close, \"fd_read\": _fd_read, \"fd_seek\": _fd_seek, \"fd_write\": _fd_write, \"memory\": wasmMemory, \"setTempRet0\": _setTempRet0, \"strftime_l\": _strftime_l, \"table\": wasmTable };\nvar asm = createWasm();\n/** @type {function(...*):?} */\nvar ___wasm_call_ctors = Module[\"___wasm_call_ctors\"] = createExportWrapper(\"__wasm_call_ctors\");\n\n/** @type {function(...*):?} */\nvar _malloc = Module[\"_malloc\"] = createExportWrapper(\"malloc\");\n\n/** @type {function(...*):?} */\nvar _free = Module[\"_free\"] = createExportWrapper(\"free\");\n\n/** @type {function(...*):?} */\nvar _c_GroupStrokes = Module[\"_c_GroupStrokes\"] = createExportWrapper(\"c_GroupStrokes\");\n\n/** @type {function(...*):?} */\nvar _c_ML_EncodeCurves = Module[\"_c_ML_EncodeCurves\"] = createExportWrapper(\"c_ML_EncodeCurves\");\n\n/** @type {function(...*):?} */\nvar _c_FitCurve = Module[\"_c_FitCurve\"] = createExportWrapper(\"c_FitCurve\");\n\n/** @type {function(...*):?} */\nvar ___errno_location = Module[\"___errno_location\"] = createExportWrapper(\"__errno_location\");\n\n/** @type {function(...*):?} */\nvar _setThrew = Module[\"_setThrew\"] = createExportWrapper(\"setThrew\");\n\n/** @type {function(...*):?} */\nvar stackSave = Module[\"stackSave\"] = createExportWrapper(\"stackSave\");\n\n/** @type {function(...*):?} */\nvar stackRestore = Module[\"stackRestore\"] = createExportWrapper(\"stackRestore\");\n\n/** @type {function(...*):?} */\nvar stackAlloc = Module[\"stackAlloc\"] = createExportWrapper(\"stackAlloc\");\n\n/** @type {function(...*):?} */\nvar ___set_stack_limit = Module[\"___set_stack_limit\"] = createExportWrapper(\"__set_stack_limit\");\n\n/** @type {function(...*):?} */\nvar __growWasmMemory = Module[\"__growWasmMemory\"] = createExportWrapper(\"__growWasmMemory\");\n\n/** @type {function(...*):?} */\nvar dynCall_iii = Module[\"dynCall_iii\"] = createExportWrapper(\"dynCall_iii\");\n\n/** @type {function(...*):?} */\nvar dynCall_ii = Module[\"dynCall_ii\"] = createExportWrapper(\"dynCall_ii\");\n\n/** @type {function(...*):?} */\nvar dynCall_vi = Module[\"dynCall_vi\"] = createExportWrapper(\"dynCall_vi\");\n\n/** @type {function(...*):?} */\nvar dynCall_vii = Module[\"dynCall_vii\"] = createExportWrapper(\"dynCall_vii\");\n\n/** @type {function(...*):?} */\nvar dynCall_iiii = Module[\"dynCall_iiii\"] = createExportWrapper(\"dynCall_iiii\");\n\n/** @type {function(...*):?} */\nvar dynCall_viijii = Module[\"dynCall_viijii\"] = createExportWrapper(\"dynCall_viijii\");\n\n/** @type {function(...*):?} */\nvar dynCall_viiii = Module[\"dynCall_viiii\"] = createExportWrapper(\"dynCall_viiii\");\n\n/** @type {function(...*):?} */\nvar dynCall_jiji = Module[\"dynCall_jiji\"] = createExportWrapper(\"dynCall_jiji\");\n\n/** @type {function(...*):?} */\nvar dynCall_iidiiii = Module[\"dynCall_iidiiii\"] = createExportWrapper(\"dynCall_iidiiii\");\n\n/** @type {function(...*):?} */\nvar dynCall_iiiii = Module[\"dynCall_iiiii\"] = createExportWrapper(\"dynCall_iiiii\");\n\n/** @type {function(...*):?} */\nvar dynCall_iiiiii = Module[\"dynCall_iiiiii\"] = createExportWrapper(\"dynCall_iiiiii\");\n\n/** @type {function(...*):?} */\nvar dynCall_iiiiiiiii = Module[\"dynCall_iiiiiiiii\"] = createExportWrapper(\"dynCall_iiiiiiiii\");\n\n/** @type {function(...*):?} */\nvar dynCall_iiiiiii = Module[\"dynCall_iiiiiii\"] = createExportWrapper(\"dynCall_iiiiiii\");\n\n/** @type {function(...*):?} */\nvar dynCall_iiiiij = Module[\"dynCall_iiiiij\"] = createExportWrapper(\"dynCall_iiiiij\");\n\n/** @type {function(...*):?} */\nvar dynCall_iiiiid = Module[\"dynCall_iiiiid\"] = createExportWrapper(\"dynCall_iiiiid\");\n\n/** @type {function(...*):?} */\nvar dynCall_iiiiijj = Module[\"dynCall_iiiiijj\"] = createExportWrapper(\"dynCall_iiiiijj\");\n\n/** @type {function(...*):?} */\nvar dynCall_iiiiiiii = Module[\"dynCall_iiiiiiii\"] = createExportWrapper(\"dynCall_iiiiiiii\");\n\n/** @type {function(...*):?} */\nvar dynCall_iiiiiijj = Module[\"dynCall_iiiiiijj\"] = createExportWrapper(\"dynCall_iiiiiijj\");\n\n/** @type {function(...*):?} */\nvar dynCall_viiiiii = Module[\"dynCall_viiiiii\"] = createExportWrapper(\"dynCall_viiiiii\");\n\n/** @type {function(...*):?} */\nvar dynCall_v = Module[\"dynCall_v\"] = createExportWrapper(\"dynCall_v\");\n\n/** @type {function(...*):?} */\nvar dynCall_viiiii = Module[\"dynCall_viiiii\"] = createExportWrapper(\"dynCall_viiiii\");\n\n\n\n\n\n// === Auto-generated postamble setup entry stuff ===\n\n\nif (!Object.getOwnPropertyDescriptor(Module, \"intArrayFromString\")) Module[\"intArrayFromString\"] = function() { abort(\"'intArrayFromString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"intArrayToString\")) Module[\"intArrayToString\"] = function() { abort(\"'intArrayToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"ccall\")) Module[\"ccall\"] = function() { abort(\"'ccall' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"cwrap\")) Module[\"cwrap\"] = function() { abort(\"'cwrap' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"setValue\")) Module[\"setValue\"] = function() { abort(\"'setValue' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"getValue\")) Module[\"getValue\"] = function() { abort(\"'getValue' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"allocate\")) Module[\"allocate\"] = function() { abort(\"'allocate' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"getMemory\")) Module[\"getMemory\"] = function() { abort(\"'getMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"UTF8ArrayToString\")) Module[\"UTF8ArrayToString\"] = function() { abort(\"'UTF8ArrayToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"UTF8ToString\")) Module[\"UTF8ToString\"] = function() { abort(\"'UTF8ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"stringToUTF8Array\")) Module[\"stringToUTF8Array\"] = function() { abort(\"'stringToUTF8Array' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"stringToUTF8\")) Module[\"stringToUTF8\"] = function() { abort(\"'stringToUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"lengthBytesUTF8\")) Module[\"lengthBytesUTF8\"] = function() { abort(\"'lengthBytesUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"stackTrace\")) Module[\"stackTrace\"] = function() { abort(\"'stackTrace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"addOnPreRun\")) Module[\"addOnPreRun\"] = function() { abort(\"'addOnPreRun' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"addOnInit\")) Module[\"addOnInit\"] = function() { abort(\"'addOnInit' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"addOnPreMain\")) Module[\"addOnPreMain\"] = function() { abort(\"'addOnPreMain' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"addOnExit\")) Module[\"addOnExit\"] = function() { abort(\"'addOnExit' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"addOnPostRun\")) Module[\"addOnPostRun\"] = function() { abort(\"'addOnPostRun' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"writeStringToMemory\")) Module[\"writeStringToMemory\"] = function() { abort(\"'writeStringToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"writeArrayToMemory\")) Module[\"writeArrayToMemory\"] = function() { abort(\"'writeArrayToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"writeAsciiToMemory\")) Module[\"writeAsciiToMemory\"] = function() { abort(\"'writeAsciiToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"addRunDependency\")) Module[\"addRunDependency\"] = function() { abort(\"'addRunDependency' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"removeRunDependency\")) Module[\"removeRunDependency\"] = function() { abort(\"'removeRunDependency' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"FS_createFolder\")) Module[\"FS_createFolder\"] = function() { abort(\"'FS_createFolder' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"FS_createPath\")) Module[\"FS_createPath\"] = function() { abort(\"'FS_createPath' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"FS_createDataFile\")) Module[\"FS_createDataFile\"] = function() { abort(\"'FS_createDataFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"FS_createPreloadedFile\")) Module[\"FS_createPreloadedFile\"] = function() { abort(\"'FS_createPreloadedFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"FS_createLazyFile\")) Module[\"FS_createLazyFile\"] = function() { abort(\"'FS_createLazyFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"FS_createLink\")) Module[\"FS_createLink\"] = function() { abort(\"'FS_createLink' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"FS_createDevice\")) Module[\"FS_createDevice\"] = function() { abort(\"'FS_createDevice' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"FS_unlink\")) Module[\"FS_unlink\"] = function() { abort(\"'FS_unlink' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"dynamicAlloc\")) Module[\"dynamicAlloc\"] = function() { abort(\"'dynamicAlloc' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"loadDynamicLibrary\")) Module[\"loadDynamicLibrary\"] = function() { abort(\"'loadDynamicLibrary' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"loadWebAssemblyModule\")) Module[\"loadWebAssemblyModule\"] = function() { abort(\"'loadWebAssemblyModule' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"getLEB\")) Module[\"getLEB\"] = function() { abort(\"'getLEB' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"getFunctionTables\")) Module[\"getFunctionTables\"] = function() { abort(\"'getFunctionTables' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"alignFunctionTables\")) Module[\"alignFunctionTables\"] = function() { abort(\"'alignFunctionTables' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"registerFunctions\")) Module[\"registerFunctions\"] = function() { abort(\"'registerFunctions' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"addFunction\")) Module[\"addFunction\"] = function() { abort(\"'addFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"removeFunction\")) Module[\"removeFunction\"] = function() { abort(\"'removeFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"getFuncWrapper\")) Module[\"getFuncWrapper\"] = function() { abort(\"'getFuncWrapper' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"prettyPrint\")) Module[\"prettyPrint\"] = function() { abort(\"'prettyPrint' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"makeBigInt\")) Module[\"makeBigInt\"] = function() { abort(\"'makeBigInt' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"dynCall\")) Module[\"dynCall\"] = function() { abort(\"'dynCall' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"getCompilerSetting\")) Module[\"getCompilerSetting\"] = function() { abort(\"'getCompilerSetting' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"print\")) Module[\"print\"] = function() { abort(\"'print' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"printErr\")) Module[\"printErr\"] = function() { abort(\"'printErr' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"getTempRet0\")) Module[\"getTempRet0\"] = function() { abort(\"'getTempRet0' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"setTempRet0\")) Module[\"setTempRet0\"] = function() { abort(\"'setTempRet0' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"callMain\")) Module[\"callMain\"] = function() { abort(\"'callMain' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"abort\")) Module[\"abort\"] = function() { abort(\"'abort' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"stringToNewUTF8\")) Module[\"stringToNewUTF8\"] = function() { abort(\"'stringToNewUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"abortOnCannotGrowMemory\")) Module[\"abortOnCannotGrowMemory\"] = function() { abort(\"'abortOnCannotGrowMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"emscripten_realloc_buffer\")) Module[\"emscripten_realloc_buffer\"] = function() { abort(\"'emscripten_realloc_buffer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"ENV\")) Module[\"ENV\"] = function() { abort(\"'ENV' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"ERRNO_CODES\")) Module[\"ERRNO_CODES\"] = function() { abort(\"'ERRNO_CODES' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"ERRNO_MESSAGES\")) Module[\"ERRNO_MESSAGES\"] = function() { abort(\"'ERRNO_MESSAGES' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"setErrNo\")) Module[\"setErrNo\"] = function() { abort(\"'setErrNo' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"DNS\")) Module[\"DNS\"] = function() { abort(\"'DNS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"GAI_ERRNO_MESSAGES\")) Module[\"GAI_ERRNO_MESSAGES\"] = function() { abort(\"'GAI_ERRNO_MESSAGES' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"Protocols\")) Module[\"Protocols\"] = function() { abort(\"'Protocols' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"Sockets\")) Module[\"Sockets\"] = function() { abort(\"'Sockets' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"UNWIND_CACHE\")) Module[\"UNWIND_CACHE\"] = function() { abort(\"'UNWIND_CACHE' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"readAsmConstArgs\")) Module[\"readAsmConstArgs\"] = function() { abort(\"'readAsmConstArgs' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"jstoi_q\")) Module[\"jstoi_q\"] = function() { abort(\"'jstoi_q' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"jstoi_s\")) Module[\"jstoi_s\"] = function() { abort(\"'jstoi_s' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"abortStackOverflow\")) Module[\"abortStackOverflow\"] = function() { abort(\"'abortStackOverflow' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"reallyNegative\")) Module[\"reallyNegative\"] = function() { abort(\"'reallyNegative' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"formatString\")) Module[\"formatString\"] = function() { abort(\"'formatString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"PATH\")) Module[\"PATH\"] = function() { abort(\"'PATH' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"PATH_FS\")) Module[\"PATH_FS\"] = function() { abort(\"'PATH_FS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"SYSCALLS\")) Module[\"SYSCALLS\"] = function() { abort(\"'SYSCALLS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"syscallMmap2\")) Module[\"syscallMmap2\"] = function() { abort(\"'syscallMmap2' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"syscallMunmap\")) Module[\"syscallMunmap\"] = function() { abort(\"'syscallMunmap' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"flush_NO_FILESYSTEM\")) Module[\"flush_NO_FILESYSTEM\"] = function() { abort(\"'flush_NO_FILESYSTEM' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"JSEvents\")) Module[\"JSEvents\"] = function() { abort(\"'JSEvents' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"specialHTMLTargets\")) Module[\"specialHTMLTargets\"] = function() { abort(\"'specialHTMLTargets' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"demangle\")) Module[\"demangle\"] = function() { abort(\"'demangle' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"demangleAll\")) Module[\"demangleAll\"] = function() { abort(\"'demangleAll' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"jsStackTrace\")) Module[\"jsStackTrace\"] = function() { abort(\"'jsStackTrace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"stackTrace\")) Module[\"stackTrace\"] = function() { abort(\"'stackTrace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"getEnvStrings\")) Module[\"getEnvStrings\"] = function() { abort(\"'getEnvStrings' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"checkWasiClock\")) Module[\"checkWasiClock\"] = function() { abort(\"'checkWasiClock' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"writeI53ToI64\")) Module[\"writeI53ToI64\"] = function() { abort(\"'writeI53ToI64' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"writeI53ToI64Clamped\")) Module[\"writeI53ToI64Clamped\"] = function() { abort(\"'writeI53ToI64Clamped' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"writeI53ToI64Signaling\")) Module[\"writeI53ToI64Signaling\"] = function() { abort(\"'writeI53ToI64Signaling' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"writeI53ToU64Clamped\")) Module[\"writeI53ToU64Clamped\"] = function() { abort(\"'writeI53ToU64Clamped' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"writeI53ToU64Signaling\")) Module[\"writeI53ToU64Signaling\"] = function() { abort(\"'writeI53ToU64Signaling' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"readI53FromI64\")) Module[\"readI53FromI64\"] = function() { abort(\"'readI53FromI64' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"readI53FromU64\")) Module[\"readI53FromU64\"] = function() { abort(\"'readI53FromU64' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"convertI32PairToI53\")) Module[\"convertI32PairToI53\"] = function() { abort(\"'convertI32PairToI53' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"convertU32PairToI53\")) Module[\"convertU32PairToI53\"] = function() { abort(\"'convertU32PairToI53' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"Browser\")) Module[\"Browser\"] = function() { abort(\"'Browser' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"GL\")) Module[\"GL\"] = function() { abort(\"'GL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"emscriptenWebGLGet\")) Module[\"emscriptenWebGLGet\"] = function() { abort(\"'emscriptenWebGLGet' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"emscriptenWebGLGetTexPixelData\")) Module[\"emscriptenWebGLGetTexPixelData\"] = function() { abort(\"'emscriptenWebGLGetTexPixelData' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"emscriptenWebGLGetUniform\")) Module[\"emscriptenWebGLGetUniform\"] = function() { abort(\"'emscriptenWebGLGetUniform' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"emscriptenWebGLGetVertexAttrib\")) Module[\"emscriptenWebGLGetVertexAttrib\"] = function() { abort(\"'emscriptenWebGLGetVertexAttrib' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"AL\")) Module[\"AL\"] = function() { abort(\"'AL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"SDL_unicode\")) Module[\"SDL_unicode\"] = function() { abort(\"'SDL_unicode' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"SDL_ttfContext\")) Module[\"SDL_ttfContext\"] = function() { abort(\"'SDL_ttfContext' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"SDL_audio\")) Module[\"SDL_audio\"] = function() { abort(\"'SDL_audio' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"SDL\")) Module[\"SDL\"] = function() { abort(\"'SDL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"SDL_gfx\")) Module[\"SDL_gfx\"] = function() { abort(\"'SDL_gfx' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"GLUT\")) Module[\"GLUT\"] = function() { abort(\"'GLUT' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"EGL\")) Module[\"EGL\"] = function() { abort(\"'EGL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"GLFW_Window\")) Module[\"GLFW_Window\"] = function() { abort(\"'GLFW_Window' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"GLFW\")) Module[\"GLFW\"] = function() { abort(\"'GLFW' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"GLEW\")) Module[\"GLEW\"] = function() { abort(\"'GLEW' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"IDBStore\")) Module[\"IDBStore\"] = function() { abort(\"'IDBStore' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"runAndAbortIfError\")) Module[\"runAndAbortIfError\"] = function() { abort(\"'runAndAbortIfError' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"warnOnce\")) Module[\"warnOnce\"] = function() { abort(\"'warnOnce' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"stackSave\")) Module[\"stackSave\"] = function() { abort(\"'stackSave' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"stackRestore\")) Module[\"stackRestore\"] = function() { abort(\"'stackRestore' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"stackAlloc\")) Module[\"stackAlloc\"] = function() { abort(\"'stackAlloc' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"AsciiToString\")) Module[\"AsciiToString\"] = function() { abort(\"'AsciiToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"stringToAscii\")) Module[\"stringToAscii\"] = function() { abort(\"'stringToAscii' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"UTF16ToString\")) Module[\"UTF16ToString\"] = function() { abort(\"'UTF16ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"stringToUTF16\")) Module[\"stringToUTF16\"] = function() { abort(\"'stringToUTF16' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"lengthBytesUTF16\")) Module[\"lengthBytesUTF16\"] = function() { abort(\"'lengthBytesUTF16' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"UTF32ToString\")) Module[\"UTF32ToString\"] = function() { abort(\"'UTF32ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"stringToUTF32\")) Module[\"stringToUTF32\"] = function() { abort(\"'stringToUTF32' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"lengthBytesUTF32\")) Module[\"lengthBytesUTF32\"] = function() { abort(\"'lengthBytesUTF32' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"allocateUTF8\")) Module[\"allocateUTF8\"] = function() { abort(\"'allocateUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"allocateUTF8OnStack\")) Module[\"allocateUTF8OnStack\"] = function() { abort(\"'allocateUTF8OnStack' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nModule[\"writeStackCookie\"] = writeStackCookie;\nModule[\"checkStackCookie\"] = checkStackCookie;if (!Object.getOwnPropertyDescriptor(Module, \"ALLOC_NORMAL\")) Object.defineProperty(Module, \"ALLOC_NORMAL\", { configurable: true, get: function() { abort(\"'ALLOC_NORMAL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") } });\nif (!Object.getOwnPropertyDescriptor(Module, \"ALLOC_STACK\")) Object.defineProperty(Module, \"ALLOC_STACK\", { configurable: true, get: function() { abort(\"'ALLOC_STACK' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") } });\nif (!Object.getOwnPropertyDescriptor(Module, \"ALLOC_DYNAMIC\")) Object.defineProperty(Module, \"ALLOC_DYNAMIC\", { configurable: true, get: function() { abort(\"'ALLOC_DYNAMIC' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") } });\nif (!Object.getOwnPropertyDescriptor(Module, \"ALLOC_NONE\")) Object.defineProperty(Module, \"ALLOC_NONE\", { configurable: true, get: function() { abort(\"'ALLOC_NONE' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") } });\n\n\n\nvar calledRun;\n\n/**\n * @constructor\n * @this {ExitStatus}\n */\nfunction ExitStatus(status) {\n  this.name = \"ExitStatus\";\n  this.message = \"Program terminated with exit(\" + status + \")\";\n  this.status = status;\n}\n\nvar calledMain = false;\n\n\ndependenciesFulfilled = function runCaller() {\n  // If run has never been called, and we should call run (INVOKE_RUN is true, and Module.noInitialRun is not false)\n  if (!calledRun) run();\n  if (!calledRun) dependenciesFulfilled = runCaller; // try this again later, after new deps are fulfilled\n};\n\n\n\n\n\n/** @type {function(Array=)} */\nfunction run(args) {\n  args = args || arguments_;\n\n  if (runDependencies > 0) {\n    return;\n  }\n\n  writeStackCookie();\n\n  preRun();\n\n  if (runDependencies > 0) return; // a preRun added a dependency, run will be called later\n\n  function doRun() {\n    // run may have just been called through dependencies being fulfilled just in this very frame,\n    // or while the async setStatus time below was happening\n    if (calledRun) return;\n    calledRun = true;\n    Module['calledRun'] = true;\n\n    if (ABORT) return;\n\n    initRuntime();\n\n    preMain();\n\n    readyPromiseResolve(Module);\n    if (Module['onRuntimeInitialized']) Module['onRuntimeInitialized']();\n\n    assert(!Module['_main'], 'compiled without a main, but one is present. if you added it from JS, use Module[\"onRuntimeInitialized\"]');\n\n    postRun();\n  }\n\n  if (Module['setStatus']) {\n    Module['setStatus']('Running...');\n    setTimeout(function() {\n      setTimeout(function() {\n        Module['setStatus']('');\n      }, 1);\n      doRun();\n    }, 1);\n  } else\n  {\n    doRun();\n  }\n  checkStackCookie();\n}\nModule['run'] = run;\n\nfunction checkUnflushedContent() {\n  // Compiler settings do not allow exiting the runtime, so flushing\n  // the streams is not possible. but in ASSERTIONS mode we check\n  // if there was something to flush, and if so tell the user they\n  // should request that the runtime be exitable.\n  // Normally we would not even include flush() at all, but in ASSERTIONS\n  // builds we do so just for this check, and here we see if there is any\n  // content to flush, that is, we check if there would have been\n  // something a non-ASSERTIONS build would have not seen.\n  // How we flush the streams depends on whether we are in SYSCALLS_REQUIRE_FILESYSTEM=0\n  // mode (which has its own special function for this; otherwise, all\n  // the code is inside libc)\n  var print = out;\n  var printErr = err;\n  var has = false;\n  out = err = function(x) {\n    has = true;\n  }\n  try { // it doesn't matter if it fails\n    var flush = flush_NO_FILESYSTEM;\n    if (flush) flush();\n  } catch(e) {}\n  out = print;\n  err = printErr;\n  if (has) {\n    warnOnce('stdio streams had content in them that was not flushed. you should set EXIT_RUNTIME to 1 (see the FAQ), or make sure to emit a newline when you printf etc.');\n    warnOnce('(this may also be due to not including full filesystem support - try building with -s FORCE_FILESYSTEM=1)');\n  }\n}\n\n/** @param {boolean|number=} implicit */\nfunction exit(status, implicit) {\n  checkUnflushedContent();\n\n  // if this is just main exit-ing implicitly, and the status is 0, then we\n  // don't need to do anything here and can just leave. if the status is\n  // non-zero, though, then we need to report it.\n  // (we may have warned about this earlier, if a situation justifies doing so)\n  if (implicit && noExitRuntime && status === 0) {\n    return;\n  }\n\n  if (noExitRuntime) {\n    // if exit() was called, we may warn the user if the runtime isn't actually being shut down\n    if (!implicit) {\n      var msg = 'program exited (with status: ' + status + '), but EXIT_RUNTIME is not set, so halting execution but not exiting the runtime or preventing further async execution (build with EXIT_RUNTIME=1, if you want a true shutdown)';\n      readyPromiseReject(msg);\n    }\n  } else {\n\n    ABORT = true;\n    EXITSTATUS = status;\n\n    exitRuntime();\n\n    if (Module['onExit']) Module['onExit'](status);\n  }\n\n  quit_(status, new ExitStatus(status));\n}\n\nif (Module['preInit']) {\n  if (typeof Module['preInit'] == 'function') Module['preInit'] = [Module['preInit']];\n  while (Module['preInit'].length > 0) {\n    Module['preInit'].pop()();\n  }\n}\n\n\n  noExitRuntime = true;\n\nrun();\n\n\n\n\n\n\n// {{MODULE_ADDITIONS}}\n\n\n\n\n\n  return c_BezierFit.ready\n}\n);\n})();\nexport default c_BezierFit;","import * as tf from '@tensorflow/tfjs';\nimport {setWasmPath} from '@tensorflow/tfjs-backend-wasm';\nimport BezierFit from './c_modules/bezier_fit/bezier_fit'\n\n\nconst model_json = '/dist/danny_modeljs/model.json'\n\nvar model_url = 'https://raw.githubusercontent.com/khluu/smartsheet/master/tfjs/model.json'\n\nconst alphabet = ['!' ,'(' ,')', '+', ',', '-', '.', '/', '0', '1', '2', '3' ,'4', '5', '6', '7', '8', '9',\n'=' ,'A', 'B', 'C', 'E', 'F', 'G', 'H', 'I', 'L', 'M', 'N', 'P', 'R', 'S', 'T' ,'V', 'X',\n'Y', '[', '\\\\Delta' ,'\\\\alpha', '\\\\beta', '\\\\cos', '\\\\div', '\\\\exists',\n'\\\\forall', '\\\\gamma', '\\\\geq', '\\\\gt' ,'\\\\in', '\\\\infty', '\\\\int', '\\\\lambda',\n'\\\\ldots', '\\\\leq' ,'\\\\lim', '\\\\log' ,'\\\\lt', '\\\\mu', '\\\\neq', '\\\\phi', '\\\\pi',\n'\\\\pm', '\\\\prime' ,'\\\\rightarrow' ,'\\\\sigma', '\\\\sin', '\\\\sqrt', '\\\\sum',\n'\\\\tan', '\\\\theta' ,'\\\\times', '\\\\{', '\\\\}', ']', 'a', 'b', 'c', 'd', 'e', 'f', 'g',\n'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y',\n'z', '|']\n\nfunction argsort(arr,k=0){\n  var sorted = arr.map(((val,index) => [val,index])).sort((a,b) => b[0]-a[0]) \n  if(k){sorted = sorted.slice(0,k)}\n  var vals = sorted.map(x => x[0])\n  var indicies = sorted.map(x => x[1])\n  return [vals, indicies]\n}\n\n\nexport default class StrokeClassifier {\n  constructor(){\n    setWasmPath(\"/dist/tfjs-backend-wasm.wasm\")\n    var tf_promise = tf.setBackend('wasm');\n\n    this.BezierFit = new BezierFit();\n    this.BezierFit.promise.then(() => {\n      this.fitCurve = this.BezierFit.fitCurve\n      this.fitCurveFeatures = this.BezierFit.fitCurveFeatures\n      this.groupStrokes = this.BezierFit.groupStrokes\n      // this.fitCurve([[1,2],[3,4],[5,6],[7,8]])\n    })\n    \n    this.promise = Promise.all([tf_promise, this.BezierFit.promise, this.model_promise]).then(async () => {\n      this.model_promise = await tf.loadLayersModel(model_url).then((model) => {\n      this.model = model\n      })\n    }).then(() => {\n    // this.promise = Promise.all([ this.BezierFit.promise, this.model_promise]).then(() => {\n\n      this.normalize_strokes = (strokes) => {\n        console.log(\"STROKES\", strokes)\n        var minx = 2400000000, miny = 2400000000;\n        var maxx = -2400000000, maxy = -2400000000;\n        var out_strokes = []\n        for (var i = 0; i < strokes.length; i++) {\n          out_strokes.push([])\n          for (var j = 0; j < strokes[i].length; j++) {\n              minx = Math.min(minx, strokes[i][j][0]);\n              miny = Math.min(miny, strokes[i][j][1]);\n              out_strokes[i].push([strokes[i][j][0],strokes[i][j][1]] )\n          }\n        }\n        \n        for (var i = 0; i < strokes.length; i++) {\n          for (var j = 0; j < strokes[i].length; j++) {\n              out_strokes[i][j][0] -= minx;\n              out_strokes[i][j][1] -= miny;\n              maxx = Math.max(maxx, out_strokes[i][j][0]);\n              maxy = Math.max(maxy, out_strokes[i][j][1]);\n          }\n        }\n        console.log(minx, maxx, miny, maxy);\n        for (var i = 0; i < strokes.length; i++) {\n          for (var j = 0; j < strokes[i].length; j++) {\n              out_strokes[i][j][0] /= Math.min(maxx, maxy) / 100;\n              out_strokes[i][j][1] /= Math.min(maxx, maxy) / 100;\n          }\n        }\n        return out_strokes\n      }\n\n      this.recognize_symbol = (strokes) => {\n        var inp = []\n        var n_strokes = strokes.length\n        for(var stroke of strokes){\n          if(typeof stroke === 'object' && stroke != null){\n            inp.push(stroke.points)\n          } \n        }\n        inp = this.normalize_strokes(inp)\n        console.log(\"normed\",inp)\n        var curve_features = []\n        for(var stroke of inp){\n          var curves = this.fitCurve(stroke)  \n          for(var feats of this.fitCurveFeatures(stroke)){\n            console.log(\"feats\", feats)\n            curve_features.push(feats)\n          }\n        }\n        console.log(\"curve_features\",curve_features)\n        var input = tf.tensor([curve_features], DocumentType=tf.float32);\n        // console.log(this.model)\n        // console.log(curves)\n        // console.log(curve_features)\n        var s = this.model.predict(input).array().then((res) => {\n          var [probs, indicies] = argsort(res[0],10)\n          // console.log(\"probs\",probs)\n          // console.log(\"indicies\",indicies)\n          var out = {}\n          for(var i=0; i < probs.length; i++){\n            out[alphabet[indicies[i]]] = probs[i];\n          }\n          // console.log(\"OUT\",out)\n          return out\n          \n        });\n\n        return s\n        \n        \n        \n        \n      }\n\n\n    })\n  }\n\n  \n\n  \n}\n\n\n// var output = '';\n// async function run(traces) {\n//     //console.log('model loaded');\n//     //console.log(model.getWeights()[0].print());\n//     //console.log(a[0]);\n    \n    \n//     var fit = new BezierFit(512, traces);\n//     //console.log(fit);\n//     var res = await fit.promise.then();\n//     var input=[];\n//     input.push(res[0]);\n//     var i = 1;\n//     for (i=1; i < res.length; i++) {\n//       //console.log([res[i]]);\n//       input.push(res[i]);\n//     }\n//     var ten = tf.tensor([input], DocumentType=tf.float32);\n//     var s = model.predict(ten);\n//     ","// import Accordion from 'react-native-collapsible/Accordion';\n// import { CollapsingToolbar }  from 'react-native-collapsingtoolbar';\n// import CollapsibleList from './collapsible_list.js'\nimport SkillPanel from './components/skill_panel.js'\nimport Buttons from './components/buttons';\n// import { vw, vh, vmin, vmax } from 'react-native-expo-viewport-units';\n// import ButtonsMachine from './interactions.js'\nimport {build_interactions_sm} from './interactions.js'\nimport {build_training_sm, problem_props} from './training_handler.js'\nimport NetworkLayer from './network_layer.js'\nimport { interpret } from 'xstate';\nimport autobind from 'class-autobind';\nimport path from 'path';\nimport pick from 'object.pick';\n\n// \nimport React from 'react';\nimport Spinner from 'react-native-loading-spinner-overlay';\n// import \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\"\n// import Loader from 'react-loader-spinner'\n// import { View, Text, StyleSheet } from \"react-native\";\n// import logo from './logo.svg';\n// import './App.css';\n\nimport { TouchableHighlight,ScrollView,View, Text, Platform, StyleSheet,SectionList,AppRegistry } from \"react-native\";\n\n\n// const instructions = Platform.select({\n//   ios: \"Press Cmd+R to reload,\\n\" + \"Cmd+D or shake for dev menu\",\n//   android:\n//     \"Double tap R on your keyboard to reload,\\n\" +\n//     \"Shake or press menu button for dev menu\",\n//   web: \"Your browser will automatically refresh as soon as you save the file.\"\n// });\n// var state_machine = ButtonsMachine.initialState\n// var state_machine_service = interpret(ButtonsMachine)\n// state_machine_service.start()\n\n// var NonInteractive_SM = build_SM_NonInteractive()\n// var ctat_state_machine = NonInteractive_SM.initialState\n// var ctat_state_machine_service = interpret(NonInteractive_SM)\n// ctat_state_machine_service.start()\n// window.ctat_state_machine = ctat_state_machine\n// window.ctat_state_machine_service = ctat_state_machine_service\n\n// var urlParams = new URLSearchParams(window.location.search);\n// var AL_URL = urlParams.get('al_url');\n// var HOST_URL = window.location.origins\n// window.network_layer = new NetworkLayer(AL_URL,HOST_URL)\n\n// ctat_state_machine_service.onTr\n\n// ctat_state_machine_service.onTransition(current => {\n//     setButtonsState(current,window.debugmode)\n    \n//     // this.setState({ current : current })\n//     }\n//   );\nfunction shallow_diff(o1,o2,keys=null){\n  console.log(keys)\n  let diff = Object.keys(o2).reduce((diff, key) => {\n      if (o1[key] !== o2[key] && (keys == null || keys.includes(key))){\n        diff[key] = o2[key]\n      }\n      return diff\n    }, {})\n  return diff\n}\n\n\n\nexport default class ALReactInterface extends React.Component {\n  constructor(props){\n    super(props);\n    autobind(this);\n    this.onInteractionTransition = this.onInteractionTransition.bind(this)\n    // this.urlParams = new URLSearchParams(window.location.search);\n\n    // this.AL_URL = this.urlParams.get('al_url');\n    // this.HOST_URL = window.location.origin\n    // console.log(this.AL_URL + '/create/',this.HOST_URL)\n    this.network_layer = new NetworkLayer(props.AL_URL,props.HOST_URL,props.OUTER_LOOP_URL)\n    \n    // this.training_file = this.urlParams.get('training');\n    // this.interactive = this.urlParams.get('interactive') == \"true\";\n    // this.use_foci = this.urlParams.get('use_foci') == \"true\";\n\n    // var working_dir = this.urlParams.get('wd')\n    if(props.working_dir == null && props.training_file != null){\n        var match = props.training_file.match(/(.*)[\\/\\\\]/)\n        props.working_dir =  !!match ? match[1] : ''; //The directory of the training.json\n    }\n    this.tutor = React.createRef()\n    this.skill_panel = React.createRef()\n    this.buttons = React.createRef()\n\n    this.state = {\n      default_props: {},\n      buttons_props: {app: this},\n      tutor_props: this.props.tutor_props || {},\n      skill_panel_props: {},\n      \"training_description\" : \"????\",\n      \"agent_description\" : \"????\",\n      \"problem_description\" : \"????\",\n\n      \"interactive\" : this.props.interactive,\n      \"free_author\" : this.props.free_author,\n      \"tutor_mode\" : this.props.tutor_mode,\n    }\n    // this.state = {prob_obj : null};\n  }\n\n  onInteractionTransition(current){\n    console.log(\"#\",current.value, \":\", current.context, current)\n\n    var standard_props = {interactions_state: current,\n                          interactions_service : this.interactions_service}\n    this.setState({\n      default_props : standard_props,\n      \"Interactions_Machine_State\" : current.value\n      // buttons_props: standard_props,\n      // tutor_props: standard_props,\n      // skill_panel_props: standard_props,\n    })\n  }\n\n  onTrainingTransition(current){\n    var c = current.context\n    console.log(\"&\", current)\n    this.setState({\"Training_Machine_State\" : current.value})\n    if(!c.interactive){\n      this.setState({\n        training_description : c.training_description || \"???\",\n        agent_description : c.agent_description || \"???\",\n        problem_description : c.problem_description || \"???\"\n      })  \n    }\n    \n\n  }\n\n  changeInteractionMode(d){\n    this.setState(d)\n  }\n\n  componentDidUpdate(prevProps,prevState){\n\n    //Update from changeInteractionMode\n    var d = shallow_diff(prevState,this.state,[\"interactive\",\"free_author\",\"tutor_mode\"])\n    if(Object.keys(d).length > 0){\n      console.log(\"componentDidUpdate\", d)\n      this.training_service.send({\n        type : \"CHANGE_INTERACTION_MODE\",\n        data : d,\n      })  \n    }\n  }\n\n  componentDidMount(){\n    console.log(\"MOUNTED\")\n    var tutor, nl, wd,tf\n    [tutor, nl, wd,tf] = [this.tutor.current,this.network_layer,this.props.working_dir,this.props.training_file]\n    \n\n    // this.setState({\n     \n    // })\n    this.interactions_sm = build_interactions_sm(this,\n                                                 pick(this.props,problem_props))\n                                                 // this.props.interactive,\n                                                 // this.props.free_author,\n                                                 // this.props.tutor_mode)  \n    this.interactions_service = null //Will be spawned in training_sm \n\n    this.training_machine = build_training_sm(this,this.interactions_sm, tf, wd)\n    this.training_service = interpret(this.training_machine)\n    this.training_service.onTransition(this.onTrainingTransition)\n    this.training_service.start()\n\n    const sub = this.training_service.subscribe(state => {\n      console.log(\"SUBSCRIBE:\",state);\n    });\n    console.log(\"T MACHINE!\", this.training_service)\n\n    window.setTutorMode = (x) => {\n      this.changeInteractionMode({\"tutor_mode\" : x})\n    }\n\n    window.setInteractive = (x) => {\n      this.changeInteractionMode({\"interactive\" : x})\n    }\n\n    window.setFreeAuthor = (x) => {\n      this.changeInteractionMode({\"free_author\" : x})\n    }\n\n    //TODO MOVE TO NW_LAYER\n    window.generateBehaviorProfile = this.generateBehaviorProfile\n\n\n  }\n\n  generateBehaviorProfile(ground_truth_path=\"/al_train/ground_truth.json\",out_dir=\"\"){\n    // window.generateBehaviorProfile = (ground_truth_path,out_dir=\"\") => {\n    let f = this.network_layer.generateBehaviorProfile\n\n    let t_context = this.training_service._state.context\n    // let i_context = this.training_service.context\n    if(ground_truth_path != null){\n\n      let to_json_list = (in_list) => {\n        let out = []\n        for (let line of in_list){\n          if(line != \"\"){\n            let json = JSON.parse(line)\n            out.push(json)\n          }\n        }\n        return out;\n      }\n      // let rq_h = this.network_layer.return\n      // let path =  ground_truth_path\n      if(ground_truth_path[0] != \"/\"){\n        ground_truth_path = (t_context.working_dir|| \"/\") + ground_truth_path\n      }\n      return fetch(ground_truth_path)\n        .then((resp) => resp.text())\n        .then((text) => text.split(\"\\n\"))\n        .then((split) => to_json_list(split))\n        .then((resps) => f(t_context,{data:{requests:resps,out_dir: out_dir}}))\n\n    }else{\n      return f(t_context)  \n    }\n      \n  }\n\n  render(){\n    const Tutor = this.props.tutorClass\n\n    var lower_display;\n    var use_prompt = false\n    if(!this.state.interactive){\n      use_prompt = true\n      var prompt_text\n      // if(this.state.tutor_mode == true){\n      //   prompt_text = \"TUTOR MODE\\n\"\n      // }else if(!this.state.interactive){\n      prompt_text = \n        this.state.training_description + \"\\n\" +\n        this.state.agent_description + \"\\n\" +\n        this.state.problem_description + \"\\n\"\n\n      lower_display = \n      <View style={styles.prompt}>\n        <Text>\n        {prompt_text}\n        </Text>\n      </View>\n    }else{\n      lower_display = \n      <View style={styles.controls}>\n        {!this.state.tutor_mode &&\n        <View style={styles.skill_panel}>\n          <SkillPanel ref={this.skill_panel}\n          {...this.state.default_props}\n          {...this.state.skill_panel_props}/>\n        </View>\n        }\n        <View style={styles.buttons}>\n          <Buttons ref={this.buttons}\n          {...this.state.default_props}\n          {...this.state.buttons_props}\n          {...{tutor_mode: this.state.tutor_mode}}/>\n        </View>\n      </View>\n    }\n    \n    // <View style={styles.overlay}>\n        //   <Text style={styles.overlay_text}>\n        //     LOADING\n        //   </Text>\n        // </View>\n    console.log(\"TRANING MACHINE STATE\",this.state.Training_Machine_State)\n    return (\n  \t<View style={styles.container}>\n  \t\t<View style={styles.ctat_tutor}>\n        {(this.state.Training_Machine_State == \"Creating_Agent\") //||\n          // this.state.Interactions_Machine_State == \"Querying_Apprentice\" ||\n          // this.state.Interactions_Machine_State == \"Sending_Feedback\")\n          &&\n          <View style={styles.overlay}>\n            <Spinner\n              color={'#000000'}\n              size={150}\n              visible={true}\n              textContent={'Loading...'}\n              textStyle={styles.spinnerTextStyle}\n            />\n          </View> \n        }\n        \n  \t\t\t<Tutor\n          //tutor_props = {this.state.prob_obj}\n          ref={this.tutor}//{function(tutor) {window.tutor = tutor; console.log(\"TUTOR IS:\",tutor)}}\n          id=\"tutor_iframe\"\n          //current_state={ctat_state_machine}\n          //sm_service={ctat_state_machine_service}\n          interactive={false}\n          {...this.state.default_props}\n          {...this.state.tutor_props}\n        />\n  \t\t</View>\n\n  \t\t{lower_display}\n  \t</View>\n    );\n  }\n}\n\n//current={state_machine}\n//service={state_machine_service}\n//debugmode={true}\n//callbacks={window.button_callbacks}\n//nools_callback={window.nools_callback}/>\n\nconst styles = StyleSheet.create({\n      spinnerTextStyle: {\n        color: '#000000'\n      },\n      overlay: {\n        position: 'absolute',\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        backgroundColor: 'rgba(50, 50, 50, 0.3)',\n        flex: \"100%\",\n        justifyContent: \"center\",\n        alignItems: \"center\"\n      },\n      overlay_text: {\n        textAlign: 'center',\n      },\n\t     container : {\n        // flex : 0,\n        height : \"100%\",\n        width : \"100%\",\n        display : \"flex\",\n        alignItems : 'stretch',\n        overflow: \"hidden\",\n        // justifyContent: \"stretch\",\n        // padding: 20,\n        // alignItems:'stretch',\n        // backgroundColor: \"blue\",\n        // flex: \"100%\",\n        flexGrow: 1,\n        // flex:100,\n        flexDirection: \"column\",\n        // flexWrap: \"wrap\"\n      },\n      ctat_tutor: {\n\n      \t// backgroundColor: 'powderblue',\n      \t\n      \t// flexGrow: 1,\n      \t// height : \"65%\",\n      \t// width : \"100%\",\n        // width:800,\n        // height: vh(64),\n        // flexGrow: 100,\n        flex: 65,\n        margin: 4,\n        // flex: 1,\n        // flexBasis: 65,\n        \n        \n        \n\n      },\n      prompt : {\n        flex: 35,\n        textAlign : \"center\"\n      },\n      controls :{\n\n      \t// flexGrow: 1,\n      \t// flexBasis: 300,\n        // display: \"flex\",\n        maxHeight : \"35%\",\n        flex: 35,\n        // flexBasis: .35,\n        flexDirection: \"row\",\n        alignItems: \"stretch\",\n\n        // flexWrap: \"wrap\",\n        // width : 600,\n        // flexGrow: 1,\n        // flexBasis:  600,\n        // height: vh(35),\n        // justifyContent: \"center\",\n      },\n      \n      skill_panel : {\n      \t// width: \"65%\",\n      \t// height: 300,\n        // height: vh(35),\n        flex : 60,\n        // flexBasis: .60,\n        // flexGrow : 0\n        // flexDirection: \"row\",\n        // flexShrink: 1,\n        // flexBasis: 1\n        /*height: 320px*/\n\n      },\n      \n\n      buttons : {\n        // flexGrow: 1,\n        // display: \"flex\",\n        // width : 1000,\n        // flexBasis: 2,\n        flex : 40,\n        flexDirection: \"column\",\n        // height: vh(35),\n        // width: \"35%\",\n        // flexBasis : .40,\n        // flexBasis : 40,\n        // flexShrink : 0 0 \"40%\",\n        \n        /*width:300px;*/\n        // flexWrap: \"wrap\",\n        justifySelf : \"space-around\",\n        \n        // flexBasis: 32,\n        /*justify-self:  start;*/\n        /*align-self:  ;*/\n        /*padding: 60px,*/\n        // justifyContent: \"auto\",\n        \n        // alignContent: \"center\"\n        \n      }\n\n});","import { Machine, assign, interpret } from \"xstate\";\nimport RJSON from \"relaxed-json\";\nimport { build_interactions_sm } from \"./interactions.js\";\nimport { applyPriorKnowledge } from \"./prior_knowledge.js\";\nimport { evalJSONFunc } from \"./eval.js\";\nimport { Random } from \"random-js\";\n\nvar pick = require('object.pick');\nvar fs = require(\"fs\");\n// const path = require(\"path\")\n\nconst random = new Random();\n\n//A set of properties which are passed from the training handler SM context \n//  to the interactions SM as props \nexport const problem_props = ['agent_id','free_author', \n        'interactive','tutor_mode','examples_only','test_mode', 'outer_loop_controller']\nconst problem_props_dict = problem_props.reduce(function(obj, x) { obj[x] = null;return obj;}, {});        \n\nconst CTATGuid = {\n  s4: function s4() {\n    return Math.floor((1 + Math.random()) * 65536)\n      .toString(16)\n      .substring(1);\n  },\n  guid: function guid() {\n    return (\n      this.s4() +\n      this.s4() +\n      \"-\" +\n      this.s4() +\n      \"-\" +\n      this.s4() +\n      \"-\" +\n      this.s4() +\n      \"-\" +\n      this.s4() +\n      this.s4() +\n      this.s4()\n    );\n  }\n};\n\nfunction load_training_file(context, event) {\n  console.log(\"TRAINING JSON:\", context.training_file);\n  return fetch(context.training_file)\n    .then(response => response.text()) //response.json())\n    .then(response => RJSON.parse(response)) //response.json())\n    .then(response => Object.entries(response))\n    .then(response => {\n      return { updateContext: { training_iterator: response } };\n    });\n  // var promise = new Promise((resolve, reject) => {\n  // try{\n  // \tlet file_name = context.training_json\n  // \tlet rawdata = fs.readFileSync(file_name)\n  // \tlet training_json_obj = JSON.parse(rawdata);\n  // \tvar training_iterator = Object.entries(training_json_obj);\n  // }catch(error){\n  // \tconsole.error(error)\n  // \treject(error)\n  // }\n  // resolve(training_iterator)\n  // });\n  // return promise\n}\n\nfunction serve_next_training_set(context, event) {\n  var promise = new Promise(async (resolve, reject) => {\n    var training_iterator = context.training_iterator;\n    var file_params = context.file_params || {};\n    console.log(\"TRAINING ITERATOR\", training_iterator.length);\n    if (training_iterator.length > 0) {\n      var out = training_iterator.shift();\n      var name = out[0];\n\n      while (name == \"set_params\") {\n        file_params = { ...file_params, ...out[1] }; //join and prefer new one\n        out = training_iterator.shift();\n        name = out[0];\n      }\n\n      console.log(\"START TRAINING SET: \", name, file_params);\n      var agent_iterator = await evalJSONFunc(out[1],context);\n\n      resolve({\n        updateContext: {\n          training_iterator: training_iterator,\n          agent_iterator: agent_iterator,\n          file_params: file_params,\n          training_description:\n            context.training_file.replace(/^.*[\\\\\\/]/, \"\") + \" : \" + name\n        }\n      });\n    } else {\n      resolve(null);\n    }\n  });\n  return promise;\n}\n\nasync function parseOuterLoopController(x, context, problem_set = null) {\n  if (typeof x == \"string\") {\n    x = { type: x };\n  }\n  if(x['problem_set']){\n    x[\"problem_set\"] = await evalJSONFunc(x['problem_set'], context);\n  }else if(problem_set != null){\n    x[\"problem_set\"] = problem_set;\n  }\n  x[\"initialized\"] = false;\n  return { outer_loop_controller: x };\n}\n\n// function resolveProblemSet(spec, context){\n// \tvar promise = new Promise( async (resolve,reject) => {\n// \t\tvar rez;\n// \t\tif(typeof(spec) == 'object'){\n//         \tspec = {...spec};\n\n// \t\t\tvar key = Object.keys(spec)[0];\n// \t\t\tvar val = spec[key]\n// \t\t\tif(key == \"concatenate\"){\n// \t\t\t\tvar all = []\n// \t\t\t\tfor(var g of val){\n// \t\t\t\t\trez = await resolveProblemSet(g,context)\n// \t\t\t\t\tall = all.concat(rez)\n// \t\t\t\t}\n// \t\t\t\tresolve(all)\n// \t\t\t}else if(key == \"shuffle\"){\n// \t\t\t\trez = await resolveProblemSet(val,context)\n// \t\t\t\tresolve(random.shuffle(rez))\n// \t\t\t}else if(key == \"sample\"){\n// \t\t\t\tvar n = val['n']\n// \t\t\t\t//TODO: Implement -> var w_repl = val['with_replacement'] || false\n// \t\t\t\tvar set = val['set']\n// \t\t\t\tset = await resolveProblemSet(set,context)\n// \t\t\t\tconsole.log(\"IT IS THIS BIG:\", set.length)\n// \t\t\t\tresolve(random.sample(set, n))\n// \t\t\t}else if(key == \"glob\"){\n// \t\t\t\tvar glob_key = val['key']\n// \t\t\t\tvar pattern = val['pattern']\n// \t\t\t\tvar matches = await context.network_layer.glob(pattern,context)\n// \t\t\t\tmatches = matches.map(m => {var o = {}; o[glob_key]=\"/\"+m; return o})\n// \t\t\t\tresolve(matches)\n// \t\t\t}else if(key == \"from_file\"){\n\n// \t\t\t}else{\n// \t\t\t\tresolve(spec)\n// \t\t\t}\n//         }else{\n//         \tresolve([...spec]);\n//         }\n\n// \t})\n// \treturn promise\n// }\n\nfunction serve_next_agent(context, event) {\n  var promise = new Promise(async (resolve, reject) => {\n    var agent_iterator = context.agent_iterator;\n    console.log(\"AGENT ITERATOR\", agent_iterator.length);\n    if (context.agent_iterator.length > 0) {\n      var agent_obj = agent_iterator.shift();\n\n      if (\"repetitions\" in agent_obj) {\n        if (agent_obj[\"repetitions\"] < 0) {\n          agent_iterator.unshift({\n            ...agent_obj,\n            ...{ _rep_count: (agent_obj[\"_rep_count\"] || 1) + 1 }\n          });\n        } else if (agent_obj[\"repetitions\"] == 0) {\n          agent_obj = agent_iterator.shift();\n        } else if (agent_obj[\"repetitions\"] >= 2) {\n          agent_obj[\"repetitions\"] -= 1;\n          agent_iterator.unshift({\n            ...agent_obj,\n            ...{ _rep_count: (agent_obj[\"_rep_count\"] || 1) + 1 }\n          });\n        }\n        agent_obj[\"_rep_count\"] = agent_obj[\"_rep_count\"] || 1;\n      }\n\n      var problem_set = await evalJSONFunc(agent_obj[\"problem_set\"], context);\n      \n      if(agent_obj[\"problem_set\"]){\n        console.log(\"RESOLVED PROBLEM SET\", [...problem_set]);  \n      }\n      \n      // if(typeof(agent_obj[\"problem_set\"]) == 'object'){\n      // \tvar problem_set = {...agent_obj[\"problem_set\"]};\n      // \tproblem_set = await resolveProblemSet(problem_set)\n      // }else{\n      // \tvar problem_set = [...agent_obj[\"problem_set\"]];\n      // }\n\n      agent_obj = { ...(context.file_params[\"agent\"] || {}), ...agent_obj };\n\n      if (\n        context.file_params[\"agent\"] &&\n        context.file_params[\"agent\"][\"args\"]\n      ) {\n        agent_obj[\"args\"] = {\n          ...context.file_params[\"agent\"][\"args\"],\n          ...agent_obj[\"args\"]\n        };\n      }\n      var agent_params = agent_obj[\"set_params\"] || {};\n      var rep_count_str =\n        agent_obj[\"_rep_count\"] != null\n          ? \"(\" + agent_obj[\"_rep_count\"] + \")\"\n          : \"\";\n      agent_obj[\"agent_name\"] += rep_count_str;\n      var agent_description =\n        \"Agent Name: \" +\n        agent_obj[\"agent_name\"] +\n        \"\\nAgent Type: \" +\n        agent_obj[\"agent_type\"]; //+\"<br>\"\n\n      var prior_knowledge = [...(agent_obj[\"prior_knowledge\"] || [])];\n\n      var outer_loop_controller = null;\n      if (\"outer_loop_controller\" in agent_obj) {\n        outer_loop_controller = await parseOuterLoopController(\n          agent_obj[\"outer_loop_controller\"],\n          context,\n          problem_set,\n        );\n        problem_set = [outer_loop_controller];\n      }\n\n      var other_data = { ...agent_obj };\n      delete other_data[\"problem_set\"];\n      delete other_data[\"agent_name\"];\n      delete other_data[\"agent_type\"];\n\n      resolve({\n        updateContext: {\n          start_state_history: [],\n          request_history: [],\n          session_id: CTATGuid.guid(),\n          user_guid: agent_obj[\"agent_name\"], //\"Stu_\" + CTATGuid.guid(),\n\n          agent_params: agent_params,\n          agent_name: agent_obj[\"agent_name\"],\n          agent_type: agent_obj[\"agent_type\"],\n          agent_description: agent_description,\n          other_agent_data: other_data,\n\n          agent_iterator: agent_iterator,\n          problem_set: problem_set,\n          prior_knowledge: prior_knowledge,\n          agent_start_time: new Date(),\n          outer_loop_controller : outer_loop_controller,\n          \n        }\n      });\n    } else {\n      resolve(null);\n    }\n  });\n  return promise;\n}\n\nfunction handle_prior_knowledge(context, event) {\n  var promise = new Promise((resolve, reject) => {\n    // console.log(\"WOOP?\")\n    var prior_knowledge = context.prior_knowledge;\n    while (prior_knowledge.length > 0) {\n      console.log(\"CURRENT\", prior_knowledge);\n      var current = prior_knowledge.shift();\n      var out = applyPriorKnowledge(context, current, prior_knowledge);\n      if (out[\"updateContext\"]) {\n        resolve({ updateContext: out[\"updateContext\"] });\n      }\n      if (out[\"train_now\"] || false) {\n        return promise;\n      }\n    }\n\n    resolve({\n      updateContext: {\n        prior_knowledge: prior_knowledge,\n        problem_iterator: context.problem_set\n      }\n    });\n  });\n  return promise;\n}\n\nasync function _next_prob_obj(\n  problem_iterator,\n  agent_params,\n  file_params,\n  context\n) {\n  var promise = new Promise(async (resolve, reject) => {\n    var prob_obj = problem_iterator.shift();\n    console.log(\"prob_obj\",prob_obj)\n    while (prob_obj != null && \"outer_loop_controller\" in prob_obj) {\n      var nl = context.network_layer;\n      if (!nl.OUTER_LOOP_URL) {\n        nl.kill_this(\n          \"\\nCANNOT USE 'outer_loop_controller' : {} pattern unless \" +\n            \"running altrain with --outer-loop flag.\\n\"\n        );\n      }\n      // console.log(\"HERE1.5\")\n\n      var controller = prob_obj[\"outer_loop_controller\"];\n      if (!controller[\"initialized\"]) {\n        //TODO: allow for multiple controllers?\n        // console.log(\"HERE1.6\")\n        await nl.newOuterLoopController(controller, context);\n        controller[\"initialized\"] = true;\n        // console.log(\"HERE1.7\")\n      }\n      // console.log(\"HERE1.9\")\n      var next = await nl.nextProblem(controller, context);\n      // console.log(\"NXT\", next)\n      if (next != null) {\n        problem_iterator.unshift({ ...prob_obj });\n        prob_obj = next;\n      } else if (problem_iterator.length > 0) {\n        prob_obj = problem_iterator.shift();\n      } else {\n        resolve([null, agent_params]);\n        return\n      }\n    }\n\n    // console.log(prob_obj);trz\n    if (!prob_obj) {\n      resolve([null, agent_params]);\n      return;\n    }\n\n    while (\"set_params\" in prob_obj) {\n      agent_params = { ...agent_params, ...prob_obj[\"set_params\"] };\n      prob_obj = problem_iterator.shift();\n      if (!prob_obj) {\n        resolve([null, agent_params]);\n        return;\n      }\n    }\n    // console.log(prob_obj)\n    var fp_clone = { ...file_params };\n    delete fp_clone[\"agent\"];\n    prob_obj = { ...fp_clone, ...agent_params, ...prob_obj };\n    // console.log(prob_obj,agent_params)\n    resolve([prob_obj, agent_params]);\n    return;\n  });\n  return promise;\n}\n\nfunction serve_next_problem(context, event) {\n  var promise = new Promise(async (resolve, reject) => {\n    var prob_obj = null;\n    var agent_params = context.agent_params;\n    var file_params = context.file_params;\n    var problem_iterator = context.problem_iterator;\n    var nl = context.network_layer;\n    var interactive = context.interactive;\n    console.log(\"PROBLEM ITERATOR\", problem_iterator.length);\n\n    if (problem_iterator.length > 0) {\n      // console.log(\"HERE1\")\n      [prob_obj, agent_params] = await _next_prob_obj(\n        problem_iterator,\n        agent_params,\n        file_params,\n        context\n      );\n      // console.log(prob_obj,agent_params)\n      console.log(\"SLOOOP\")\n      console.log(prob_obj)\n      if (prob_obj) {\n        if (\"repetitions\" in prob_obj) {\n          if (prob_obj[\"repetitions\"] < 0) {\n            problem_iterator.unshift({ ...prob_obj });\n          } else if (prob_obj[\"repetitions\"] == 0) {\n            [prob_obj, agent_params] = await _next_prob_obj(\n              problem_iterator,\n              agent_params,\n              file_params,\n              context\n            );\n          } else if (prob_obj[\"repetitions\"] >= 2) {\n            prob_obj[\"repetitions\"] -= 1;\n            problem_iterator.unshift({ ...prob_obj });\n          }\n        }\n\n        // var EXAMPLES_ONLY = prob_obj[\"examples_only\"] || false;\n\n        var problem_description = Object.keys(prob_obj).reduce((s, key) => {\n          return s + key + \": \" + prob_obj[key] + \"\\n\";\n        }, \"\");\n\n        resolve({\n          updateContext: {\n            agent_params: agent_params,\n            problem_iterator: problem_iterator,\n            prob_obj: prob_obj,\n            problem_description: problem_description\n          }\n        });\n      } else {\n        resolve(null);\n      }\n    } else {\n      resolve(null);\n    }\n  });\n  return promise;\n}\nfunction load_problem(context, event) {\n  return context.tutor.loadProblem(context);\n}\nfunction query_outerloop(context, event) {}\n\nfunction iteratorEmpty(context, event) {\n  return event.data == null;\n}\nfunction AAID(interactions_state_machine) {\n  var boop = (context, event) => {\n    console.log(\"MOOOP\");\n    return {\n      ...interactions_state_machine.context,\n      ...{ agent_id: context.agent_id }\n    };\n  };\n}\n\nfunction sendProblemDone(context, event){\n  context.network_layer.sendProblemDone(context,event)\n}\n\n// function gerp(event){\n// \tconsole.log(\"GERP\")\n// \treturn event.data['agent_id']\n// }\n\nfunction start_training_interaction(context, event) {\n  console.log(\"START TRAINING INTERACTION\");\n  var app = context.app;\n\n  var pass_along_context = {...pick(context, problem_props),\n                            ...pick(context.prob_obj, problem_props)}\n  // {\n  //   agent_id: context.agent_id,\n  //   interactive: context.interactive,\n  //   free_author: context.free_author\n  // };\n\n  var interactions_sm = context.interactions_sm.withContext({\n    ...context.interactions_sm.context,\n    ...pass_along_context\n  });\n  var interactions_service = interpret(interactions_sm);\n  context.app.interactions_service = interactions_service;\n  interactions_service.onTransition(app.onInteractionTransition);\n  interactions_service.start();\n}\n\nfunction allDone(context, event) {\n  var nl = context.network_layer;\n  console.log(\"ITS ALL DONE!\");\n  nl.kill_this(\"\\n TRAINING FINISHED SUCCESSFULLY! \\n\", \"info\");\n  // nl.term_print('\\x1b[0;30;47m' + \"TRAINING FINISHED SUCCESSFULLY!\" + '\\x1b[0m');\n}\n\nconst assignInteractionSM = assign({\n  interactions_sm: (context, event) => {\n    var new_context = {\n      ...{app: context.app},\n      ...pick(context,problem_props),\n      ...pick(context.prob_obj,problem_props),\n      ...event.data\n    };\n    console.log(\"assignInteractionSM\", new_context);\n    var sm = build_interactions_sm(\n      new_context.app,\n      new_context\n    );\n    return sm;\n  }\n});\n\n// function create_agent(context,event){\n// \tvar nl = context.network_layer;\n\n// \treturn nl.create_agent(context,event)\n\n// }\n\nexport function build_training_sm(app, interactions_sm) {\n  // interactions_state_machine,network_layer,training_file,tutor,working_dir\n  var nl = app.network_layer;\n  var context = {\n    //Utils\n    app: app,\n    tutor: app.tutor.current,\n    skill_panel: app.skill_panel.current,\n    buttons: app.buttons.current,\n    network_layer: app.network_layer,\n\n    //Inherited\n    interactive: app.props.interactive,\n    training_file: app.props.training_file,\n    working_dir: app.props.working_dir,\n    interactions_sm: interactions_sm,\n\n    //Dynamic\n    file_params: null,\n    agent_params: null,\n    prob_obj: null,\n    // free_author: null\n  };\n  \n  context = {...problem_props_dict,...context}\n\n\n  const sm = Machine(\n    {\n      context: context,\n      initial: \"Loading_Training_File\",\n      states: {\n        Loading_Training_File: {\n          invoke: {\n            id: \"load_training_file\",\n            src: \"load_training_file\",\n            onDone: {\n              target: \"Serving_Training_Sets\",\n              actions: \"updateContext\"\n            },\n            onError: { target: \"Fail\", actions: \"logError\" }\n          }\n        },\n        Serving_Training_Sets: {\n          invoke: {\n            id: \"serve_next_training_set\",\n            src: \"serve_next_training_set\",\n            onDone: [\n              { target: \"All_Done\", cond: \"iteratorEmpty\" },\n              { target: \"Serving_Agents\", actions: \"updateContext\" }\n            ],\n            onError: { target: \"Fail\", actions: \"logError\" }\n          }\n        },\n        Serving_Agents: {\n          invoke: {\n            id: \"serve_next_agent\",\n            src: \"serve_next_agent\",\n            onDone: [\n              { target: \"Serving_Training_Sets\", cond: \"iteratorEmpty\" },\n              { target: \"Creating_Agent\", actions: \"updateContext\" }\n            ],\n            onError: { target: \"Fail\", actions: \"logError\" }\n          }\n        },\n        Creating_Agent: {\n          invoke: {\n            id: \"create_agent\",\n            src: \"create_agent\",\n            onDone: {\n              target: \"Handling_Prior_Knowledge\",\n              actions: \"assignAgentId\"\n            },\n            onError: { target: \"Fail\", actions: \"logError\" }\n          }\n        },\n        Handling_Prior_Knowledge: {\n          invoke: {\n            id: \"handle_prior_knowledge\",\n            src: \"handle_prior_knowledge\",\n            onDone: { target: \"Serving_Problems\", actions: \"updateContext\" },\n            onError: { target: \"Fail\", actions: \"logError\" }\n          }\n        },\n        Serving_Problems: {\n          invoke: {\n            id: \"serve_next_problem\",\n            src: \"serve_next_problem\",\n            onDone: [\n              { target: \"Serving_Agents\", cond: \"iteratorEmpty\" },\n              { target: \"Waiting_Problem_Load\", actions: \"updateContext\" }\n            ],\n            onError: { target: \"Fail\", actions: \"logError\" }\n          }\n        },\n        Waiting_Problem_Load: {\n          invoke: {\n            id: \"load_problem\",\n            src: \"load_problem\",\n            onDone: { target: \"Training\", actions: \"updateContext\" },\n            onError: { target: \"Fail\", actions: \"logError\" }\n          }\n        },\n        Training: {\n          entry: \"start_training_interaction\",\n          on: {\n            PROBLEM_DONE: {\n              target : \"Serving_Problems\",\n              actions : \"sendProblemDone\",\n            },\n            CHANGE_INTERACTION_MODE: {\n              target: \"Serving_Problems\",\n              actions: \"assignInteractionSM\"\n            }\n          }\n          // invoke : {\n          // \tid: \"interactions_state_machine\",\n          // \tsrc: \"interactions_state_machine\",\n          // \tdata : (context, event) => ({...interactions_state_machine.context, ...{\"agent_id\": context.agent_id}}),\n          // \tonDone: \"Serving_Problems\",\n          // \tonError: {target :'Fail', actions : \"logError\"}\n          // },\n          // entry : send({type: \"ASSIGN_AGENT\", \"agent_id\" : agent_id})\n        },\n        All_Done: {\n          entry: \"allDone\",\n          type: \"final\"\n        },\n        Fail: {\n          entry: [\"logError\", \"kill_this\"]\n        }\n      }\n    },\n    {\n      services: {\n        load_training_file: load_training_file,\n        serve_next_training_set: serve_next_training_set,\n        serve_next_agent: serve_next_agent,\n        create_agent: nl.createAgent,\n        serve_next_problem: serve_next_problem,\n        load_problem: load_problem,\n        handle_prior_knowledge: handle_prior_knowledge\n\n        // interactions_state_machine : interactions_state_machine,\n      },\n      actions: {\n        start_training_interaction: start_training_interaction,\n        logError: (context, event) => {\n          console.error(event.data);\n        },\n        updateContext: assign((context, event) => {\n          return event.data.updateContext;\n        }),\n        assignAgentId: assign((context, event) => {\n          return { agent_id: event.data[\"agent_id\"] };\n        }),\n        allDone: allDone,\n        assignInteractionSM: assignInteractionSM,\n        sendProblemDone : sendProblemDone\n      },\n      guards: {\n        iteratorEmpty: iteratorEmpty\n      }\n    }\n  );\n\n  // console.log(\"JSON MACHINE\",sm)\n  return sm;\n}\n","import path from 'path'\n\nconst type_map = {\n\t\"bestintersect\" : applyBestInstersect\n}\n\n\nexport function applyPriorKnowledge(context,spec,iter){\n\tvar type = spec.type.toLowerCase().replace(\"_\", \"\")\n\treturn type_map[type](spec,iter)\n\n}\n\n\nfunction buildTransactionCache(){\n\n}\n\nfunction assertTransactionCache(){\n\n}\n\nasync function applyBestInstersect(context,spec,pk_iter){\n\t// var promise = new Promise((resolve, reject) => {\n\tvar cache_folder = spec[\"cache_folder\"] || (context.working_dir + \"/\" + \".pkcache\")\n\tvar cache = cache_folder + \"/\" + path.basename(context.training_file) + \".cache\"\n\tconsole.log(\"MOOOOOOOOO\", cache)\n\tvar cache_content = await fetch(cache)\n\t \t.then(function(response) {\n\t \t\tif (!response.ok) {\n\t            throw Error(response.statusText);\n\t        }\n\t        return response\n\t \t})\n\t\t.then((response) => response.text())\n\t\t.catch((error) => {return null})\n\n\tvar out\n\tif(cache_content == null || (false && \"should also check md5sum of agentobj &&\")) {\n\t\t//No Cached Data -- Building by sampling from problems \n\t\tout = { updateContext : \n\t\t\t\t{\n\t\t\t\t\tprior_knowledge : [spec] + pk_iter,\n\t\t\t\t\tproblem_iterator : [] //?\n\t\t\t\t},\n\t\t\t\ttrain_now : true\n\t\t\t  }\n\t}else{\n\t\t//Cached Data Exists -- Training by \n\t\tout = { updateContext : \n\t\t\t\t{\n\t\t\t\t\tprior_knowledge : pk_iter,\n\t\t\t\t\tproblem_iterator : [] //?\n\t\t\t\t},\n\t\t\t\ttrain_now : true\n\t\t\t  }\n\t}\n\n\treturn out\n\n\n\t// }\n\n}","import {Random} from \"random-js\"\nimport papa from \"papaparse\"\nimport path from \"path\"\nconst random = new Random()\n\n\nexport var registedFunctions = {\n\t\"concatenate\" : concatenate,\n\t\"shuffle\" : shuffle,\n\t\"sample\" : sample,\n\t\"glob\" : glob,\n\t\"from_file\" : from_file,\n\t\"estimate_Pik\" : estimate_Pik,\n\t\"gen_pretraining\" : gen_pretraining,\n\t'gen_pivot_table' : gen_pivot_table,\n\t'mirror_students' : mirror_students\n}\n\nfunction abs_path(p,context){\n\tif(p[0] != \"/\"){\n\t\tp = context.working_dir + \"/\" + p\n\t}\n\treturn p\n}\n\nasync function concatenate(args, context){\n\tvar all = []\n\tfor(var g of args){\n\t\tvar rez = await evalJSONFunc(g,context)\n\t\tall = all.concat(rez)\n\t}\n\treturn all\n}\n\nasync function shuffle(args,context){\n\tvar rez = await evalJSONFunc(args,context)\n\treturn random.shuffle(rez)\n}\n\nasync function sample(args,context){\n\tvar n = args['n']\n\t//TODO: Implement -> var w_repl = val['with_replacement'] || false\n\tvar set = args['set']\n\tset = await evalJSONFunc(set,context)\n\tconsole.log(\"IT IS THIS BIG:\", set.length)\n\treturn random.sample(set, n)\n}\n\nasync function glob(args,context){\n\tif(typeof(args) == 'string'){\n\t\targs = {'pattern' : args}\n\t}\n\tvar glob_key = args['key'] || null\n\tvar pattern = args['pattern']\n\tvar matches = await context.network_layer.glob(pattern,context)\n\tif(glob_key || args['obj_template']){\n\t\tvar default_obj = args['obj_template'] || {}\n\t\tmatches = matches.map(m => {var o = {...default_obj}; o[glob_key]=\"/\"+m; return o})\t\n\t}else{\n\t\tmatches = matches.map(m => \"/\"+m)\n\t}\n\treturn matches\n}\n\nasync function from_file(args,context){\n\tthrow \"Not Implemented\"\n}\n\n\n//------------------PRIOR KNOWLEDGE STUFF------------------------\n\nasync function backcast(args,context){\n\n}\n\nfunction p_parse_csv(csv,config={},pre_fetch=false, is_path=true){\n\tif(is_path){csv = csv.replace(/\\.\\./g,\"!u\")}\n\tvar promise = new Promise(async function(resolve, reject) {\n\t\tconfig['complete'] = resolve\n\t\tif(pre_fetch){\n\t\t\tcsv = await fetch(csv).then(resp => resp.text())\n\t\t}\n\t\tpapa.parse(csv, config)\n\t})\n\treturn promise\n}\n\n\nasync function read_afm_table(file){\n\t// var promise = new Promise(async function(resolve, reject) {\n\tvar config = {\n\t\tdelimiter: \"\\t\",\n\t\theader: true,\n\t\tdynamicTyping: true\n\t}\n\tfile = file.replace(\"..\",\"!u\")\n\tvar promise = fetch(file)\n\t.then(resp => resp.text())\n\t.then((text) => {\n\t\tvar split = text.split(/\\n{2,}/g);\n\t\tvar kc_table = split[0].split(/Values for .* model.*\\n/)[1]\n\t\tvar student_table = split[1].split(\"in the selected KC model.\\n\")[1]\n\t\t// console.log(\"split\")\n\t\t// console.log(split)\n\t\t// console.log(kc_table)\n\t\t// console.log(student_table)\n\t\treturn [kc_table,student_table]\n\t})\n\t.then(async ([kc_table,stu_table]) => {\n\t\tvar kc_json = await p_parse_csv(kc_table, config,false,false)\n\t\tvar stu_json = await p_parse_csv(stu_table, config,false,false)\n\t\treturn [kc_json,stu_json]\n\t})\n    return promise\n}\n\nasync function exact_align(args,context){\n\tvar fo_err_by_kc\n\tif(args['fo_err_by_kc'] == null){\n\t\t// console.log(\"afm_stats\")\n\t\tvar [kc_json,stu_json] = await read_afm_table(abs_path(args['afm_stats'],context))\n\t\t// console.log(stu_json)\n\t\tvar stu_intr = stu_json.data.filter((x)=> x[\"Anon Student Id\"] == args['student_id'])[0][\"Intercept\"]\n\n\t\tfo_err_by_kc = {}\n\t\tfor(var row of kc_json.data){\n\t\t\tvar prob = 1.0/(1.0+Math.exp((stu_intr + row['Intercept (logit)'])))\n\t\t\tfo_err_by_kc[row['KC Name']] = prob\n\t\t}\n\t\t// console.log(fo_err_by_kc)\n\t}\n\tfo_err_by_kc = fo_err_by_kc || args['fo_err_by_kc']\n\n\tvar table_path = abs_path(args['error_table'],context)\n\t// console.log(\"table_path\")\n\t// console.log(table_path)\n\tvar error_table = await p_parse_csv(table_path, { delimiter: \"\\t\",header: true, dynamicTyping: true},true)\n\t// console.log(\"error_table\")\n\t// console.log(error_table)\n\tvar curve_by_kc = {}\n\t for (var r of error_table.data){\n\t\tvar key = r[\"KC Name\"]\n\t\tif(key){\n\t\t\tdelete r[\"KC Name\"]\n\t\t\tcurve_by_kc[key] = Object.values(r)\n\t\t}\n\t}\n\t// console.log(\"curve_by_kc\")\n\t// console.log(curve_by_kc)\n\tvar opps_by_kc = {}\n\tfor(var kc in curve_by_kc){\n\t\tvar curve = curve_by_kc[kc]\n\t\tvar min = Infinity;\n\t\tvar minIndex;\n\t\tvar y = fo_err_by_kc[kc]\n\n\t\t//Always round up\n\t\tfor(const [i,x] of curve.entries()){\n\t\t\tvar diff = y-x\n\t\t\tif(diff < min && diff > 0){\n\t\t\t\tmin = diff\n\t\t\t\tminIndex = i\n\t\t\t}\n\t\t}\n\t\topps_by_kc[kc] = minIndex\n\t}\n\n\t// console.log(\"opps_by_kc\")\n\t// console.log(opps_by_kc)\n\treturn opps_by_kc\n\t\n}\n\nasync function estimate_Pik(args,context){\n\t// console.log(\"ESTIMATE_PIK\")\n\tvar out;\n\tif(args['method'] == \"exact_align\"){\n\t\tout = await exact_align(args,context)\n\t}else if(args['method'] == \"backcast\"){\n\t\tout = await backcast(args,context)\n\t}\n\t// console.log(args['KCs'])\n\t// console.log(\"BEFORE\")\n\t// console.log({...out})\n\tif('KCs' in args && args['KCs'] != null){\n\t\tvar new_out = {}\n\t\tfor (var key of args['KCs']) {\n\t\t\tnew_out[key] = out[key]\n\t\t}\n\t\tout = new_out\n\t}\n\t// console.log(\"AFTER\")\n\t// console.log({...out})\n\tif('max' in args && args['max'] != null){\n\t\tfor (var key in out) {\n\t\t\tout[key] = Math.min(out[key],args['max']);\n\t\t}\n\t}\n\n\treturn out\n}\n\nasync function gen_pretraining(args,context,shuffle=false){\n\t//Get the number of opportunities for each KC\n\tvar opps_by_kc = await evalJSONFunc(args['opportunities'],context)\n\tvar only_attr = args['by_step_id'] || false ? \"step_id\" : \"Selection\" \n\tvar only_str = \"only_\" + only_attr + \"s\"\n\t// console.log(\"opps_by_kc\")\n\t// console.log(opps_by_kc)\n\topps_by_kc = {...opps_by_kc}\n\n\t\n\tvar pivot_table\n\tif(typeof(args['step_pivot_table']) == \"string\"){\n\t\talert(\"NOT IMPLEMENTED\")\n\t\t// pivot_table = await p_parse_csv(abs_path(args['step_pivot_table'],context),\n\t\t// { delimiter: \"\\t\",header: true, dynamicTyping: true},true)\t\n\t}else{\n\t\tpivot_table = await evalJSONFunc(args['step_pivot_table'],context)\n\t}\n\t\n\t\n\t// console.log(\"pivot_table\")\n\t// console.log(pivot_table)\n\n\tvar problem_pool = Object.keys(pivot_table)\n\tif(shuffle){problem_pool = random.shuffle(problem_pool)}\n\tvar out = []\n\n\t// console.log(\"problem_pool\")\n\t// console.log(problem_pool)\n\t\n\t//Not really a core feature, just necessary for this tutor\n\tvar onlys_map = args['onlys_map'] || null\n\n\t//For all problems add to problem set if any kc needs more practice. \n\t//\t If not all KCs need practice only train KCs that need practice.\n\tfor(var p of problem_pool){\n\t\tvar all=true\n\t\tvar any=false\n\t\tvar only_steps = []\n\t\tvar prob = pivot_table[p]\n\t\tfor(var kc in prob){\n\t\t\tif(opps_by_kc[kc] > 0){\n\t\t\t\topps_by_kc[kc] -= 1\n\t\t\t\tvar steps = prob[kc][only_attr]\n\t\t\t\tsteps = Array.from(steps)\n\t\t\t\tif(onlys_map){\n\t\t\t\t\tsteps = steps.map(x => onlys_map[x])\n\t\t\t\t}\n\t\t\t\tif(steps.length==1){steps = steps[0]}\n\t\t\t\tonly_steps.push(steps)\n\t\t\t\tany=true\n\t\t\t}else{\n\t\t\t\tall=false\n\t\t\t}\n\t\t}\n\n\t\t\n\t\tif(any){\n\t\t\tvar o = {}\n\t\t\to[args['problem_key']] = p\n\t\t\tif(!all){o[only_str] = only_steps}\n\t\t\tout.push(o)\n\t\t}\n\t}\n\n\t//Throw an error if there weren't enough problems\n\tif(Object.values(opps_by_kc).reduce((a,b) => a + b, 0) > 0){\n\t\tvar error = \"Insufficient problems in problem_pool to pretrain requested number of steps. \" + \n\t\t\t\"Additional problems required for KCs/Steps: \" + JSON.stringify(opps_by_kc)\n\t\tcontext.network_layer.kill_this(error)\n\t\tconsole.error(error)\n\t}\n\n\t// console.log(\"gen_pretraining\")\n\t// console.log(out)\n\n\tconsole.log(\"opps_by_kc\")\n\tconsole.log(opps_by_kc)\n\treturn out\n}\n\nasync function mirror_students(args,context){\n\tconsole.log(\"MIRROR_START\")\n\tvar human_transactions = abs_path(args['human_transactions'],context)\n\t\n\tvar human_afm_stats = args['human_afm_stats']\n\tvar pool_agent_error_table = args['pool_agent_error_table']\n\tvar Pik_method = args['Pik_method']\n\tvar problem_key = args['problem_key']\n\tvar kc_model = args['kc_model']\n\tvar KCs = args['KCs']\n\tvar maximum = args['max']\n\tvar human_problems = await evalJSONFunc(args['human_problems'],context)\n\tvar human_path_map = {}\n\tfor(var p of human_problems){\n\t\thuman_path_map[path.basename(p).split(\".\")[0]] = p\n\t}\t\n\n\tif('step_pivot_table' in args){\n\t\tvar step_pivot_table = await evalJSONFunc(args['step_pivot_table'],context)\n\t}else{\n\t\tvar pool_agent_problems = await evalJSONFunc(args['pool_agent_problems'],context)\n\t\tvar step_pivot_table = {\"gen_pivot_table\" : {\n\t\t\t\"transaction_file\" : args['pool_agent_transactions'],\n          \t\"problem_pool\" : pool_agent_problems,\n          \t\"kc_model\" : args['kc_model']\n\t\t  }\n\t\t}\n\t\tstep_pivot_table = await evalJSONFunc(step_pivot_table,context)\n\t}\n\n\t\n\n\t\n\n\t\n\tvar human_prob_seq = {}\n\t// var buggy_students = new Set()\n\tvar config = {\n\t\tdynamicTyping: true,\n\t\tdelimiter: \"\\t\",\n\t\theader : true,\n\t\tdownload : true,\n\t\tstep : function (row){\n\t\t\tvar row = row.data\n\t\t\tif(row && 'Anon Student Id' in row){\n\t\t\t\tvar sequence = human_prob_seq[row['Anon Student Id']] || []\n\t\t\t\tvar prob = row['Problem Name'] || \"\"\n\t\t\t\tvar view = row['Problem View'] || \"\"\n\t\t\t\tif(prob != \"\"){\n\t\t\t\t\tvar pv = String(prob) + \"#\"+ String(view)\n\t\t\t\t\tif(sequence.length == 0){\n\t\t\t\t\t\tsequence.push(pv)\n\t\t\t\t\t}else if(!sequence.includes(pv)){\n\t\t\t\t\t\t// if(sequence.includes(pv)){\n\t\t\t\t\t\t// \tconsole.log(\"BUGGY\")\n\t\t\t\t\t\t// \tconsole.log(pv,[...sequence])\n\t\t\t\t\t\t// \t// buggy_students.add(row['Anon Student Id'])\n\t\t\t\t\t\t// }\n\t\t\t\t\t\tsequence.push(pv)\t\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\thuman_prob_seq[row['Anon Student Id']] = sequence\n\t\t\t}\n\t\t}\n\t}\n\n\n\t//Run the 'step' function specified above line by line-by-line to find the problem sequences.\n\tvar url = context.network_layer.HOST_URL + human_transactions\n\t// console.log(\"human transactions\")\n\t// console.log(url)\n\n\tvar nothing = await p_parse_csv(url,config,false)\n\n\t// console.log(\"CRAFF\")\n\t// console.log(human_prob_seq)\n\t// console.log(buggy_students)\n\t// for(var std of buggy_students){\n\t// \tvar text = \"Will Skip Student \" + std + \". Multiple problems done concurrently.\"\n\t// \tconsole.warn(text)\n\t// \tcontext.network_layer.term_print(text,'warning')\n\t// \tdelete human_prob_seq[std]\n\t// }\n\tconsole.log(\"BEEE\")\n\tconsole.log(human_prob_seq)\n\t//Strip out view numbers\n\tfor(var std in human_prob_seq){\n\t\thuman_prob_seq[std] = human_prob_seq[std].map(x => x.substring(0, x.lastIndexOf(\"#\")))\n\t}\n\tconsole.log(\"AFFFF\")\n\tconsole.log(human_prob_seq)\n\n\n\tconsole.log(\"human_prob_seq\")\n\tconsole.log(human_prob_seq)\n\n\tconsole.log(\"human_path_map\")\n\tconsole.log(human_path_map)\n\n\t// Turn the problem names from the student transactions into paths\n\tfor(var student in human_prob_seq){\n\t\tvar seq = human_prob_seq[student]\n\t\tvar new_seq = []\n\t\tfor(var prob of seq){\n\t\t\tvar full_path = human_path_map[prob]\n\t\t\tif(full_path){\n\t\t\t\tvar o = {}\n\t\t\t\to[problem_key] = full_path\n\t\t\t\tnew_seq.push(o)\n\t\t\t}\n\t\t}\n\t\thuman_prob_seq[student] = new_seq\n\t}\n\n\tvar out = []\n\tif('store_opp_table' in args){\n\t\tvar opp_table = []\n\t}\n\n\tconsole.log(\"full_paths\")\n\tconsole.log(human_prob_seq)\n\tfor(var student_id in human_prob_seq){\n\t\tvar stu_seq = human_prob_seq[student_id]\n\t\tif(stu_seq.length > 0){\n\t\t\tvar opps_by_kc = {\"estimate_Pik\" :{\n\t\t              \"method\" : Pik_method,\n\t\t              \"afm_stats\" : human_afm_stats,\n\t\t              \"student_id\" : student_id,\n\t\t              \"error_table\" : pool_agent_error_table,\n\t\t              \"KCs\" : KCs,\n\t\t              \"max\" : maximum,\n\t\t              }\n\t\t            }\n\t\t    opps_by_kc = await evalJSONFunc(opps_by_kc,context)\n\n\t\t    //Just for debugging\n\t\t    if('store_opp_table' in args){\n\t\t    \tvar o = {}\n\t\t    \to['Anon Student Id'] = student_id\n\t\t    \tfor(var kc in opps_by_kc){\n\t\t    \t\to[kc] = opps_by_kc[kc]\n\t\t    \t}\n\t\t    \topp_table.push(o)\n\t\t    }\n\n\t\t\tvar pretraining = {\"gen_pretraining\" : \n\t\t\t\t{\"opportunities\" : opps_by_kc,\n\t\t\t\t\t// {\"estimate_Pik\" :{\n\t\t   //            \"method\" : Pik_method,\n\t\t   //            \"afm_stats\" : human_afm_stats,\n\t\t   //            \"student_id\" : student_id,\n\t\t   //            \"error_table\" : pool_agent_error_table,\n\t\t   //            \"KCs\" : KCs,\n\t\t   //            \"max\" : maximum,\n\t\t   //            }\n\t\t   //          },\n\t            \"step_pivot_table\" : step_pivot_table,\n\t            \"problem_key\" : problem_key,\n\t            \"kc_model\" : kc_model,\n\t            \"onlys_map\" : args[\"onlys_map\"] || null\n\t\t        }\n\t\t\t}\n\t\t\tpretraining = await evalJSONFunc(pretraining,context)\n\n\t\t\tvar d1 = {\"set_params\": {\n\t\t\t\t\"domain_name\" : 'prior_knowledge'\n\t\t\t}}\n\t\t\tvar d2 = {\"set_params\": {\n\t\t\t\t\"domain_name\" : undefined\n\t\t\t}}\n\t\t\n\t\t\tvar cat_list = [d1,pretraining,d2,stu_seq]\n\n\t\t\tvar agent_obj = {\n\t\t\t\t\"agent_name\" : student_id,\n\t\t\t\t\"problem_set\" : {\"concatenate\" : cat_list}\n\t\t\t}\n\t\t\tout.push(agent_obj)\t\n\t\t}else{\n\t\t\tvar text = \"Will Skip Student \" + student_id + \"because did not do any problems.\"\n\t\t\tconsole.warn(text)\n\t\t\tcontext.network_layer.term_print(text,'warning')\n\t\t}\n\t\t\n\t}\n\n\tif('store_opp_table' in args){\n\t\tvar csv = papa.unparse(opp_table,{delimiter: \"\\t\"})\n\t\tconsole.log(\"OUT CSV\")\n\t\tconsole.log(csv)\n\t}\n\tconsole.log(\"out\")\n\tconsole.log(out)\n\n\treturn out\n\n\n\n\n\n}\n\nasync function gen_pivot_table(args,context){\n\tvar pivot_table\n\n\t//If cache location speficied just read from the cache\n\tif(\"cache\" in args){\n\t\tvar pivot_table_csv = await p_parse_csv(abs_path(args['cache'],context))\n\t\tpivot_table = {}\n\t\tfor(var row of pivot_table_csv){\n\t\t\tpivot_table[row['Problem Path']] = pivot_table[row['Problem Path']] || {}\n\t\t\tpivot_table[row['Problem Path']][row['KC']][\"step_id\"] = row['step_id'].split(\",\")\n\t\t\tpivot_table[row['Problem Path']][row['KC']][\"Selection\"] = row['Selection'].split(\",\")\n\t\t}\n\t}\n\tif(pivot_table == null){\n\t\tvar transaction_file = abs_path(args['transaction_file'],context)\n\t\tvar problem_pool = await evalJSONFunc(args['problem_pool'],context)\n\t\tvar path_map = {}\n\t\tfor(var p of problem_pool){\n\t\t\tpath_map[path.basename(p).split(\".\")[0]] = p\n\t\t}\n\t\t\n\t\t//Get the column in the transaction file for the specified KC model.\n\t\tvar kc_model_id = args['kc_model'] || null\n\t\tkc_model_id = kc_model_id != null ? 'KC ('+kc_model_id+')' : \"Step Name\" \n\t\t\n\t\t//Read the transaction file on line at a time\n\t\tpivot_table = {}\n\t\tvar config = {\n\t\t\tdynamicTyping: true,\n\t\t\tdelimiter: \"\\t\",\n\t\t\theader : true,\n\t\t\tdownload : true,\n\t\t\tstep : function (row){\n\t\t\t\trow = row.data\n\t\t\t\t// console.log(\"row\", row)\n\t\t\t\t//Only record CORRECT steps (because others could be out of graph)\n\t\t\t\tif(row['Outcome'] === \"CORRECT\"){\n\t\t\t\t\tvar p = path_map[row['Problem Name']] || null\n\t\t\t\t\tif(p != null){\n\n\t\t\t\t\t\t//Fill the pivot table Problem Path, KC, Step id\n\t\t\t\t\t\tif(!(p in pivot_table)){\n\t\t\t\t\t\t\tpivot_table[p] = {}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar kc_str = row[kc_model_id]\n\t\t\t\t\t\tif(kc_str){\n\t\t\t\t\t\t\tif(!(kc_str in pivot_table[p])){\n\t\t\t\t\t\t\t\tpivot_table[p][kc_str] = {\"step_id\": new Set(), \"Selection\": new Set()}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar step_id_set = pivot_table[p][kc_str]\n\t\t\t\t\t\t\tstep_id_set['step_id'].add(row['CF (step_id)'])\n\t\t\t\t\t\t\tstep_id_set['Selection'].add(row['Selection'])\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t//Run the 'step' function specified above line by line-by-line to make the table.\n\t\tvar url = context.network_layer.HOST_URL + transaction_file\n\t\tvar nothing = await p_parse_csv(url,config,false)\n\n\t\t//If cache location specified cache the pivot table\n\t\tif(\"cache\" in args){\n\t\t\tvar csv = []\n\t\t\tfor(var prob in pivot_table){\n\t\t\t\tvar kc_table = pivot_table[prob]\n\t\t\t\tfor(var kc in kc_table){\n\t\t\t\t\tcsv.append({\"Problem Path\" : prob, \"KC\" : kc,\n\t\t\t\t\t\t \"step_id\": kc_table[kc]['step_id'].join(\",\"),\n\t\t\t\t\t\t \"Selection\": kc_table[kc]['Selection'].join(\",\")})\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tvar csv_str = papa.unparse(csv,{delimiter: \"\\t\", header:true, 'newline':'\\n'})\n\t\t\tcontext.network_layer.write_file(abs_path(args['cache'],context), csv_str)\n\t\t}\n\t\treturn pivot_table\n\t}\n}\n\nexport async function evalString(){\n\tthrow \"Not Implemented\"\n}\n\nexport async function evalJSONFunc(spec, context){\n\tif(Array.isArray(spec)){\n\t\treturn [...spec]\n\t}else if(typeof(spec) === 'object'){\n\t\tspec = {...spec};\n\n\t\tvar key = Object.keys(spec)[0];\n\t\tvar val = spec[key]\n\t\tif(key in registedFunctions){\n\t\t\treturn await registedFunctions[key](val,context)\n\t\t}else{\t\n\t\t\treturn spec\n\t\t}\n\t}else{\n\t\treturn spec\n\t}\n}\n\n// export async function evalFunc(name,args,context){\n// \tif(name in registedFunctions){\n// \t\treturn await registedFunctions[name](args,context)\n// \t}else{\t\n// \t\tthrow \"Function \" + name + \" is not a registed function.\"\n// \t}\n// }","import autobind from \"class-autobind\";\nconst AL_RETRY_LIMIT = 3;\nconst TIMEOUT = 100;\n\n// var $ = require('jquery');\n\n// var fetch = require(\"node-fetch\");\n\nfunction sleep(time) {\n  return new Promise(resolve => setTimeout(resolve, time));\n}\n\nfunction ignoreKeys(key, value) {\n  if (key == \"matches\") return undefined;\n  else return value;\n}\n\nasync function wait(ms) {\n  return new Promise(resolve => {\n    setTimeout(resolve, ms);\n  });\n}\n\n//https://dev.to/ycmjason/javascript-fetch-retry-upon-failure-3p6g\nconst fetch_retry = async (\n  url,\n  options,\n  n = AL_RETRY_LIMIT,\n  t = TIMEOUT,\n  exp = true\n) => {\n  for (let i = 0; i < n; i++) {\n    try {\n      return await fetch(url, options);\n    } catch (err) {\n      console.log(\"AL ERROR Retrying\", err);\n      const isLastAttempt = i + 1 === n;\n      if (isLastAttempt) throw err;\n      console.log(\"waiting\", exp ? t * Math.pow(2, i) : t);\n      await wait(exp ? t * Math.pow(2, i) : t);\n    }\n  }\n};\n\nconst JSON_HEADERS = {\n  Accept: \"application/json\",\n  \"Content-Type\": \"application/json\"\n};\n\nexport default class NetworkLayer {\n  constructor(AL_URL, HOST_URL, OUTER_LOOP_URL) {\n    this.AL_URL = AL_URL;\n    this.HOST_URL = HOST_URL;\n    this.OUTER_LOOP_URL = OUTER_LOOP_URL;\n    this.request_history = [];\n    autobind(this);\n    // this.createAgent = this.createAgent.bind(this)\n    // this.sendFeedback = this.sendFeedback.bind(this)\n    // this.sendTrainingData = this.sendTrainingData.bind(this)\n    // this.queryApprentice = this.queryApprentice.bind(this)\n    // this.term_print = this.term_print.bind(this)\n    // this.kill_this = this.kill_this.bind(this)\n  }\n\n  createAgent(context, event) {\n    this.term_print(\"Creating Agent: \" + context.agent_name, \"INFO\");\n    var data = {\n      name: context.agent_name,\n      agent_type: context.agent_type,\n      project_id: context.project_id\n    };\n    data = { ...context.other_agent_data, ...data };\n\n    console.log(this.AL_URL + \"/create/\");\n\n    this.request_history = [];\n    return fetch_retry(\n      this.AL_URL + \"/create/\",\n      { method: \"POST\", headers: JSON_HEADERS, body: JSON.stringify(data) },\n      6,\n      1000,\n    ).then(res => res.json());\n  }\n\n  sendFeedback(context, event) {\n    console.log(\"sendFeedback\");\n    if (context.staged_SAI === null) {\n      console.error(\"cannot give feedback on no action.\");\n    }\n\n    const skill_applications = context.skill_applications;\n    const feedback_map = context.feedback_map;\n\n    var out = null;\n    if (feedback_map && Object.keys(feedback_map).length > 0) {\n      out = new Promise((resolve)=>{resolve(null)})\n      // var skill_applications_subset = []\n      // var rewards = []\n      var d_list = [];\n      for (var index in feedback_map) {\n        var skill_app = skill_applications[index];\n        // skill_applications_subset.push({\n        var data = {\n          state: context.state,\n\t  next_state: context.tutor.getState(),\n          selection: skill_app[\"selection\"],\n          action: skill_app[\"action\"],\n          inputs: skill_app[\"inputs\"],\n          foci_of_attention: skill_app[\"foci_of_attention\"],\n          rhs_id: skill_app[\"rhs_id\"],\n          mapping: skill_app[\"mapping\"],\n          reward: feedback_map[index].toLowerCase() == \"correct\" ? 1 : -1\n        };\n        if (context.interactive) {\n          data[\"add_skill_info\"] = true;\n        }\n        // if(out == null){\n        //   out = this.sendTrainingData(d_list, context.agent_id);\n        // }else{\n\n        // }\n\n        // d_list.push(data);\n        // if(out != null){\n        out = out.then((resp)=>this.sendTrainingData(data,context.agent_id))\n\n        console.log(\"BLEEP\",this.OUTER_LOOP_URL, context.outer_loop_controller)\n        if(this.OUTER_LOOP_URL){\n          out = out.then((resp)=>\n            this.updateOuterLoopController(data, context)\n          )\n        }\n        \t\t // .then(()=>sleep(10))\n        // }else{\n        // \tout = this.sendTrainingData(data,context.agent_id)\n        // }\n      }\n      // out = this.sendTrainingData(d_list, context.agent_id);\n\n      // if(data.reward == null && context.reward != null){\n      // \tdata.reward = context.reward\n      // }\n    } else {\n      var skill_app = context.staged_SAI;\n      var data = {\n        state: context.state,\n\tnext_state: context.tutor.getState(),\n        selection: skill_app[\"selection\"],\n        action: skill_app[\"action\"],\n        inputs: skill_app[\"inputs\"],\n        foci_of_attention: skill_app[\"foci_of_attention\"],\n        rhs_id: skill_app[\"rhs_id\"],\n        mapping: skill_app[\"mapping\"],\n        reward: skill_app[\"reward\"]\n      };\n      if (context.interactive) {\n        data[\"add_skill_info\"] = true;\n      }\n      out = this.sendTrainingData(data, context.agent_id);\n      console.log(\"BLEEP\",this.OUTER_LOOP_URL, context)\n      if(this.OUTER_LOOP_URL && context.outer_loop_controller){\n        out = out.then((resp)=>\n          this.updateOuterLoopController(data, context)\n        )\n      }\n    }\n\n    return out;\n  }\n\n\n  sendTrainingData(data, agent_id) {\n    console.log(\"sendTrainingData\");\n    // console.log(\"SAI: \", sai_data)\n\n    // loggingLibrary.logResponse (transactionID,\"textinput1\",\"UpdateTextField\",\"Hello World\",\"RESULT\",\"CORRECT\",\"You got it!\");\n    // console.log(sai_data)\n    const URL = this.AL_URL + \"/train/\" + agent_id + \"/\";\n    return fetch_retry(URL, {\n      method: \"POST\",\n      headers: JSON_HEADERS,\n      body: JSON.stringify(data, ignoreKeys)\n    })\n      .then(response => response.text())\n      .then(text => {\n        try {\n          const data = JSON.parse(text);\n          return data;\n          // Do your JSON handling here\n        } catch (err) {\n          return {};\n          // It is text, do you text handling here\n        }\n      });\n\n\n  }\n\n  queryApprentice(context, event) {\n    console.log(\"queryApprentice\");\n\n    var data = {\n      state: context.state\n    };\n    if (context.interactive) {\n      data[\"kwargs\"] = { add_skill_info: true, n: 0 };\n    }\n\n    this.request_history.push(data);\n\n    const URL = this.AL_URL + \"/request/\" + context.agent_id + \"/\";\n\n    return fetch_retry(URL, {\n      method: \"POST\",\n      headers: JSON_HEADERS,\n      body: JSON.stringify(data)\n    }).then(res => res.json());\n  }\n\n  checkApprentice(context, event) {\n    console.log(\"checkApprentice\");\n\n    var data = {\n      state: context.state,\n      ...context.staged_SAI\n    };\n\n    const URL = this.AL_URL + \"/check/\" + context.agent_id + \"/\";\n\n    return fetch_retry(URL, {\n      method: \"POST\",\n      headers: JSON_HEADERS,\n      body: JSON.stringify(data)\n    })\n      .then(res => res.json())\n      .then(json => +json[\"reward\"]);\n  }\n\n  term_print(message, type = \"default\") {\n    var data = { message: message, type: type };\n    return fetch_retry(this.HOST_URL, {\n      method: \"PRINT\",\n      headers: JSON_HEADERS,\n      body: JSON.stringify(data)\n    });\n  }\n\n  kill_this(message, type = \"error\") {\n    var data = { message: message, type: type };\n    return fetch_retry(this.HOST_URL, {\n      method: \"QUIT\",\n      headers: JSON_HEADERS,\n      body: JSON.stringify(data)\n    });\n  }\n\n  write_file(file, data) {\n    var data = {\n      file: file,\n      data: data\n    };\n    return fetch_retry(this.HOST_URL, {\n      method: \"WRITE\",\n      headers: JSON_HEADERS,\n      body: JSON.stringify(data)\n    });\n  }\n\n  sendProblemDone(context,event){\n    //NOT YET IMPLEMENTED -- Might not need to\n    // var data = {}\n    // return fetch_retry(this.HOST_URL, {\n    //   method: \"PROBLEM_DONE\",\n    //   headers: JSON_HEADERS,\n    //   body: JSON.stringify(data, ignoreKeys)\n    // })\n  }\n\n  generate_nools(context, event) {\n    const URL = this.AL_URL + \"/get_skills/\" + context.agent_id + \"/\";\n    var data = { states: this.request_history.map(x => x[\"state\"]) };\n    return fetch_retry(URL, {\n      method: \"POST\",\n      headers: JSON_HEADERS,\n      body: JSON.stringify(data, ignoreKeys)\n    })\n      .then(res => res.json())\n      .then(json => {\n        console.log(\"NOOLS DIR: \", context.nools_dir);\n        var out_data = {\n          nools_dir: context.nools_dir,\n          problems: context.start_state_history,\n          skills: json\n        };\n        return fetch(this.HOST_URL, {\n          method: \"GEN_NOOLS\",\n          headers: JSON_HEADERS,\n          body: JSON.stringify(out_data, ignoreKeys)\n        });\n      });\n  }\n\n  \n\n  generateBehaviorProfile(context, event = {}) {\n    // data = {'states':request_history.map(x => x['state'])}\n    // console.log(JSON.stringify(data))\n\n    // requests = request_history\n    event.data = event.data || {};\n    var requests = event.data.requests || this.request_history;\n    var dir = event.data.out_dir || (context.working_dir || \".\") + \"/bprofiles\";\n    var HOST_URL = this.HOST_URL;\n    var AL_URL = this.AL_URL;\n    // requests = ground_truth_requests\n\n    // console.log(nools_dir)\n    var now = new Date();\n    var elapse =\n      (((now - context.agent_start_time) % 86400000) % 3600000) / 60000;\n    var start_data = { dir: dir, elapse_minutes: elapse.toFixed(1) };\n\n    var promise = fetch(HOST_URL, {\n      method: \"START_BEHAVIOR_PROFILE\",\n      headers: JSON_HEADERS,\n      body: JSON.stringify(start_data)\n    }).then(async function(whatever) {\n      for (let item of requests) {\n        // requests.forEach(function (item, index) {\n        var s = item[\"state\"];\n        var data = {\n          state: s,\n          kwargs: { add_skill_info: true, n: -1 }\n        };\n        var resp = await fetch_retry(\n          AL_URL + \"/request/\" + context.agent_id + \"/\",\n          {\n            method: \"POST\",\n            headers: JSON_HEADERS,\n            body: JSON.stringify(data)\n          }\n        ).then(res => res.json());\n\n        var responses = [];\n        if (\"responses\" in resp) {\n          resp[\"responses\"].forEach(function(r, index) {\n            var sai = {\n              selection: r[\"selection\"],\n              action: r[\"action\"],\n              inputs: r[\"inputs\"]\n            };\n            console.log(r);\n            console.log(r[\"selection\"]);\n            responses.push(sai);\n          });\n        }\n        var completeness_data = {\n          state: s,\n          responses: responses,\n          dir: dir\n        };\n        await fetch(HOST_URL, {\n          method: \"APPEND_BEHAVIOR_PROFILE\",\n          headers: JSON_HEADERS,\n          body: JSON.stringify(completeness_data)\n        });\n      }\n    });\n    return promise;\n  }\n\n  newOuterLoopController(controller, context) {\n    var data = {\n      outer_loop_type: controller[\"type\"] || controller[\"outer_loop_type\"],\n      problem_set: controller[\"problem_set\"],\n      outer_loop_args: controller[\"args\"] || controller[\"outer_loop_args\"],\n      id: context.agent_id\n    };\n\n\n\n    console.log(this.OUTER_LOOP_URL);\n    console.log(\"outer loop data:\", data);\n    console.log(\"outer loop context:\", context);\n    var out = fetch(this.OUTER_LOOP_URL, {\n      method: \"NEW_STUDENT\",\n      headers: JSON_HEADERS,\n      body: JSON.stringify(data)\n    }).then(res => {});\n    \n    return out;\n  }\n\n  updateOuterLoopController(data, context){\n    // console.log(\"UPDATE OUTER LOOP\",controller, data, context)\n    var update_data = {\n      selection : data['selection'],\n      reward : data['reward'],\n      action_type : context.action_type,\n    }\n    return fetch_retry(this.OUTER_LOOP_URL, {\n      method: \"POST\",\n      headers: JSON_HEADERS,\n      body: JSON.stringify(update_data)\n    })\n    // console.log('sel', data['selection'])\n    // console.log('reward', data['reward'])\n    // console.log('action_type', context.action_type)\n    // console.log('problem_name', context.tutor.getProblemName() || null)\n\n  }\n\n  nextProblem(controller, context) {\n    var data = {\n      id: context.agent_id\n    };\n\n    var out = fetch(this.OUTER_LOOP_URL, {\n      method: \"NEXT_PROBLEM\",\n      headers: JSON_HEADERS,\n      body: JSON.stringify(data)\n    }).then(res => res.json());\n    return out;\n  }\n\n  glob(path, context) {\n    path = path.replace(/\\.\\./g,\"!u\")\n    if (path[0] != \"/\") {\n      path = context.working_dir + \"/\" + path;\n    }\n    var out = fetch(this.HOST_URL, {\n      method: \"GLOB\",\n      headers: JSON_HEADERS,\n      body: JSON.stringify(path)\n    }).then(res => res.json());\n    return out;\n  }\n\n\n}\n"],"sourceRoot":""}